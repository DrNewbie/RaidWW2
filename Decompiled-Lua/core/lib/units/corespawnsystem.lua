-- Decompilation Error: _run_step(_unwarp_expressions, node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- Decompilation Error: _glue_flows(node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.

-- Decompilation error in this vicinity:
--- BLOCK #0 1-3, warpins: 1 ---
--- END OF BLOCK #0 ---

FLOW; TARGET BLOCK #1



-- Decompilation error in this vicinity:
--- BLOCK #1 6-18, warpins: 2 ---
if not CoreAiArea then

	-- Decompilation error in this vicinity:
	--- BLOCK #0 4-5, warpins: 1 ---
	slot0 = class()
	--- END OF BLOCK #0 ---



end

CoreAiArea = slot0
function CoreAiArea:init(unit, surface_name, obj_name, xml)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-31, warpins: 1 ---
	self._unit = unit
	self._spawn_point_index = 1
	slot7 = self._unit
	slot10 = obj_name
	self._obj = self._unit.get_object(slot6, Idstring(slot9))
	slot8 = surface_name .. obj_name
	self._nav = Search.nav(slot6, Search)
	slot8 = self._obj

	self._nav.set_reference_object(slot6, self._nav)

	self._spawn_points = {}
	slot8 = xml

	self.find_spawnpoints(slot6, self)

	return 
	--- END OF BLOCK #0 ---



end
function CoreAiArea:spawn(unit_name, spawn_point_name)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	local spawn_point = nil

	if spawn_point_name ~= "" then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-12, warpins: 1 ---
		slot6 = self._unit
		slot9 = spawn_point_name
		spawn_point = self._unit.get_object(slot5, Idstring(slot8))
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 13-17, warpins: 1 ---
		if #self._spawn_points < self._spawn_point_index then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 18-18, warpins: 1 ---
			return 
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 19-24, warpins: 2 ---
		spawn_point = self._spawn_points[self._spawn_point_index]
		self._spawn_point_index = self._spawn_point_index + 1
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 25-60, warpins: 2 ---
	slot11 = spawn_point
	slot11 = spawn_point.rotation(spawn_point)
	slot12 = spawn_point
	slot10 = "slot_mask"
	slot14 = "statics"
	local ray = World.raycast(slot5, World, "ray", spawn_point.position(slot9) + spawn_point.rotation(spawn_point).z(spawn_point) * 100, spawn_point.position(spawn_point) - spawn_point.rotation(spawn_point).z(spawn_point) * 500, managers.slot.get_mask(spawn_point.rotation(spawn_point), managers.slot))

	if ray then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 61-69, warpins: 1 ---
		slot8 = ray.position
		local unit = safe_spawn_unit(slot6, unit_name)
		slot8 = unit

		if unit.base(unit_name) ~= nil then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 70-75, warpins: 1 ---
			slot8 = unit

			if unit.base(slot7).link ~= nil then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 76-84, warpins: 1 ---
				slot8 = unit
				slot11 = self._nav

				unit.base(slot7).link(slot7, unit.base(slot7), self._unit, self._obj)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 85-85, warpins: 3 ---
		return unit
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 86-86, warpins: 2 ---
	return 
	--- END OF BLOCK #2 ---



end
function CoreAiArea:find_spawnpoints(xml)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot4 = xml

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-48, warpins: 0 ---
	for point in xml.children(slot3) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-9, warpins: 1 ---
		slot8 = point

		if point.name(slot7) == "ai_spawn_point" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 10-15, warpins: 1 ---
			slot9 = "name"

			if point.parameter(slot7, point) ~= "" then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 16-27, warpins: 1 ---
				slot8 = self._unit
				slot14 = "name"
				local object = self._unit.get_object(slot7, Idstring(point.parameter(slot12, point)))

				if object ~= nil then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 28-46, warpins: 1 ---
					slot13 = self._unit
					slot16 = "name"
					slot10 = "[" .. self._unit.name(slot12) .. "] AI spawn point found: " .. point.parameter(slot14, point)

					cat_print(slot8, "spawn_system")

					slot10 = object

					table.insert(slot8, self._spawn_points)
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 47-48, warpins: 5 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 49-49, warpins: 1 ---
	return 
	--- END OF BLOCK #2 ---



end
slot0 = CoreSpawnSystem or class()
CoreSpawnSystem = slot0
function CoreSpawnSystem:init(unit)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-11, warpins: 1 ---
	self._unit = unit
	self._post_init = false
	self._ai_surface_name = "surface_generic_spawner_"
	self._ai_spawn_areas = {}
	slot4 = self

	self.read_spawn_xml(slot3)

	return 
	--- END OF BLOCK #0 ---



end
function CoreSpawnSystem:get_linked_unit_list()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	local linked_unit_list = {}

	if self._linked_unit_map then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-8, warpins: 1 ---
		slot4 = self._linked_unit_map

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 9-21, warpins: 0 ---
		for _, unit_map in pairs(slot3) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 9-12, warpins: 1 ---
			slot9 = unit_map

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 13-19, warpins: 0 ---
			for _, unit in pairs(slot8) do

				-- Decompilation error in this vicinity:
				--- BLOCK #0 13-17, warpins: 1 ---
				slot15 = unit

				table.insert(slot13, linked_unit_list)
				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 18-19, warpins: 2 ---
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 20-21, warpins: 2 ---
			--- END OF BLOCK #2 ---



		end
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 22-22, warpins: 2 ---
	return linked_unit_list
	--- END OF BLOCK #1 ---



end
function CoreSpawnSystem:destroy()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._linked_unit_map then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-7, warpins: 1 ---
		slot3 = self._linked_unit_map

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 8-32, warpins: 0 ---
		for _, unit_map in pairs(slot2) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 8-11, warpins: 1 ---
			slot8 = unit_map

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 12-30, warpins: 0 ---
			for _, unit in pairs(slot7) do

				-- Decompilation error in this vicinity:
				--- BLOCK #0 12-16, warpins: 1 ---
				slot13 = unit

				if alive(slot12) then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 17-28, warpins: 1 ---
					slot17 = unit
					slot14 = "[CoreSpawnSystem] Destroy unit: " .. unit.name(slot16)

					cat_print(slot12, "spawn_system")

					slot14 = 0

					unit.set_slot(slot12, unit)
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 29-30, warpins: 3 ---
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 31-32, warpins: 2 ---
			--- END OF BLOCK #2 ---



		end
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 33-33, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
function CoreSpawnSystem:update(unit, t, dt)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._delayed_var_and_cb_init then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-7, warpins: 1 ---
		slot6 = self._delayed_var_and_cb_init

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 8-14, warpins: 0 ---
		for lv2, unit in pairs(slot5) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 8-12, warpins: 1 ---
			slot13 = lv2

			self.set_var_and_cb(slot10, self, unit)
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 13-14, warpins: 2 ---
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 15-16, warpins: 1 ---
		self._delayed_var_and_cb_init = nil
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 17-25, warpins: 2 ---
	slot8 = false

	self._unit.set_extension_update_enabled(slot5, self._unit, "spawn_system")

	self._post_init = true

	return 
	--- END OF BLOCK #1 ---



end
function CoreSpawnSystem:get_child_unit(socket_name, unit_name)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._linked_unit_map then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-7, warpins: 1 ---
		local unit_map = self._linked_unit_map[socket_name]

		if unit_map then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 8-9, warpins: 1 ---
			return unit_map[unit_name]
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 10-11, warpins: 3 ---
	return nil
	--- END OF BLOCK #1 ---



end
function CoreSpawnSystem:init_ai_area(name, xml)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-14, warpins: 1 ---
	slot5 = self._unit
	slot8 = name
	local object = self._unit.get_object(slot4, Idstring(slot7))
	slot7 = object

	if not self._ai_spawn_areas[object.name(Idstring)] then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 15-29, warpins: 1 ---
		slot13 = object
		slot12 = xml
		self._ai_spawn_areas[object.name(slot6)] = CoreAiArea.new(object, CoreAiArea, self._unit, self._ai_surface_name, object.name(xml))
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 30-30, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
function CoreSpawnSystem:find_spawn_node(xml)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot4 = xml

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-21, warpins: 0 ---
	for spawn_node in xml.children(slot3) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-9, warpins: 1 ---
		slot8 = spawn_node

		if spawn_node.name(slot7) == "spawn" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 10-19, warpins: 1 ---
			slot12 = self._unit
			slot9 = "[CoreSpawnSystem] Found spawn node on: " .. self._unit.name(slot11)

			cat_print(slot7, "spawn_system")

			return spawn_node
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 20-21, warpins: 3 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 22-32, warpins: 1 ---
	slot8 = self._unit
	slot5 = "[CoreSpawnSystem] Could not find spawn node on: " .. self._unit.name(slot7)

	Application.error(slot3, Application)

	return 
	--- END OF BLOCK #2 ---



end
function CoreSpawnSystem:set_var_and_cb_delayed(new_unit, lv2)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if not self._post_init then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-6, warpins: 1 ---
		if not self._delayed_var_and_cb_init then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 7-7, warpins: 1 ---
			slot3 = {}
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 8-11, warpins: 2 ---
		self._delayed_var_and_cb_init = slot3
		self._delayed_var_and_cb_init[lv2] = new_unit
		--- END OF BLOCK #1 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-16, warpins: 1 ---
		slot7 = lv2

		self.set_var_and_cb(slot4, self, new_unit)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 17-17, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
function CoreSpawnSystem:set_var_and_cb(new_unit, lv2)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot5 = lv2

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-86, warpins: 0 ---
	for lv3 in lv2.children(slot4) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-9, warpins: 1 ---
		slot9 = lv3

		if lv3.name(slot8) == "variables" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 10-15, warpins: 1 ---
			slot10 = "extension"

			if lv3.parameter(slot8, lv3) ~= "" then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 16-28, warpins: 1 ---
				slot14 = "extension"
				slot10 = "Found variable block for: " .. lv3.parameter(slot12, lv3)

				cat_print(slot8, "spawn_system")

				slot9 = lv3

				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 29-84, warpins: 0 ---
				for lv4 in lv3.children(slot8) do

					-- Decompilation error in this vicinity:
					--- BLOCK #0 29-33, warpins: 1 ---
					slot13 = lv4

					if lv4.name(slot12) == "var" then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 34-39, warpins: 1 ---
						slot14 = "name"

						if lv4.parameter(slot12, lv4) ~= "" then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 40-45, warpins: 1 ---
							slot14 = "val"

							if lv4.parameter(slot12, lv4) ~= "" then

								-- Decompilation error in this vicinity:
								--- BLOCK #0 46-82, warpins: 1 ---
								slot22 = "val"
								slot19 = lv4.parameter(slot20, lv4) .. "'"
								slot14 = "Set variable: " .. lv4.parameter(slot16, lv4) .. "='" .. tostring("name")

								cat_print(slot12, "spawn_system")

								local meta = getmetatable(slot12)
								slot15 = "extension"
								local func = meta[lv3.parameter(new_unit, lv3)](new_unit)
								slot16 = "name"
								slot17 = "val"
								func[lv4.parameter(new_unit, lv4)] = lv4.parameter(lv4, lv4)
								--- END OF BLOCK #0 ---



							end
							--- END OF BLOCK #0 ---



						end
						--- END OF BLOCK #0 ---



					end
					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 83-84, warpins: 5 ---
					--- END OF BLOCK #1 ---



				end
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 85-86, warpins: 4 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 87-90, warpins: 1 ---
	slot5 = lv2

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 91-188, warpins: 0 ---
	for lv3 in lv2.children(slot4) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 91-99, warpins: 1 ---
		slot10 = "name"
		local lv3_name = lv3.parameter(slot8, lv3)
		slot10 = lv3

		if lv3.name(lv3) == "callback" and lv3_name ~= "" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 102-107, warpins: 1 ---
			slot11 = "extension"

			if lv3.parameter(slot9, lv3) ~= "" then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 108-130, warpins: 1 ---
				slot17 = "extension"
				slot11 = "Building callback '" .. lv3_name .. "' in extension '" .. lv3.parameter(slot15, lv3) .. "'."

				cat_print(slot9, "spawn_system")

				local function_arg = {}
				slot14 = lv3

				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 131-164, warpins: 0 ---
				for num_arg = 1, table.size(lv3.parameter_map("' in extension '")) - 2, 1 do

					-- Decompilation error in this vicinity:
					--- BLOCK #0 131-141, warpins: 2 ---
					slot16 = num_arg
					local key = "param" .. tostring(slot15)
					slot17 = key

					if lv3.parameter(slot15, lv3) ~= "" then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 142-163, warpins: 1 ---
						slot25 = key
						slot17 = "Found parameter: " .. key .. "=\"" .. tostring(lv3.parameter(slot23, lv3)) .. "\""

						cat_print(slot15, "spawn_system")

						slot16 = function_arg
						slot20 = key

						table.insert(slot15, lv3.parameter(key, lv3))
						--- END OF BLOCK #0 ---



					end
					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 164-164, warpins: 2 ---
					--- END OF BLOCK #1 ---



				end

				--- END OF BLOCK #1 ---

				FLOW; TARGET BLOCK #2



				-- Decompilation error in this vicinity:
				--- BLOCK #2 165-186, warpins: 1 ---
				slot12 = "Call callback!"

				cat_print(slot10, "spawn_system")

				local meta = getmetatable(slot10)
				slot13 = "extension"
				local func = meta[lv3.parameter(new_unit, lv3)](new_unit)
				slot13 = new_unit.base(slot14)
				slot16 = function_arg

				func[lv3_name](new_unit, unpack(new_unit))
				--- END OF BLOCK #2 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 187-188, warpins: 5 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 189-189, warpins: 1 ---
	return 
	--- END OF BLOCK #4 ---



end
function CoreSpawnSystem:read_spawn_xml()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-20, warpins: 1 ---
	slot3 = self
	slot9 = self._unit
	slot9 = self._unit.name("")
	slot8 = ""
	slot6 = PackageManager.unit_data(slot5, PackageManager, self._unit.name("").id(""))
	local xml_data = self.find_spawn_node(slot2, PackageManager.unit_data(slot5, PackageManager, self._unit.name("").id("")).model_script_data(slot5))

	if xml_data then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 21-24, warpins: 1 ---
		slot4 = xml_data

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 25-147, warpins: 0 ---
		for lv1 in xml_data.children(slot3) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 25-33, warpins: 1 ---
			local lv1_element_name = lv1.name(slot7)
			slot10 = "name"
			local lv1_name = lv1.parameter(lv1, lv1)

			if lv1_element_name == "ai_area" and lv1_name ~= "" then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 36-50, warpins: 1 ---
				slot11 = "[CoreSpawnSystem] AI area defined: " .. lv1_name

				cat_print(slot9, "spawn_system")

				slot12 = lv1

				self.init_ai_area(slot9, self, lv1_name)

				slot10 = lv1

				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 51-97, warpins: 0 ---
				for lv2 in lv1.children(slot9) do

					-- Decompilation error in this vicinity:
					--- BLOCK #0 51-59, warpins: 1 ---
					slot15 = "name"
					local lv2_name = lv2.parameter(slot13, lv2)
					slot15 = lv2

					if lv2.name(lv2) == "unit" and lv2_name ~= "" then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 62-80, warpins: 1 ---
						slot16 = "[CoreSpawnSystem] Spawning unit: " .. lv2_name

						cat_print(slot14, "spawn_system")

						slot16 = lv2_name
						slot20 = "spawn_point"
						local new_unit = self._ai_spawn_areas[lv1_name].spawn(slot14, self._ai_spawn_areas[lv1_name], lv2.parameter(slot18, lv2))

						if not self._linked_unit_map then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 81-81, warpins: 1 ---
							slot14 = {}
							--- END OF BLOCK #0 ---



						end

						--- END OF BLOCK #0 ---

						FLOW; TARGET BLOCK #1



						-- Decompilation error in this vicinity:
						--- BLOCK #1 82-86, warpins: 2 ---
						self._linked_unit_map = slot14

						if not self._linked_unit_map[lv1_name] then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 87-87, warpins: 1 ---
							local unit_map = {}
							--- END OF BLOCK #0 ---



						end

						--- END OF BLOCK #1 ---

						FLOW; TARGET BLOCK #2



						-- Decompilation error in this vicinity:
						--- BLOCK #2 88-95, warpins: 2 ---
						unit_map[lv2_name] = new_unit
						self._linked_unit_map[lv1_name] = unit_map
						slot19 = lv2

						self.set_var_and_cb_delayed(slot16, self, new_unit)
						--- END OF BLOCK #2 ---



					end
					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 96-97, warpins: 4 ---
					--- END OF BLOCK #1 ---



				end
				--- END OF BLOCK #1 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 98-99, warpins: 3 ---
			if lv1_element_name == "socket" and lv1_name ~= "" then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 102-105, warpins: 1 ---
				slot10 = lv1

				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 106-145, warpins: 0 ---
				for lv2 in lv1.children(slot9) do

					-- Decompilation error in this vicinity:
					--- BLOCK #0 106-110, warpins: 1 ---
					slot14 = lv2

					if lv2.name(slot13) == "unit" then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 111-113, warpins: 1 ---
						if not self._enabled_unit_map then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 114-114, warpins: 1 ---
							slot12 = {}
							--- END OF BLOCK #0 ---



						end

						--- END OF BLOCK #0 ---

						FLOW; TARGET BLOCK #1



						-- Decompilation error in this vicinity:
						--- BLOCK #1 115-119, warpins: 2 ---
						self._enabled_unit_map = slot12

						if not self._enabled_unit_map[lv1_name] then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 120-120, warpins: 1 ---
							local unit_map = {}
							--- END OF BLOCK #0 ---



						end

						--- END OF BLOCK #1 ---

						FLOW; TARGET BLOCK #2



						-- Decompilation error in this vicinity:
						--- BLOCK #2 121-126, warpins: 2 ---
						slot16 = "enabled"

						if lv2.parameter(slot14, lv2) == "false" then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 127-128, warpins: 1 ---
							slot13 = false
							--- END OF BLOCK #0 ---



						else

							-- Decompilation error in this vicinity:
							--- BLOCK #0 129-129, warpins: 1 ---
							local enabled = true
							--- END OF BLOCK #0 ---



						end

						--- END OF BLOCK #2 ---

						FLOW; TARGET BLOCK #3



						-- Decompilation error in this vicinity:
						--- BLOCK #3 130-138, warpins: 2 ---
						slot17 = "name"
						unit_map[lv2.parameter(slot15, lv2)] = enabled
						self._enabled_unit_map[lv1_name] = unit_map

						if enabled then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 139-143, warpins: 1 ---
							slot18 = lv2

							self.setup_unit(slot15, self, lv1)
							--- END OF BLOCK #0 ---



						end
						--- END OF BLOCK #3 ---



					end
					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 144-145, warpins: 4 ---
					--- END OF BLOCK #1 ---



				end
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 146-147, warpins: 4 ---
			--- END OF BLOCK #2 ---



		end
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 148-150, warpins: 2 ---
	if not self._delayed_var_and_cb_init then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 151-158, warpins: 1 ---
		slot6 = false

		self._unit.set_extension_update_enabled(slot3, self._unit, "spawn_system")

		self._post_init = true
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 159-159, warpins: 2 ---
	return 
	--- END OF BLOCK #2 ---



end
function CoreSpawnSystem:setup_unit(lv1, lv2)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-32, warpins: 1 ---
	slot6 = "name"
	local lv1_name = lv1.parameter(slot4, lv1)
	slot7 = "name"
	local lv2_name = lv2.parameter(lv1, lv2)
	slot8 = "[CoreSpawnSystem] Spawn unit '" .. lv2_name .. "' in socket '" .. lv1_name .. "'."

	cat_print(lv2, "spawn_system")

	local new_unit = nil
	slot11 = lv1_name
	local object = self._unit.get_object("spawn_system", Idstring("' in socket '"))
	slot10 = lv2_name

	if MassUnitManager.can_spawn_unit(self._unit, MassUnitManager) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 33-49, warpins: 1 ---
		slot10 = "Spawning mass unit!"

		cat_print(slot8, "spawn_system")

		slot11 = object.position(slot12)
		slot14 = object
		new_unit = MassUnitManager.spawn_unit(slot8, MassUnitManager, lv2_name, object.rotation(object))
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 50-61, warpins: 1 ---
		slot10 = object.position(lv2_name)
		slot13 = object
		new_unit = safe_spawn_unit(slot8, lv2_name.id(slot10), object.rotation(object))
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 62-64, warpins: 2 ---
	if not self._linked_unit_map then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 65-65, warpins: 1 ---
		slot7 = {}
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 66-70, warpins: 2 ---
	self._linked_unit_map = slot7

	if not self._linked_unit_map[lv1_name] then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 71-71, warpins: 1 ---
		local unit_map = {}
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 72-80, warpins: 2 ---
	unit_map[lv2_name] = new_unit
	self._linked_unit_map[lv1_name] = unit_map
	slot11 = "link_object"

	if lv2.parameter(slot9, lv2) ~= "" then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 81-85, warpins: 1 ---
		slot10 = new_unit

		if new_unit.base(slot9) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 86-91, warpins: 1 ---
			slot10 = new_unit
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 149-162, warpins: 2 ---
			slot12 = new_unit
			slot16 = "link_object"

			self._unit.link(slot9, self._unit, lv1_name, lv2.parameter(slot14, lv2))

			slot10 = lv2

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 163-227, warpins: 0 ---
			for lv3 in lv2.children(slot9) do

				-- Decompilation error in this vicinity:
				--- BLOCK #0 163-171, warpins: 1 ---
				slot15 = "name"
				local lv3_name = lv3.parameter(slot13, lv3)
				slot15 = lv3

				if lv3.name(lv3) == "object" then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 172-177, warpins: 1 ---
					slot16 = "name"

					if lv3.parameter(slot14, lv3) ~= "" then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 178-183, warpins: 1 ---
						slot16 = "socket"

						if lv3.parameter(slot14, lv3) ~= "" then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 184-225, warpins: 1 ---
							slot21 = "socket"
							local socket_object = self._unit.get_object(slot14, Idstring(lv3.parameter(slot19, lv3)))
							slot16 = new_unit
							slot19 = lv3_name
							slot17 = socket_object

							new_unit.get_object(self._unit, Idstring(lv3.parameter)).link(self._unit, new_unit.get_object(self._unit, Idstring(lv3.parameter)))

							slot16 = new_unit
							slot19 = lv3_name
							slot16 = new_unit.get_object(self._unit, Idstring(lv3.parameter))

							new_unit.get_object(self._unit, Idstring(lv3.parameter)).set_local_position(self._unit, Vector3())

							slot16 = new_unit
							slot19 = lv3_name
							slot16 = new_unit.get_object(self._unit, Idstring(lv3.parameter))

							new_unit.get_object(self._unit, Idstring(lv3.parameter)).set_local_rotation(self._unit, Rotation())
							--- END OF BLOCK #0 ---



						end
						--- END OF BLOCK #0 ---



					end
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 226-227, warpins: 5 ---
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 228-228, warpins: 1 ---
			--- END OF BLOCK #2 ---



		end
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 229-232, warpins: 1 ---
		slot11 = "Spawning only! (No linking.)"

		cat_print(slot9, "spawn_system")
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 233-235, warpins: 4 ---
	if not self._linked_unit_map then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 236-236, warpins: 1 ---
		slot8 = {}
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 237-241, warpins: 2 ---
	self._linked_unit_map = slot8

	if not self._linked_unit_map[lv1_name] then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 242-242, warpins: 1 ---
		local unit_map = {}
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 243-251, warpins: 2 ---
	unit_map[lv2_name] = new_unit
	self._linked_unit_map[lv1_name] = unit_map
	slot13 = lv2

	self.set_var_and_cb_delayed(slot10, self, new_unit)

	return 
	--- END OF BLOCK #6 ---



end
function CoreSpawnSystem:set_unit_enabled(socket_name, unit_name, enabled)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	local unit_map = self._enabled_unit_map[socket_name]

	if unit_map then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-7, warpins: 1 ---
		local was_enabled = unit_map[unit_name]

		if was_enabled == nil then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 8-26, warpins: 1 ---
			slot12 = enabled
			slot14 = unit_name
			slot16 = socket_name
			slot9 = "Unable to set enabled state \"" .. tostring(slot11) .. "\" on unit name \"" .. tostring(slot13) .. "\" and socket name \"" .. tostring(slot15) .. "\". It doesn't exist."

			Application.error(slot7, Application)
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 27-30, warpins: 1 ---
			if not was_enabled ~= not enabled then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 31-32, warpins: 1 ---
				if enabled then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 33-41, warpins: 1 ---
					slot8 = self
					slot13 = unit_name

					self.setup_unit(slot7, self.get_socket_nodes(slot10, self, socket_name))
					--- END OF BLOCK #0 ---



				else

					-- Decompilation error in this vicinity:
					--- BLOCK #0 42-53, warpins: 1 ---
					local unit = self._linked_unit_map[socket_name][unit_name]
					self._linked_unit_map[socket_name][unit_name] = nil
					slot9 = unit

					if alive(nil) then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 54-57, warpins: 1 ---
						slot10 = 0

						unit.set_slot(slot8, unit)
						--- END OF BLOCK #0 ---



					end
					--- END OF BLOCK #0 ---



				end

				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 58-59, warpins: 3 ---
				unit_map[unit_name] = enabled
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 60-77, warpins: 1 ---
		slot11 = enabled
		slot13 = unit_name
		slot15 = socket_name
		slot8 = "Unable to set enabled state \"" .. tostring(slot10) .. "\" on unit name \"" .. tostring(slot12) .. "\" and socket name \"" .. tostring(slot14) .. "\". It was either not disabled or it doesn't exist."

		Application.error(slot6, Application)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 78-78, warpins: 4 ---
	return 
	--- END OF BLOCK #1 ---



end
function CoreSpawnSystem:get_socket_nodes(socket_name, unit_name)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-20, warpins: 1 ---
	slot5 = self
	slot11 = self._unit
	slot11 = self._unit.name(slot10)
	slot10 = ""
	slot8 = PackageManager.unit_data(slot7, PackageManager, self._unit.name(slot10).id(slot10))
	local xml_data = self.find_spawn_node(slot4, PackageManager.unit_data(slot7, PackageManager, self._unit.name(slot10).id(slot10)).model_script_data(slot7))

	if xml_data then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 21-24, warpins: 1 ---
		slot6 = xml_data

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 25-57, warpins: 0 ---
		for lv1 in xml_data.children(slot5) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 25-33, warpins: 1 ---
			slot11 = "name"
			local lv1_name = lv1.parameter(slot9, lv1)
			slot11 = lv1

			if lv1.name(lv1) == "socket" and lv1_name == socket_name then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 36-39, warpins: 1 ---
				slot11 = lv1

				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 40-55, warpins: 0 ---
				for lv2 in lv1.children(slot10) do

					-- Decompilation error in this vicinity:
					--- BLOCK #0 40-48, warpins: 1 ---
					slot16 = "name"
					local lv2_name = lv2.parameter(slot14, lv2)
					slot16 = lv2

					if lv2.name(lv2) == "unit" and lv2_name == unit_name then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 51-53, warpins: 1 ---
						return lv1, lv2
						--- END OF BLOCK #0 ---



					end
					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 54-55, warpins: 4 ---
					--- END OF BLOCK #1 ---



				end
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 56-57, warpins: 4 ---
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 58-58, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end

return 

--- END OF BLOCK #1 ---

FLOW; TARGET BLOCK #3



-- Decompilation error in this vicinity:
--- BLOCK #2 19-20, warpins: 1 ---
slot0 = class()
--- END OF BLOCK #2 ---

FLOW; TARGET BLOCK #3



-- Decompilation error in this vicinity:
--- BLOCK #3 21-61, warpins: 2 ---
--- END OF BLOCK #3 ---



