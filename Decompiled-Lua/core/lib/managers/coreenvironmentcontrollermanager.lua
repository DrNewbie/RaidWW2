-- Decompilation Error: _run_step(_unwarp_expressions, node)

-- Decompilation Error: _glue_flows(node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
slot4 = 150
local flashbang_test_offset = Vector3(slot1, 0, 0)
CoreEnvironmentControllerManager = CoreEnvironmentControllerManager or class()
CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_START = 0.5
CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_END = 0.1
CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_POWER = 2
CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_INTERVAL = CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_START - CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_END
CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_PULSE_AMPLITUDE = 0.4
CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_PULSE_FREQ = 200
CoreEnvironmentControllerManager.DEFAULT_DOF_DISTANCE = 10
function CoreEnvironmentControllerManager:init()
	self._dof_distance = CoreEnvironmentControllerManager.DEFAULT_DOF_DISTANCE
	self._current_dof_distance = self._dof_distance
	self._base_contrast = 0.1
	self._hurt_value = 1
	self._health_effect_value = 1
	self._suppression_value = 0
	self._current_suppression_value = 0
	self._old_suppression_value = 0
	self._supression_start_flash = 0
	self._old_health_effect_value = 1
	self._health_effect_value_diff = 0
	self._blurzones = {}
	self._hit_right = 0
	self._hit_left = 0
	self._hit_up = 0
	self._hit_down = 0
	self._hit_front = 0
	self._hit_back = 0
	self._hit_some = 0
	self._hit_amount = 0.3
	self._hit_cap = 1
	self._current_flashbang = 0
	self._current_flashbang_flash = 0
	self._flashbang_multiplier = 1
	self._flashbang_duration = 1
	self._HE_blinding = 0
	self._downed_value = 0
	self._last_life = false
	self._last_life_mod = 1
	self._vignette = 0
	self._lut_lerp_value = 0
	slot3 = self

	self._create_dof_tweak_data(slot2)

	self._current_dof_setting = "standard"
	self._near_plane_x = self._dof_tweaks[self._current_dof_setting].steelsight.near_plane_x
	self._near_plane_y = self._dof_tweaks[self._current_dof_setting].steelsight.near_plane_y
	self._far_plane_x = self._dof_tweaks[self._current_dof_setting].steelsight.far_plane_x
	self._far_plane_y = self._dof_tweaks[self._current_dof_setting].steelsight.far_plane_y
	self._dof_override = false
	self._dof_override_near = 5
	self._dof_override_near_pad = 5
	self._dof_override_far = 5000
	self._dof_override_far_pad = 1000
	slot3 = self
	self._lens_distortion = self.get_default_lens_distortion_value(self._current_dof_setting)
	slot3 = self

	self.set_dome_occ_default(self._current_dof_setting)

	return 
end
function CoreEnvironmentControllerManager:update(t, dt)
	slot7 = dt

	self._update_values(slot4, self, t)

	slot7 = dt

	self.set_post_composite(slot4, self, t)

	return 
end
function CoreEnvironmentControllerManager:_update_values(t, dt)
	if self._current_dof_distance ~= self._dof_distance then
		slot7 = 5 * dt
		self._current_dof_distance = math.lerp(slot4, self._current_dof_distance, self._dof_distance)
	end

	if Global.debug_post_effects_enabled and self._current_suppression_value ~= self._suppression_value then
		slot7 = 2 * dt
		self._current_suppression_value = math.step(slot4, self._current_suppression_value, self._suppression_value)
	end

	return 
end
function CoreEnvironmentControllerManager:get_dof_distance()
	return self._dof_distance
end
function CoreEnvironmentControllerManager:set_dof_distance(distance, in_steelsight, position)
	slot7 = distance or CoreEnvironmentControllerManager.DEFAULT_DOF_DISTANCE
	self._dof_distance = math.max(slot5, CoreEnvironmentControllerManager.DEFAULT_DOF_DISTANCE)
	self._in_steelsight = in_steelsight

	return 
end
function CoreEnvironmentControllerManager:get_default_lens_distortion_value()
	return 1.02
end
function CoreEnvironmentControllerManager:get_lens_distortion_value()
	return self._lens_distortion
end
function CoreEnvironmentControllerManager:reset_lens_distortion_value()
	slot3 = self
	slot6 = self

	self.set_lens_distortion_power(slot2, self.get_default_lens_distortion_value(slot5))

	return 
end
function CoreEnvironmentControllerManager:set_lens_distortion_power(lens_distortion)
	self._lens_distortion = lens_distortion

	return 
end
function CoreEnvironmentControllerManager:set_vignette(vignette)
	self._vignette = vignette

	return 
end
function CoreEnvironmentControllerManager:set_hurt_value(hurt)
	self._hurt_value = hurt

	return 
end
function CoreEnvironmentControllerManager:set_health_effect_value(health_effect_value)
	self._health_effect_value = health_effect_value

	return 
end
function CoreEnvironmentControllerManager:set_downed_value(downed_value)
	self._downed_value = downed_value

	return 
end
function CoreEnvironmentControllerManager:set_last_life(last_life)
	self._last_life = last_life

	return 
end
function CoreEnvironmentControllerManager:set_last_life_mod(last_life_mod)
	self._last_life_mod = last_life_mod

	return 
end
function CoreEnvironmentControllerManager:hurt_value()
	return self._hurt_value
end
function CoreEnvironmentControllerManager:set_suppression_value(effective_value, raw_value)
	self._suppression_value = (0 < effective_value and 1) or 0

	return 
end
function CoreEnvironmentControllerManager:hit_feedback_front()
	slot4 = 1
	self._hit_front = math.min(slot2, self._hit_front + self._hit_amount)
	slot4 = 1
	self._hit_some = math.min(slot2, self._hit_some + self._hit_amount)

	return 
end
function CoreEnvironmentControllerManager:hit_feedback_back()
	slot4 = 1
	self._hit_back = math.min(slot2, self._hit_back + self._hit_amount)
	slot4 = 1
	self._hit_some = math.min(slot2, self._hit_some + self._hit_amount)

	return 
end
function CoreEnvironmentControllerManager:hit_feedback_right()
	slot4 = 1
	self._hit_right = math.min(slot2, self._hit_right + self._hit_amount)
	slot4 = 1
	self._hit_some = math.min(slot2, self._hit_some + self._hit_amount)

	return 
end
function CoreEnvironmentControllerManager:hit_feedback_left()
	slot4 = 1
	self._hit_left = math.min(slot2, self._hit_left + self._hit_amount)
	slot4 = 1
	self._hit_some = math.min(slot2, self._hit_some + self._hit_amount)

	return 
end
function CoreEnvironmentControllerManager:hit_feedback_up()
	slot4 = 1
	self._hit_up = math.min(slot2, self._hit_up + self._hit_amount)
	slot4 = 1
	self._hit_some = math.min(slot2, self._hit_some + self._hit_amount)

	return 
end
function CoreEnvironmentControllerManager:hit_feedback_down()
	slot4 = 1
	self._hit_down = math.min(slot2, self._hit_down + self._hit_amount)
	slot4 = 1
	self._hit_some = math.min(slot2, self._hit_some + self._hit_amount)

	return 
end
function CoreEnvironmentControllerManager:set_blurzone(id, mode, pos, radius, height, delete_after_fadeout)
	local blurzone = self._blurzones[id]

	if id then
		blurzone = blurzone or {
			opacity = 0,
			radius = 0,
			mode = -1,
			height = 0,
			delete_after_fadeout = false
		}

		if 0 < mode then
			blurzone.mode = mode
			blurzone.pos = pos
			blurzone.radius = radius
			blurzone.height = height

			if mode == 2 then
				blurzone.opacity = 2
				blurzone.mode = 1
				blurzone.update = self.blurzone_flash_in_line_of_sight
			elseif mode == 3 then
				blurzone.opacity = 2
				blurzone.mode = 1
				blurzone.update = self.blurzone_flash_in
			else
				blurzone.opacity = 0
				blurzone.update = self.blurzone_fade_in
			end

			if 0 < height then
				blurzone.check = self.blurzone_check_cylinder
			else
				blurzone.check = self.blurzone_check_sphere
			end

			blurzone.delete_after_fadeout = delete_after_fadeout
		elseif blurzone and 0 < blurzone.mode then
			blurzone.mode = mode
			blurzone.pos = blurzone.pos or pos
			blurzone.radius = blurzone.radius or radius
			blurzone.height = blurzone.height or height
			blurzone.opacity = 1
			blurzone.update = self.blurzone_fade_out

			if 0 < blurzone.height then
				blurzone.check = self.blurzone_check_cylinder
			else
				blurzone.check = self.blurzone_check_sphere
			end
		end

		self._blurzones[id] = blurzone
	end

	return 
end
function CoreEnvironmentControllerManager:set_all_blurzones(mode)
	slot4 = self._blurzones

	for id, blurzone in pairs(slot3) do
		slot11 = mode

		self.set_blurzone(slot8, self, id)
	end

	return 
end
function CoreEnvironmentControllerManager:_blurzones_update(t, dt, camera_pos)
	local result = 0
	slot7 = self._blurzones

	for id, blurzone in pairs(slot6) do
		if blurzone and -1 < blurzone.mode then
			slot17 = blurzone
			local blur_zone_val = blurzone.update(slot11, blurzone, self, t, dt, camera_pos)

			if result < blur_zone_val then
				result = blur_zone_val
			end
		elseif blurzone.delete_after_fadeout then
			self._blurzones[id] = nil
		end
	end

	return result
end
function CoreEnvironmentControllerManager:blurzone_flash_in_line_of_sight(self, t, dt, camera_pos, blurzone)
	blurzone.opacity = blurzone.opacity - dt * 0.3
	slot12 = 2000
	self._HE_blinding = self.test_line_of_sight(dt * 0.3, self, blurzone.pos, 150, 1000)

	if blurzone.opacity < 1 then
		blurzone.opacity = 1
		blurzone.update = self.blurzone_fade_idle_line_of_sight
	end

	slot10 = camera_pos

	return blurzone.check(slot7, blurzone, blurzone) * (1 + 11 * (blurzone.opacity - 1))
end
function CoreEnvironmentControllerManager:blurzone_flash_in(self, t, dt, camera_pos, blurzone)
	blurzone.opacity = blurzone.opacity - dt * 0.3

	if blurzone.opacity < 1 then
		blurzone.opacity = 1
		blurzone.update = self.blurzone_fade_idle
	end

	slot10 = camera_pos

	return blurzone.check(slot7, blurzone, blurzone) * (1 + 11 * (blurzone.opacity - 1))
end
function CoreEnvironmentControllerManager:blurzone_fade_in(self, t, dt, camera_pos, blurzone)
	blurzone.opacity = blurzone.opacity + dt

	if 1 < blurzone.opacity then
		blurzone.opacity = 1
		blurzone.update = self.blurzone_fade_idle
	end

	slot10 = camera_pos

	return blurzone.check(slot7, blurzone, blurzone)
end
function CoreEnvironmentControllerManager:blurzone_fade_out(self, t, dt, camera_pos, blurzone)
	blurzone.opacity = blurzone.opacity - dt

	if blurzone.opacity < 0 then
		blurzone.opacity = 0
		blurzone.mode = -1
		blurzone.update = self.blurzone_fade_idle
	end

	slot10 = camera_pos

	return blurzone.check(slot7, blurzone, blurzone)
end
function CoreEnvironmentControllerManager:blurzone_fade_idle_line_of_sight(self, t, dt, camera_pos, blurzone)
	slot12 = 2000
	self._HE_blinding = self.test_line_of_sight(slot7, self, blurzone.pos, 150, 1000)
	slot10 = camera_pos

	return blurzone.check(slot7, blurzone, blurzone)
end
function CoreEnvironmentControllerManager:blurzone_fade_idle(self, t, dt, camera_pos, blurzone)
	slot10 = camera_pos

	return blurzone.check(slot7, blurzone, blurzone)
end
function CoreEnvironmentControllerManager:blurzone_fade_out_switch(self, t, dt, camera_pos, blurzone)
	slot10 = camera_pos

	return blurzone.check(slot7, blurzone, blurzone)
end
function CoreEnvironmentControllerManager:blurzone_check_cylinder(blurzone, camera_pos)
	local pos_z = blurzone.pos.z
	local cam_z = camera_pos.z
	local len = nil

	if cam_z < pos_z then
		slot8 = blurzone.pos - camera_pos
		len = blurzone.pos - camera_pos.length(slot7)
	elseif pos_z + blurzone.height < cam_z then
		slot9 = pos_z + blurzone.height
		slot8 = blurzone.pos.with_z(slot7, blurzone.pos) - camera_pos
		len = blurzone.pos.with_z(slot7, blurzone.pos) - camera_pos.length(slot7)
	else
		slot9 = cam_z
		slot8 = blurzone.pos.with_z(slot7, blurzone.pos) - camera_pos
		len = blurzone.pos.with_z(slot7, blurzone.pos) - camera_pos.length(slot7)
	end

	slot9 = 1
	local result = math.min(slot7, len / blurzone.radius)
	result = result * result

	return (1 - result) * blurzone.opacity
end
function CoreEnvironmentControllerManager:blurzone_check_sphere(blurzone, camera_pos)
	local len = blurzone.pos - camera_pos.length(slot4)
	slot7 = 1
	local result = math.min(blurzone.pos - camera_pos, len / blurzone.radius)
	result = result * result

	return (1 - result) * blurzone.opacity
end
local ids_dof_near_plane = Idstring(function (self, blurzone, camera_pos)
	local len = blurzone.pos - camera_pos.length(slot4)
	slot7 = 1
	local result = math.min(blurzone.pos - camera_pos, len / blurzone.radius)
	result = result * result

	return (1 - result) * blurzone.opacity
end)
local ids_dof_far_plane = Idstring("near_plane")
local ids_dof_settings = Idstring("far_plane")
local ids_radial_pos = Idstring("settings")
local ids_radial_offset = Idstring("radial_pos")
local ids_tgl_r = Idstring("radial_offset")
local hit_feedback_rlu = Idstring("tgl_r")
local hit_feedback_d = Idstring("hit_feedback_rlu")
local ids_dof_prepare_post_processor = Idstring("hit_feedback_d")
slot12 = "post_DOF"
local ids_post_DOF = Idstring("dof_prepare_post_processor")
local mvec1 = Vector3()
local mvec2 = Vector3()
local new_cam_fwd = Vector3()
local new_cam_up = Vector3()
local new_cam_right = Vector3()
local ids_LUT_post = Idstring(slot17)
local ids_LUT_settings = Idstring("color_grading_post")
local ids_LUT_params = Idstring("lut_settings")
local ids_low_health_params = Idstring("LUT_settings")
local ids_LUT_contrast = Idstring("low_health_settings")
local ids_lens_distortion_post = Idstring("contrast")
local ids_lens_distortion_settings = Idstring("lens_distortion")
slot25 = "distortion_power"
local ids_lens_distortion_power = Idstring("lens_distortion_mod")
function CoreEnvironmentControllerManager:set_lut_lerp_value(lut_lerp_value)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	self._lut_lerp_value = lut_lerp_value

	return 
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:set_post_composite(t, dt)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot5 = managers.viewport
	local vp = managers.viewport.first_active_viewport(slot4)

	if not vp then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-8, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 9-11, warpins: 2 ---
	if self._occ_dirty then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-17, warpins: 1 ---
		self._occ_dirty = false
		slot7 = vp

		self._refresh_occ_params(slot5, self)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 18-20, warpins: 2 ---
	if self._vp ~= vp then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 21-30, warpins: 1 ---
		slot6 = vp
		slot8 = ids_dof_prepare_post_processor
		local dof_prepare_post_processor = vp.vp(slot5).get_post_processor_effect(slot5, vp.vp(slot5), "World")

		if dof_prepare_post_processor then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 31-36, warpins: 1 ---
			slot8 = ids_post_DOF
			local post_composite = dof_prepare_post_processor.modifier(slot6, dof_prepare_post_processor)

			if not post_composite then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 37-37, warpins: 1 ---
				return 
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 38-44, warpins: 2 ---
			slot8 = post_composite
			self._material = post_composite.material(slot7)

			if not self._material then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 45-45, warpins: 1 ---
				return 
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 46-49, warpins: 2 ---
			self._vp = vp
			slot8 = self

			self._update_post_process_effects(slot7)
			--- END OF BLOCK #2 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 50-55, warpins: 3 ---
	slot6 = vp
	local camera = vp.camera(slot5)

	if self._old_vp ~= vp then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 56-58, warpins: 1 ---
		self._occ_dirty = true
		self._old_vp = vp
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 59-70, warpins: 2 ---
	slot9 = dt
	slot12 = camera
	local blur_zone_val = self._blurzones_update(slot6, self, t, camera.position(slot11))

	if 0 < self._hit_some then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 71-120, warpins: 1 ---
		local hit_fade = dt * 1.5
		slot10 = 0
		self._hit_some = math.max(slot8, self._hit_some - hit_fade)
		slot10 = 0
		self._hit_right = math.max(slot8, self._hit_right - hit_fade)
		slot10 = 0
		self._hit_left = math.max(slot8, self._hit_left - hit_fade)
		slot10 = 0
		self._hit_up = math.max(slot8, self._hit_up - hit_fade)
		slot10 = 0
		self._hit_down = math.max(slot8, self._hit_down - hit_fade)
		slot10 = 0
		self._hit_front = math.max(slot8, self._hit_front - hit_fade)
		slot10 = 0
		self._hit_back = math.max(slot8, self._hit_back - hit_fade)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 121-125, warpins: 2 ---
	local downed_value = self._downed_value / 100

	if self._custom_dof_settings then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 126-132, warpins: 1 ---
		slot11 = self._custom_dof_settings

		self._material.set_variable(slot8, self._material, ids_dof_settings)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 133-155, warpins: 1 ---
		slot10 = ids_dof_settings
		slot16 = 1
		slot17 = 1
		slot15 = 1 + downed_value * 3

		self._material.set_variable(slot8, self._material, Vector3(slot12, math.min(slot14, self._hit_some * 10) + blur_zone_val * 0.4, math.min(self._hit_some * 10, blur_zone_val + downed_value * 2)))
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 156-199, warpins: 2 ---
	slot10 = ids_radial_offset
	slot15 = self._hit_front - self._hit_back + blur_zone_val * 0.1

	self._material.set_variable(slot8, self._material, Vector3(slot12, (self._hit_left - self._hit_right) * 0.2, (self._hit_up - self._hit_down) * 0.2))

	slot11 = self._base_contrast + self._hit_some * 0.25

	self._material.set_variable(slot8, self._material, ids_LUT_contrast)

	slot11 = dt

	self._update_dof(slot8, self, t)

	slot9 = vp
	slot11 = ids_lens_distortion_post
	local lens_distortion_post = vp.vp(slot8).get_post_processor_effect(slot8, vp.vp(slot8), "World")

	if lens_distortion_post then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 200-205, warpins: 1 ---
		slot11 = ids_lens_distortion_settings
		local lens_distortion_modifier = lens_distortion_post.modifier(slot9, lens_distortion_post)

		if lens_distortion_modifier then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 206-210, warpins: 1 ---
			slot11 = lens_distortion_modifier
			local lens_distortion_modifier_material = lens_distortion_modifier.material(slot10)

			if lens_distortion_modifier_material then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 211-215, warpins: 1 ---
				slot14 = self._lens_distortion

				lens_distortion_modifier_material.set_variable(slot11, lens_distortion_modifier_material, ids_lens_distortion_power)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #6 ---

	FLOW; TARGET BLOCK #7



	-- Decompilation error in this vicinity:
	--- BLOCK #7 216-225, warpins: 4 ---
	slot10 = vp
	slot12 = ids_LUT_post
	local lut_post = vp.vp(slot9).get_post_processor_effect(slot9, vp.vp(slot9), "World")

	if lut_post then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 226-231, warpins: 1 ---
		slot12 = ids_LUT_settings
		local lut_modifier = lut_post.modifier(slot10, lut_post)

		if lut_modifier then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 232-235, warpins: 1 ---
			slot12 = lut_modifier
			self._lut_modifier_material = lut_modifier.material(slot11)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #7 ---

	FLOW; TARGET BLOCK #8



	-- Decompilation error in this vicinity:
	--- BLOCK #8 236-238, warpins: 3 ---
	if not self._lut_modifier_material then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 239-239, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #8 ---

	FLOW; TARGET BLOCK #9



	-- Decompilation error in this vicinity:
	--- BLOCK #9 240-254, warpins: 2 ---
	local feedback_strength = 6
	slot14 = 1
	local health_diff = math.clamp(slot11, (self._old_health_effect_value - self._health_effect_value) * feedback_strength, 0)
	self._old_health_effect_value = self._health_effect_value

	if self._health_effect_value_diff < health_diff then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 255-255, warpins: 1 ---
		self._health_effect_value_diff = health_diff
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #9 ---

	FLOW; TARGET BLOCK #10



	-- Decompilation error in this vicinity:
	--- BLOCK #10 256-273, warpins: 2 ---
	slot14 = 0
	self._health_effect_value_diff = math.max(slot12, self._health_effect_value_diff - dt * 0.5)
	slot15 = 1
	local damage_feedback = math.clamp(slot12, self._health_effect_value_diff, 0)
	local last_life = 0

	if self._last_life then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 274-284, warpins: 1 ---
		local hurt_mod = 1 - self._health_effect_value
		slot18 = 1
		last_life = math.clamp(slot15, (hurt_mod - 0.5) * 2, 0) * self._last_life_mod
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #10 ---

	FLOW; TARGET BLOCK #11



	-- Decompilation error in this vicinity:
	--- BLOCK #11 285-302, warpins: 2 ---
	local low_health_effect = 0
	slot18 = t * CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_PULSE_FREQ
	local low_health_effect_power = CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_POWER + CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_PULSE_AMPLITUDE * math.sin(slot17)

	if self._health_effect_value < CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_END then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 303-304, warpins: 1 ---
		low_health_effect = 1
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 305-309, warpins: 1 ---
		if CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_START < self._health_effect_value then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 310-311, warpins: 1 ---
			low_health_effect = 0
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 312-325, warpins: 1 ---
			local fraction = (self._health_effect_value - CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_END) / CoreEnvironmentControllerManager.LOW_HEALTH_EFFECT_INTERVAL
			slot20 = fraction
			low_health_effect = 1 - math.lerp(slot17, 0, 1)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #11 ---

	FLOW; TARGET BLOCK #12



	-- Decompilation error in this vicinity:
	--- BLOCK #12 326-346, warpins: 3 ---
	slot18 = ids_LUT_params
	slot23 = self._lut_lerp_value

	self._lut_modifier_material.set_variable(slot16, self._lut_modifier_material, Vector3(slot20, damage_feedback, last_life))

	slot18 = ids_low_health_params
	slot23 = self._vignette

	self._lut_modifier_material.set_variable(slot16, self._lut_modifier_material, Vector3(slot20, low_health_effect, low_health_effect_power))

	return 
	--- END OF BLOCK #12 ---



end
function CoreEnvironmentControllerManager:_update_post_process_effects()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-77, warpins: 1 ---
	slot3 = self
	slot7 = "vls_setting"

	self.set_volumetric_light_scatter_setting(slot2, managers.user.get_setting(slot5, managers.user))

	slot3 = self
	slot7 = "motion_blur_setting"

	self.set_motion_blur_setting(slot2, managers.user.get_setting(slot5, managers.user))

	slot3 = self
	slot7 = "ssao_setting"

	self.set_ssao_setting(slot2, managers.user.get_setting(slot5, managers.user))

	slot3 = self
	slot7 = "AA_setting"

	self.set_AA_setting(slot2, managers.user.get_setting(slot5, managers.user))

	slot3 = self
	slot7 = "colorblind_setting"

	self.set_colorblind_mode(slot2, managers.user.get_setting(slot5, managers.user))

	slot3 = self
	slot7 = "use_parallax"

	self.set_parallax_setting(slot2, managers.user.get_setting(slot5, managers.user))

	slot3 = self._vp
	slot5 = Idstring(managers.user)
	slot8 = "colorgrade"

	self._vp.vp(slot2).set_post_processor_effect(slot2, self._vp.vp(slot2), "World", Idstring("color_grading_post"))

	slot3 = managers.viewport
	slot3 = managers.viewport.first_active_viewport(slot2)

	managers.viewport.first_active_viewport(slot2).set_force_feeder_update(slot2)

	return 
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:_create_dof_tweak_data()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-45, warpins: 1 ---
	local new_dof_settings = {}
	new_dof_settings.none = {
		use_no_dof = true
	}
	new_dof_settings.standard = {}
	new_dof_settings.standard.steelsight = {}
	new_dof_settings.standard.steelsight.near_plane_x = 2500
	new_dof_settings.standard.steelsight.near_plane_y = 2500
	new_dof_settings.standard.steelsight.far_plane_x = 500
	new_dof_settings.standard.steelsight.far_plane_y = 2000
	new_dof_settings.standard.other = {}
	new_dof_settings.standard.other.near_plane_x = 10
	new_dof_settings.standard.other.near_plane_y = 12
	new_dof_settings.standard.other.far_plane_x = 4000
	new_dof_settings.standard.other.far_plane_y = 5000
	self._dof_tweaks = new_dof_settings

	return 
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:set_AA_setting(setting)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot4 = managers.viewport
	local vp = managers.viewport.first_active_viewport(slot3)

	if vp then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-9, warpins: 1 ---
		if setting == "FXAA" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 10-23, warpins: 1 ---
			slot5 = vp
			slot7 = Idstring(slot8)
			slot10 = "AA_fxaa"

			vp.vp(slot4).set_post_processor_effect(slot4, vp.vp(slot4), "World", Idstring("AA_post_processor"))
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 24-25, warpins: 1 ---
			if setting == "SMAA" then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 26-39, warpins: 1 ---
				slot5 = vp
				slot7 = Idstring(slot8)
				slot10 = "AA_smaa_x1"

				vp.vp(slot4).set_post_processor_effect(slot4, vp.vp(slot4), "World", Idstring("AA_post_processor"))
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 40-52, warpins: 1 ---
				slot5 = vp
				slot7 = Idstring(slot8)
				slot10 = "empty"

				vp.vp(slot4).set_post_processor_effect(slot4, vp.vp(slot4), "World", Idstring("AA_post_processor"))
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 53-53, warpins: 4 ---
	return 
	--- END OF BLOCK #1 ---



end
function CoreEnvironmentControllerManager:set_parallax_setting(setting)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	slot4 = Application
	local global_material = Application.global_material(slot3)

	if global_material then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 7-13, warpins: 1 ---
		slot8 = "use_parallax"
		slot7 = (setting and 1) or 0

		global_material.set_variable(slot4, global_material, Idstring(slot7))
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 17-17, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 18-18, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
function CoreEnvironmentControllerManager:set_dof_setting(setting)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	if not self._dof_tweaks[setting] then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-11, warpins: 1 ---
		slot6 = setting

		Application.error(slot3, Application, "[CoreEnvironmentControllerManager:set_dof_setting] DOF setting do not exist!")

		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 12-15, warpins: 2 ---
	self._current_dof_setting = setting

	if self._material then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 16-20, warpins: 1 ---
		slot6 = 1

		self._update_dof(slot3, self, 1)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 21-21, warpins: 2 ---
	return 
	--- END OF BLOCK #2 ---



end
function CoreEnvironmentControllerManager:set_colorblind_mode(setting)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot4 = managers.viewport
	local vp = managers.viewport.first_active_viewport(slot3)

	if vp then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-21, warpins: 1 ---
		slot6 = "World"
		slot9 = "colorblind_correction_post"
		local cb_correction = vp.vp(slot4).get_post_processor_effect(slot4, vp.vp(slot4), Idstring(slot8))
		slot7 = setting ~= "off"

		cb_correction.set_visibility(vp, cb_correction)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 25-25, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 26-33, warpins: 2 ---
	slot5 = World
	slot8 = setting

	World.set_colorblind_mode(slot4, Idstring(slot7))

	return 
	--- END OF BLOCK #1 ---



end
function CoreEnvironmentControllerManager:set_ssao_setting(setting)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot4 = managers.viewport
	local vp = managers.viewport.first_active_viewport(slot3)

	if vp then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-20, warpins: 1 ---
		slot5 = vp
		slot6 = "World"
		slot9 = "SSAO_post_processor"
		local SSAO_processor = vp.vp(slot4).get_post_processor_effect(slot4, vp.vp(slot4), Idstring(slot8))
		local ssao_intensity = 0

		if SSAO_processor then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 21-36, warpins: 1 ---
			local SSAO_combiner = SSAO_processor.modifier(slot6, Idstring(slot9))
			slot8 = SSAO_combiner
			slot8 = SSAO_combiner.material(SSAO_processor)
			slot11 = "ssao_intensity"
			ssao_intensity = SSAO_combiner.material(SSAO_processor).get_variable(SSAO_processor, Idstring("apply_SSAO"))
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 37-38, warpins: 2 ---
		visibility = setting == "standard" and 0.001 < ssao_intensity

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 45-46, warpins: 2 ---
		if SSAO_processor then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 47-50, warpins: 1 ---
			slot9 = visibility

			SSAO_processor.set_visibility(slot7, SSAO_processor)
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #2 ---

		FLOW; TARGET BLOCK #3



		-- Decompilation error in this vicinity:
		--- BLOCK #3 51-62, warpins: 2 ---
		slot8 = vp
		slot9 = "World"
		slot12 = "SSAO_mask_post_processor"
		local SSAO_mask = vp.vp(slot7).get_post_processor_effect(slot7, vp.vp(slot7), Idstring(slot11))

		if SSAO_mask then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 63-66, warpins: 1 ---
			slot10 = visibility

			SSAO_mask.set_visibility(slot8, SSAO_mask)
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #3 ---

		FLOW; TARGET BLOCK #4



		-- Decompilation error in this vicinity:
		--- BLOCK #4 67-78, warpins: 2 ---
		slot9 = vp
		slot10 = "World"
		slot13 = "deferred"
		local deferred_processor = vp.vp(slot8).get_post_processor_effect(slot8, vp.vp(slot8), Idstring(slot12))

		if deferred_processor then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 79-86, warpins: 1 ---
			slot10 = deferred_processor
			slot13 = "apply_ambient"
			local apply_ambient = deferred_processor.modifier(slot9, Idstring(slot12))

			if apply_ambient then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 87-96, warpins: 1 ---
				slot11 = apply_ambient
				slot14 = "use_ssao"
				slot13 = (visibility and 1) or 0

				apply_ambient.material(slot10).set_variable(slot10, apply_ambient.material(slot10), Idstring(slot13))
				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 100-100, warpins: 2 ---
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #4 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 101-101, warpins: 4 ---
	return 
	--- END OF BLOCK #1 ---



end
function CoreEnvironmentControllerManager:set_motion_blur_setting(setting)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot4 = managers.viewport
	local vp = managers.viewport.first_active_viewport(slot3)

	if vp then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-19, warpins: 1 ---
		slot5 = vp
		slot6 = "World"
		slot9 = "post_motion_blur"
		local motion_blur_processor = vp.vp(slot4).get_post_processor_effect(slot4, vp.vp(slot4), Idstring(slot8))

		if motion_blur_processor then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 20-23, warpins: 1 ---
			slot7 = setting == "standard"

			motion_blur_processor.set_visibility(slot5, motion_blur_processor)
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 27-27, warpins: 2 ---
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 28-28, warpins: 3 ---
	return 
	--- END OF BLOCK #1 ---



end
function CoreEnvironmentControllerManager:set_volumetric_light_scatter_setting(setting)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot4 = managers.viewport
	local vp = managers.viewport.first_active_viewport(slot3)

	if vp then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-19, warpins: 1 ---
		slot5 = vp
		slot6 = "World"
		slot9 = "volumetric_light_scatter"
		local vls_processor = vp.vp(slot4).get_post_processor_effect(slot4, vp.vp(slot4), Idstring(slot8))

		if vls_processor then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 20-27, warpins: 1 ---
			slot6 = vls_processor
			slot9 = "post_volumetric_light_scatter"
			local vls_combiner = vls_processor.modifier(slot5, Idstring(slot8))

			if vls_combiner then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 28-38, warpins: 1 ---
				slot7 = vls_combiner
				slot7 = vls_combiner.material(slot6)
				slot10 = "light_scatter_exposure"
				local exposure_value = vls_combiner.material(slot6).get_variable(slot6, Idstring(slot9))
				local visibility = setting == "standard" and 0.001 < exposure_value
				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 45-48, warpins: 2 ---
				slot10 = visibility

				vls_processor.set_visibility(slot8, vls_processor)
				--- END OF BLOCK #1 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 49-49, warpins: 4 ---
	return 
	--- END OF BLOCK #1 ---



end
function CoreEnvironmentControllerManager:remove_dof_tweak_data(remove_setting_name)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	if not self._dof_tweaks[new_setting_name] then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 6-12, warpins: 1 ---
		slot6 = remove_setting_name

		Application.error(slot3, Application, "[CoreEnvironmentControllerManager:remove_dof_tweak_data] DOF setting do not exist!")

		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 13-18, warpins: 2 ---
	self._dof_tweaks[remove_setting_name] = nil

	if self._current_dof_setting == remove_setting_name then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 19-22, warpins: 1 ---
		if self._dof_tweaks.standard then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 23-25, warpins: 1 ---
			self._current_dof_setting = "standard"
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 26-29, warpins: 1 ---
			slot4 = self._dof_tweaks
			self._current_dof_setting = next(slot3)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 30-30, warpins: 3 ---
	return 
	--- END OF BLOCK #2 ---



end
function CoreEnvironmentControllerManager:add_dof_tweak_data(new_setting_name, new_setting_tweak_data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	if self._dof_tweaks[new_setting_name] then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-11, warpins: 1 ---
		slot7 = new_setting_name

		Application.error(slot4, Application, "[CoreEnvironmentControllerManager:add_dof_tweak_data] DOF setting already exists!")

		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 12-14, warpins: 2 ---
	self._dof_tweaks[new_setting_name] = new_setting_tweak_data

	return 
	--- END OF BLOCK #1 ---



end
function CoreEnvironmentControllerManager:_update_dof(t, dt)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	local mvec_set = mvector3.set_static
	local mvec = mvec1

	if self._dof_override then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 7-9, warpins: 1 ---
		if self._dof_override_transition_params then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 10-64, warpins: 1 ---
			local params = self._dof_override_transition_params
			slot9 = params.time - dt
			params.time = math.max(slot7, 0)
			slot9 = 1 - params.time / params.total_t
			local lerp_v = math.bezier(slot7, {
				0,
				0,
				1,
				1
			})
			slot11 = lerp_v
			self._dof_override_near = math.lerp(, params.start.near, params.stop.near)
			slot11 = lerp_v
			self._dof_override_near_pad = math.lerp(, params.start.near_pad, params.stop.near_pad)
			slot11 = lerp_v
			self._dof_override_far = math.lerp(, params.start.far, params.stop.far)
			slot11 = lerp_v
			self._dof_override_far_pad = math.lerp(, params.start.far_pad, params.stop.far_pad)

			if params.time == 0 then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 65-66, warpins: 1 ---
				self._dof_override_transition_params = nil
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 67-95, warpins: 3 ---
		slot10 = 0

		mvec_set(slot6, mvec, self._dof_override_near, self._dof_override_near + self._dof_override_near_pad)

		slot9 = mvec

		self._material.set_variable(slot6, self._material, ids_dof_near_plane)

		slot10 = 1

		mvec_set(slot6, mvec, self._dof_override_far - self._dof_override_far_pad, self._dof_override_far)

		slot9 = mvec

		self._material.set_variable(slot6, self._material, ids_dof_far_plane)
		--- END OF BLOCK #1 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 96-101, warpins: 1 ---
		local dof_settings = self._dof_tweaks[self._current_dof_setting]

		if dof_settings.use_no_dof == true then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 102-126, warpins: 1 ---
			slot11 = 0

			mvec_set(slot7, mvec, 0, 0)

			slot10 = mvec

			self._material.set_variable(slot7, self._material, ids_dof_near_plane)

			slot11 = 1

			mvec_set(slot7, mvec, 10000, 10000)

			slot10 = mvec

			self._material.set_variable(slot7, self._material, ids_dof_far_plane)
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 127-129, warpins: 1 ---
			if self._in_steelsight then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 130-198, warpins: 1 ---
				dof_settings = dof_settings.steelsight
				slot10 = 1
				local dof_plane_v = math.clamp(slot7, self._current_dof_distance / 5000, 0)
				slot11 = dof_plane_v
				self._near_plane_x = math.lerp(self._current_dof_distance / 5000, 500, dof_settings.near_plane_x)
				slot11 = dof_plane_v
				self._near_plane_y = math.lerp(self._current_dof_distance / 5000, 20, dof_settings.near_plane_y)
				slot11 = dof_plane_v
				self._far_plane_x = math.lerp(self._current_dof_distance / 5000, 100, dof_settings.far_plane_x)
				self._far_plane_y = math.lerp(self._current_dof_distance / 5000, 500, dof_settings.far_plane_y)
				slot13 = 5
				slot12 = 0

				mvec_set(self._current_dof_distance / 5000, mvec, math.max(dof_plane_v, self._current_dof_distance - self._near_plane_x), self._near_plane_y)

				slot11 = mvec

				self._material.set_variable(self._current_dof_distance / 5000, self._material, ids_dof_near_plane)

				slot12 = 1

				mvec_set(self._current_dof_distance / 5000, mvec, self._current_dof_distance + self._far_plane_x, self._far_plane_y)

				slot11 = mvec

				self._material.set_variable(self._current_dof_distance / 5000, self._material, ids_dof_far_plane)
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 199-256, warpins: 1 ---
				dof_settings = dof_settings.other
				slot9 = 1
				local dof_speed = math.min(slot7, 10 * dt)
				slot11 = dof_speed
				self._near_plane_x = math.lerp(10 * dt, self._near_plane_x, dof_settings.near_plane_x)
				slot11 = dof_speed
				self._near_plane_y = math.lerp(10 * dt, self._near_plane_y, dof_settings.near_plane_y)
				slot11 = dof_speed
				self._far_plane_x = math.lerp(10 * dt, self._far_plane_x, dof_settings.far_plane_x)
				slot11 = dof_speed
				self._far_plane_y = math.lerp(10 * dt, self._far_plane_y, dof_settings.far_plane_y)
				slot12 = 0

				mvec_set(10 * dt, mvec, self._near_plane_x, self._near_plane_y)

				slot11 = mvec

				self._material.set_variable(10 * dt, self._material, ids_dof_near_plane)

				slot12 = 1

				mvec_set(10 * dt, mvec, self._far_plane_x, self._far_plane_y)

				slot11 = mvec

				self._material.set_variable(10 * dt, self._material, ids_dof_far_plane)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 257-257, warpins: 4 ---
	return 
	--- END OF BLOCK #1 ---



end
function CoreEnvironmentControllerManager:set_flashbang(flashbang_pos, line_of_sight, travel_dis, linear_dis, duration)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-12, warpins: 1 ---
	slot12 = 3000
	local flash = self.test_line_of_sight(slot7, self, flashbang_pos + flashbang_test_offset, 200, 1000)
	self._flashbang_duration = duration

	if 0 < flash then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 13-30, warpins: 1 ---
		slot10 = 1.5
		self._current_flashbang = math.min(slot8, self._current_flashbang + flash) * self._flashbang_duration
		slot10 = 1.5
		self._current_flashbang_flash = math.min(self._flashbang_duration, self._current_flashbang_flash + flash) * self._flashbang_duration
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 31-50, warpins: 2 ---
	slot9 = World
	slot10 = {
		effect = Idstring(slot12),
		position = flashbang_pos,
		normal = Vector3(slot12, 0, 0)
	}
	slot13 = "effects/vanilla/explosions/exp_projectile_001"
	slot15 = 1

	World.effect_manager(slot8).spawn(slot8, World.effect_manager(slot8))

	return 
	--- END OF BLOCK #1 ---



end
function CoreEnvironmentControllerManager:set_flashbang_multiplier(multiplier)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	self._flashbang_multiplier = (multiplier ~= 0 and multiplier) or 1
	self._flashbang_multiplier = 1 + (1 - self._flashbang_multiplier) * 2

	return 
	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 6-12, warpins: 2 ---
	--- END OF BLOCK #1 ---



end
function CoreEnvironmentControllerManager:test_line_of_sight(test_pos, min_distance, dot_distance, max_distance)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-13, warpins: 1 ---
	local tmp_vec1 = Vector3()
	local tmp_vec2 = Vector3()
	local tmp_vec3 = Vector3()
	slot10 = managers.viewport
	local vp = managers.viewport.first_active_viewport(slot9)

	if not vp then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 14-15, warpins: 1 ---
		return 0
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 16-32, warpins: 2 ---
	slot11 = vp
	local camera = vp.camera(slot10)
	local cam_pos = tmp_vec1
	slot14 = cam_pos

	camera.m_position(slot12, camera)

	local test_vec = tmp_vec2
	slot16 = test_pos
	local dis = mvector3.direction(camera, test_vec, cam_pos)

	if max_distance < dis then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 33-34, warpins: 1 ---
		return 0
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 35-36, warpins: 2 ---
	if dis < min_distance then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 37-38, warpins: 1 ---
		return 1
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 39-59, warpins: 2 ---
	local dot_mul = 1
	local max_dot = math.cos(slot15)
	local cam_rot = camera.rotation(75)
	slot18 = camera
	local cam_fwd = camera.rotation(camera).y(camera)
	slot20 = test_vec

	if mvector3.dot(camera.rotation(camera), cam_fwd) < max_dot then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 60-61, warpins: 1 ---
		if dis < dot_distance then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 62-63, warpins: 1 ---
			dot_mul = 0.5
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 64-65, warpins: 1 ---
			return 0
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 66-84, warpins: 3 ---
	slot27 = "AI_visibility"
	slot27 = "report"
	local ray_hit = World.raycast(slot18, World, "ray", cam_pos, test_pos, "slot_mask", managers.slot.get_mask(slot25, managers.slot), "ray_type", "ai_vision")

	if ray_hit then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 85-86, warpins: 1 ---
		return 0
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 87-96, warpins: 2 ---
	slot21 = 0
	local flash = math.max(slot19, dis - min_distance) / (max_distance - min_distance)
	flash = (1 - flash) * dot_mul

	return flash
	--- END OF BLOCK #5 ---



end
function CoreEnvironmentControllerManager:set_dof_override(mode)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	self._dof_override = mode

	return 
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:get_dof_override_ranges()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	return self._dof_override_near, self._dof_override_near_pad, self._dof_override_far, self._dof_override_far_pad
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:set_dof_override_ranges(near, near_pad, far, far_pad)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	self._dof_override_near = near
	self._dof_override_near_pad = near_pad
	self._dof_override_far = far
	self._dof_override_far_pad = far_pad

	return 
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:set_dof_override_ranges_transition(time, near, near_pad, far, far_pad)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-45, warpins: 1 ---
	slot9 = true

	self.set_dof_override(slot7, self)

	self._dof_override_transition_params = {}
	self._dof_override_transition_params.total_t = time
	self._dof_override_transition_params.time = time
	self._dof_override_transition_params.start = {}
	self._dof_override_transition_params.start.near = self._dof_override_near
	self._dof_override_transition_params.start.near_pad = self._dof_override_near_pad
	self._dof_override_transition_params.start.far = self._dof_override_far
	self._dof_override_transition_params.start.far_pad = self._dof_override_far_pad
	self._dof_override_transition_params.stop = {}
	self._dof_override_transition_params.stop.near = near
	self._dof_override_transition_params.stop.near_pad = near_pad
	self._dof_override_transition_params.stop.far = far
	self._dof_override_transition_params.stop.far_pad = far_pad

	return 
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:set_dome_occ_default()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-19, warpins: 1 ---
	local area = 20000
	local occ_texture = "core/textures/dome_occ_test"
	slot10 = 0
	slot11 = 1200
	slot8 = occ_texture

	self.set_dome_occ_params(slot4, self, Vector3(slot7, -(area * 0.5), -(area * 0.5)), Vector3(-(area * 0.5), area, area))

	return 
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:set_dome_occ_params(occ_pos, occ_size, occ_texture)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-17, warpins: 1 ---
	self._occ_dirty = true
	self._occ_pos = occ_pos
	slot8 = self._occ_pos.z
	self._occ_pos = Vector3(slot5, self._occ_pos.x, self._occ_pos.y - occ_size.y)
	self._occ_size = occ_size
	self._occ_texture = occ_texture

	return 
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:_refresh_occ_params(vp)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	slot2 = vp or self._vp
	slot4 = vp or self._vp
	slot5 = "World"
	slot8 = "deferred"
	local deferred_processor = vp or self._vp.vp(slot3).get_post_processor_effect(slot3, vp or self._vp.vp(slot3), Idstring(slot7))
	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #1 3-3, warpins: 1 ---
	slot2 = self._vp

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 4-15, warpins: 2 ---
	if deferred_processor then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 16-23, warpins: 1 ---
		slot5 = deferred_processor
		slot8 = "apply_ambient"
		local apply_ambient = deferred_processor.modifier(slot4, Idstring(slot7))

		if apply_ambient then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 24-28, warpins: 1 ---
			slot6 = apply_ambient
			local dome_occ_feed = apply_ambient.material(slot5)

			if dome_occ_feed then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 29-57, warpins: 1 ---
				slot10 = "dome_occ_pos"

				dome_occ_feed.set_variable(slot6, dome_occ_feed, Idstring(slot9))

				slot9 = self._occ_size

				dome_occ_feed.set_variable(slot6, dome_occ_feed, Idstring(self._occ_pos))

				slot13 = "normal"
				slot12 = 0

				Application.set_material_texture(slot6, Application, dome_occ_feed, Idstring("dome_occ_size"), Idstring("filter_color_texture"), Idstring(self._occ_texture))
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 58-65, warpins: 3 ---
		slot6 = deferred_processor
		slot9 = "move_global_occ"
		local shadow = deferred_processor.modifier(slot5, Idstring(slot8))

		if shadow then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 66-70, warpins: 1 ---
			slot7 = shadow
			local dome_occ_feed_ps3 = shadow.material(slot6)

			if dome_occ_feed_ps3 then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 71-85, warpins: 1 ---
				slot14 = "normal"
				slot13 = 0

				Application.set_material_texture(slot7, Application, dome_occ_feed_ps3, Idstring(slot11), Idstring("filter_color_texture"), Idstring(self._occ_texture))
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 86-86, warpins: 4 ---
	return 
	--- END OF BLOCK #3 ---



end
function CoreEnvironmentControllerManager:set_custom_dof_settings(custom_dof_settings)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	self._custom_dof_settings = custom_dof_settings

	return 
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:set_base_contrast(base_contrast)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	self._base_contrast = base_contrast

	return 
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:base_contrast()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	return self._base_contrast
	--- END OF BLOCK #0 ---



end
function CoreEnvironmentControllerManager:feed_param_underlay(material_name, param_name, param_value)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-15, warpins: 1 ---
	local material = Underlay.material(slot5, Idstring(slot8))
	slot10 = param_name
	slot9 = param_value

	material.set_variable(Underlay, material, Idstring(material_name))

	return 
	--- END OF BLOCK #0 ---



end

return 
