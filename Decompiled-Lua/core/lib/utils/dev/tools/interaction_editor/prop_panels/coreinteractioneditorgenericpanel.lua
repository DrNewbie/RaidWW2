-- Decompilation Error: _run_step(_unwarp_expressions, node)

-- Decompilation Error: _glue_flows(node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.

-- Decompilation error in this vicinity:
--- BLOCK #0 1-25, warpins: 1 ---
slot3 = "CoreInteractionEditorGenericPanel"

core.module(slot1, core)

slot3 = "CoreClass"

core.import(slot1, core)

slot3 = "CoreCode"

core.import(slot1, core)

slot3 = "CoreFloatSpinCtrl"

core.import(slot1, core)

NAME = "generic"
slot0 = InteractionEditorGenericPanel or CoreClass.class()
InteractionEditorGenericPanel = slot0
function InteractionEditorGenericPanel:init(parent, box, owner)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-65, warpins: 1 ---
	slot9 = "HSCROLL"
	self._scrolled_window = EWS.ScrolledWindow(slot5, EWS, parent, "")
	slot11 = 1
	slot12 = 1
	slot13 = 0
	slot10 = false

	self._scrolled_window.set_scrollbars(slot5, self._scrolled_window, Vector3("", 8, 8), Vector3(8, 1, 1), Vector3(1, 0, 0))

	slot10 = "EXPAND"

	box.add(slot5, box, self._scrolled_window, 1, 0)

	self._lua_widgets = {}
	self._events = {}
	self._owner = owner
	slot8 = "on_update_prop"
	self._update_prop_cb = callback(slot5, self, self)
	slot8 = "on_add_pat"
	self._add_pat_cb = callback(slot5, self, self)
	slot8 = "on_remove_pat"
	self._remove_pat_cb = callback(slot5, self, self)
	slot8 = "on_list_box_update"
	self._list_box_update_cb = callback(slot5, self, self)

	return 
	--- END OF BLOCK #0 ---



end
function InteractionEditorGenericPanel:window()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	return self._scrolled_window
	--- END OF BLOCK #0 ---



end
function InteractionEditorGenericPanel:set_visible(b, desc, node)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	if b then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 3-21, warpins: 1 ---
		slot6 = self

		self._disconnect_events(slot5)

		slot6 = self._scrolled_window

		self._scrolled_window.destroy_children(slot5)

		self._lua_widgets = {}
		self._events = {}
		slot8 = node

		self._build_ui(slot5, self, desc)

		slot6 = self

		self._connect_events(slot5)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 22-27, warpins: 2 ---
	slot7 = b

	self._scrolled_window.set_visible(slot5, self._scrolled_window)

	return 
	--- END OF BLOCK #1 ---



end
function InteractionEditorGenericPanel:_new_pattern_name()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-21, warpins: 1 ---
	slot12 = -1
	slot9 = true
	local name = EWS.get_text_from_user(slot2, EWS, self._scrolled_window, "New instance name:", "Instance", "", Vector3(true, -1, -1))
	slot5 = "[^%w_]"

	if string.find(EWS, name) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 22-22, warpins: 1 ---
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 22-22, warpins: 2 ---
	return name
	--- END OF BLOCK #1 ---



end
function InteractionEditorGenericPanel:_could_not_add_pat(name)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	slot4 = EWS
	slot2 = EWS.message_box
	slot5 = self._scrolled_window

	if not name or not ("Could not instance: " .. name) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-12, warpins: 2 ---
		slot6 = "Could not instance!"
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 13-21, warpins: 2 ---
	slot8 = "OK,ICON_ERROR"
	slot13 = -1

	slot2(slot3, slot4, slot5, slot6, "Instance", Vector3(slot10, -1, -1))

	return 
	--- END OF BLOCK #1 ---



end
function InteractionEditorGenericPanel:_disconnect_events()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot3 = self._events

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-12, warpins: 0 ---
	for _, v in ipairs(slot2) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-10, warpins: 1 ---
		slot10 = v.cb

		v.widget.disconnect(slot7, v.widget, v.t)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 11-12, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 13-13, warpins: 1 ---
	return 
	--- END OF BLOCK #2 ---



end
function InteractionEditorGenericPanel:_connect_events()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot3 = self._events

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-13, warpins: 0 ---
	for _, v in ipairs(slot2) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-11, warpins: 1 ---
		slot11 = v

		v.widget.connect(slot7, v.widget, v.t, v.cb)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 12-13, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 14-14, warpins: 1 ---
	return 
	--- END OF BLOCK #2 ---



end
function InteractionEditorGenericPanel:_build_ui(desc, node)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-14, warpins: 1 ---
	slot6 = "VERTICAL"
	self._prop_box = EWS.BoxSizer(slot4, EWS)
	slot6 = node
	local properties = desc.node_properties(slot4, desc)

	if 0 < #properties then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 15-25, warpins: 1 ---
		slot9 = "Properties"
		local static_prop_box = EWS.StaticBoxSizer(slot5, EWS, self._scrolled_window, "VERTICAL")
		slot7 = properties

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 26-309, warpins: 0 ---
		for _, prop in ipairs(EWS) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 26-45, warpins: 1 ---
			slot14 = prop
			local prop_type = desc.property_type(slot11, desc, node)
			slot15 = prop
			local prop_value = desc.property_value(desc, desc, node)
			slot17 = prop
			local box = EWS.StaticBoxSizer(desc, EWS, self._scrolled_window, "VERTICAL")
			local widget = nil

			if prop_type == "number" then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 46-84, warpins: 1 ---
				slot21 = prop_value
				local w = CoreFloatSpinCtrl.FloatSpinCtrl.new(slot15, CoreFloatSpinCtrl.FloatSpinCtrl, self._scrolled_window, 0, 1, 0.05)
				local d = {
					t = "EVT_FLOAT_SPIN_CTRL_UPDATED"
				}
				d.widget = w
				d.cb = self._update_prop_cb
				d.dtype = prop_type
				d.desc = desc
				d.node = node
				d.prop = prop
				slot21 = d

				w.connect(self._scrolled_window, w, d.t, d.cb)

				slot19 = d

				table.insert(self._scrolled_window, self._events)

				slot19 = w

				table.insert(self._scrolled_window, self._lua_widgets)

				slot18 = w
				widget = w.window(self._scrolled_window)
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 85-86, warpins: 1 ---
				if prop_type == "vector3" then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 87-137, warpins: 1 ---
					slot22 = 0
					slot23 = 1
					slot24 = 0.05
					slot21 = prop_value
					local w = CoreVector3SpinCtrl.FloatVector3Ctrl.new(slot15, CoreVector3SpinCtrl.FloatVector3Ctrl, self._scrolled_window, Vector3(slot19, 0, 0), Vector3(0, 1, 1), Vector3(1, 0.05, 0.05))
					local d = {
						t = "EVT_VECTOR3_SPIN_CTRL_UPDATED"
					}
					d.widget = w
					d.cb = self._update_prop_cb
					d.dtype = prop_type
					d.desc = desc
					d.node = node
					d.prop = prop
					slot21 = d

					w.connect(self._scrolled_window, w, d.t, d.cb)

					slot19 = d

					table.insert(self._scrolled_window, self._events)

					slot19 = w

					table.insert(self._scrolled_window, self._lua_widgets)

					slot18 = w
					widget = w.window(self._scrolled_window)
					--- END OF BLOCK #0 ---



				else

					-- Decompilation error in this vicinity:
					--- BLOCK #0 138-139, warpins: 1 ---
					if prop_type == "boolean" then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 140-172, warpins: 1 ---
						slot20 = ""
						widget = EWS.CheckBox(slot15, EWS, self._scrolled_window, "", "")
						slot17 = prop_value

						widget.set_value(slot15, widget)

						local d = {
							t = "EVT_COMMAND_CHECKBOX_CLICKED"
						}
						d.widget = widget
						d.cb = self._update_prop_cb
						d.dtype = prop_type
						d.desc = desc
						d.node = node
						d.prop = prop
						slot20 = d

						widget.connect(widget, widget, d.t, d.cb)

						slot18 = d.t

						table.insert(widget, self._events)
						--- END OF BLOCK #0 ---



					else

						-- Decompilation error in this vicinity:
						--- BLOCK #0 173-174, warpins: 1 ---
						if prop_type == "string" then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 175-225, warpins: 1 ---
							slot20 = prop_value
							slot20 = ""
							widget = EWS.TextCtrl(slot15, EWS, self._scrolled_window, prop_value.s(slot19), "")
							local d = {
								t = "EVT_COMMAND_TEXT_ENTER"
							}
							d.widget = widget
							d.cb = self._update_prop_cb
							d.dtype = prop_type
							d.desc = desc
							d.node = node
							d.prop = prop
							slot20 = d

							widget.connect(EWS, widget, d.t, d.cb)

							slot18 = d

							table.insert(EWS, self._events)

							d = {
								t = "EVT_KILL_FOCUS",
								widget = widget,
								cb = self._update_prop_cb,
								dtype = prop_type,
								desc = desc,
								node = node,
								prop = prop
							}
							slot20 = d

							widget.connect(self._update_prop_cb, widget, d.t, d.cb)

							slot18 = d

							table.insert(self._update_prop_cb, self._events)
							--- END OF BLOCK #0 ---



						else

							-- Decompilation error in this vicinity:
							--- BLOCK #0 226-227, warpins: 1 ---
							if prop_type == "event" then

								-- Decompilation error in this vicinity:
								--- BLOCK #0 228-243, warpins: 1 ---
								slot20 = prop_value
								slot20 = ""
								widget = EWS.TextCtrl(slot15, EWS, self._scrolled_window, tostring(slot19), "")
								slot17 = false

								widget.set_enabled(slot15, widget)
								--- END OF BLOCK #0 ---



							else

								-- Decompilation error in this vicinity:
								--- BLOCK #0 244-293, warpins: 1 ---
								slot20 = prop_value
								slot20 = ""
								widget = EWS.TextCtrl(slot15, EWS, self._scrolled_window, tostring(slot19), "")
								local d = {
									t = "EVT_COMMAND_TEXT_ENTER"
								}
								d.widget = widget
								d.cb = self._update_prop_cb
								d.dtype = prop_type
								d.desc = desc
								d.node = node
								d.prop = prop
								slot20 = d

								widget.connect(EWS, widget, d.t, d.cb)

								slot18 = d

								table.insert(EWS, self._events)

								d = {
									t = "EVT_KILL_FOCUS",
									widget = widget,
									cb = self._update_prop_cb,
									dtype = prop_type,
									desc = desc,
									node = node,
									prop = prop
								}
								slot20 = d

								widget.connect(self._update_prop_cb, widget, d.t, d.cb)

								slot18 = d

								table.insert(self._update_prop_cb, self._events)
								--- END OF BLOCK #0 ---



							end
							--- END OF BLOCK #0 ---



						end
						--- END OF BLOCK #0 ---



					end
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 294-307, warpins: 6 ---
			slot20 = "EXPAND"

			box.add(slot15, box, widget, 0, 0)

			slot20 = "EXPAND,ALL"

			static_prop_box.add(slot15, static_prop_box, box, 0, 2)
			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 308-309, warpins: 2 ---
			--- END OF BLOCK #2 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 310-317, warpins: 1 ---
		slot11 = "EXPAND,ALL"

		self._prop_box.add(slot6, self._prop_box, static_prop_box, 0, 2)
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 318-325, warpins: 2 ---
	slot7 = node
	local patterns = desc.node_patterns(slot5, desc)

	if 0 < #patterns then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 326-391, warpins: 1 ---
		slot10 = "Patterns"
		local static_patterns_box = EWS.StaticBoxSizer(slot6, EWS, self._scrolled_window, "VERTICAL")
		slot9 = "HORIZONTAL"
		local cb_box = EWS.BoxSizer(EWS, EWS)
		slot13 = "CB_SORT,CB_READONLY"
		local combo_box = EWS.ComboBox(EWS, EWS, self._scrolled_window, "", "")
		slot14 = ""
		local add_btn = EWS.Button(EWS, EWS, self._scrolled_window, "Add", "")
		slot14 = ""
		local list_box = EWS.ListBox(EWS, EWS, self._scrolled_window, "interaction_editor_box")
		slot16 = ""
		local remove_btn = EWS.Button(EWS, EWS, self._scrolled_window, "Remove", "")
		slot14 = "VERTICAL"
		local list_box_sizer = EWS.BoxSizer(EWS, EWS)
		slot18 = "EXPAND,ALL"

		cb_box.add(EWS, cb_box, combo_box, 1, 2)

		slot18 = "EXPAND,ALL"

		cb_box.add(EWS, cb_box, add_btn, 0, 2)

		slot14 = patterns

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 392-397, warpins: 0 ---
		for _, pat in ipairs(EWS) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 392-395, warpins: 1 ---
			slot20 = pat

			combo_box.append(slot18, combo_box)
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 396-397, warpins: 2 ---
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 398-401, warpins: 1 ---
		slot14 = properties

		--- END OF BLOCK #2 ---

		FLOW; TARGET BLOCK #3



		-- Decompilation error in this vicinity:
		--- BLOCK #3 402-422, warpins: 0 ---
		for _, prop in ipairs(slot13) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 402-408, warpins: 1 ---
			slot21 = prop
			local pat = desc.property_pattern(slot18, desc, node)

			if pat then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 409-420, warpins: 1 ---
				slot22 = pat
				local pat_type = desc.pattern_type(slot19, desc, node)
				slot22 = prop .. " - " .. pat_type

				list_box.append(desc, list_box)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 421-422, warpins: 3 ---
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #3 ---

		FLOW; TARGET BLOCK #4



		-- Decompilation error in this vicinity:
		--- BLOCK #4 423-429, warpins: 1 ---
		slot17 = node

		--- END OF BLOCK #4 ---

		FLOW; TARGET BLOCK #5



		-- Decompilation error in this vicinity:
		--- BLOCK #5 430-450, warpins: 0 ---
		for _, trans in ipairs(desc.node_inputs(slot15, desc)) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 430-436, warpins: 1 ---
			slot21 = trans
			local pat = desc.transput_pattern(slot18, desc, node)

			if pat then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 437-448, warpins: 1 ---
				slot22 = pat
				local pat_type = desc.pattern_type(slot19, desc, node)
				slot22 = trans .. " - " .. pat_type

				list_box.append(desc, list_box)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 449-450, warpins: 3 ---
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #5 ---

		FLOW; TARGET BLOCK #6



		-- Decompilation error in this vicinity:
		--- BLOCK #6 451-457, warpins: 1 ---
		slot17 = node

		--- END OF BLOCK #6 ---

		FLOW; TARGET BLOCK #7



		-- Decompilation error in this vicinity:
		--- BLOCK #7 458-478, warpins: 0 ---
		for _, trans in ipairs(desc.node_outputs(slot15, desc)) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 458-464, warpins: 1 ---
			slot21 = trans
			local pat = desc.transput_pattern(slot18, desc, node)

			if pat then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 465-476, warpins: 1 ---
				slot22 = pat
				local pat_type = desc.pattern_type(slot19, desc, node)
				slot22 = trans .. " - " .. pat_type

				list_box.append(desc, list_box)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 477-478, warpins: 3 ---
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #7 ---

		FLOW; TARGET BLOCK #8



		-- Decompilation error in this vicinity:
		--- BLOCK #8 479-564, warpins: 1 ---
		slot15 = patterns[1]

		combo_box.set_value(slot13, combo_box)

		slot15 = false

		remove_btn.set_enabled(slot13, remove_btn)

		local d = {
			t = "EVT_COMMAND_BUTTON_CLICKED"
		}
		d.widget = add_btn
		d.cb = self._add_pat_cb
		d.combo_box = combo_box
		d.list_box = list_box
		d.desc = desc
		d.node = node
		slot18 = d

		add_btn.connect(remove_btn, add_btn, d.t, d.cb)

		d = {
			t = "EVT_COMMAND_LISTBOX_SELECTED",
			widget = list_box,
			cb = self._list_box_update_cb,
			remove_btn = remove_btn,
			desc = desc,
			node = node
		}
		slot18 = d

		list_box.connect(self._list_box_update_cb, list_box, d.t, d.cb)

		d = {
			t = "EVT_COMMAND_BUTTON_CLICKED",
			widget = remove_btn,
			cb = self._remove_pat_cb,
			list_box = list_box,
			desc = desc,
			node = node
		}
		slot18 = d

		remove_btn.connect(self._remove_pat_cb, remove_btn, d.t, d.cb)

		slot19 = "EXPAND,ALL"

		list_box_sizer.add(self._remove_pat_cb, list_box_sizer, list_box, 1, 2)

		slot19 = "EXPAND,ALL"

		list_box_sizer.add(self._remove_pat_cb, list_box_sizer, remove_btn, 0, 2)

		slot19 = "EXPAND"

		static_patterns_box.add(self._remove_pat_cb, static_patterns_box, cb_box, 0, 0)

		slot19 = "EXPAND"

		static_patterns_box.add(self._remove_pat_cb, static_patterns_box, list_box_sizer, 1, 0)

		slot19 = "EXPAND,ALL"

		self._prop_box.add(self._remove_pat_cb, self._prop_box, static_patterns_box, 1, 2)
		--- END OF BLOCK #8 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 565-570, warpins: 2 ---
	slot8 = self._prop_box

	self._scrolled_window.set_sizer(slot6, self._scrolled_window)

	return 
	--- END OF BLOCK #2 ---



end
function InteractionEditorGenericPanel:on_update_prop(data, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	local v = nil

	if data.dtype == "number" then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-12, warpins: 1 ---
		slot8 = data.widget
		v = tonumber(data.widget.get_value(slot7))
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 13-15, warpins: 1 ---
		if data.dtype == "string" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 16-23, warpins: 1 ---
			slot8 = data.widget
			v = tostring(data.widget.get_value(slot7))
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 24-28, warpins: 1 ---
			slot6 = data.widget
			v = data.widget.get_value(slot5)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 29-38, warpins: 3 ---
	slot11 = v

	assert(data.desc.property_set(slot7, data.desc, data.node, data.prop))

	return 
	--- END OF BLOCK #1 ---



end
function InteractionEditorGenericPanel:on_add_pat(data, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-15, warpins: 1 ---
	slot7 = self._owner
	local system = assert(self._owner.active_system(slot6))
	local pat = data.combo_box.get_value(self._owner.active_system)
	slot7 = self
	local name = self._new_pattern_name(data.combo_box)

	if name == "" then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 16-16, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 17-18, warpins: 2 ---
	if not name then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 19-23, warpins: 1 ---
		slot9 = name

		self._could_not_add_pat(slot7, self)

		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 24-32, warpins: 2 ---
	slot11 = name
	local full_name = data.desc.pattern_instantiate(slot7, data.desc, data.node, pat)

	if not full_name then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 33-37, warpins: 1 ---
		slot10 = name

		self._could_not_add_pat(slot8, self)

		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 38-64, warpins: 2 ---
	data.list_box.append(slot8, data.list_box)

	slot12 = data.node
	local node = assert(system.graph_node(full_name, system))
	slot12 = pat
	local ptype = data.desc.pattern_type(system.graph_node, data.desc, data.node)
	slot16 = full_name

	system.add_pattern_data(data.desc, system, data.node, pat, ptype, name)

	if ptype == "input" then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 65-74, warpins: 1 ---
		slot12 = full_name

		node.add_input(slot10, node)

		slot13 = data.node

		system.set_node_colors(slot10, system, node)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 75-76, warpins: 1 ---
		if ptype == "output" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 77-85, warpins: 1 ---
			slot12 = full_name

			node.add_output(slot10, node)

			slot13 = data.node

			system.set_node_colors(slot10, system, node)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 86-102, warpins: 3 ---
	slot11 = self._owner
	slot11 = self._owner.ui(slot10)

	self._owner.ui(slot10).clean_prop_panel(slot10)

	slot11 = self._owner
	slot13 = data.node

	self._owner.ui(slot10).rebuild_prop_panel(slot10, self._owner.ui(slot10), data.desc)

	return 
	--- END OF BLOCK #4 ---



end
function InteractionEditorGenericPanel:on_remove_pat(data, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot5 = data.list_box
	local idx = data.list_box.selected_index(slot4)

	if -1 < idx then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-30, warpins: 1 ---
		slot7 = idx
		local selected = data.list_box.get_string(slot5, data.list_box)
		slot9 = self._owner
		local system = assert(self._owner.active_system(slot8))
		slot10 = selected
		local node, pat, ptype, name, full_name = system.pattern_data(self._owner.active_system, system, data.node)
		slot15 = selected

		system.remove_pattern_data(slot12, system, data.node)

		if ptype == "input" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 31-51, warpins: 1 ---
			slot15 = system
			slot17 = full_name

			assert(system.desc(slot14).transput_remove(slot14, system.desc(slot14), node))

			slot16 = node
			slot14 = full_name

			assert(system.graph_node(full_name, system)).remove_input(slot12, assert(system.graph_node(full_name, system)))
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 52-53, warpins: 1 ---
			if ptype == "output" then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 54-74, warpins: 1 ---
				slot15 = system
				slot17 = full_name

				assert(system.desc(slot14).transput_remove(slot14, system.desc(slot14), node))

				slot16 = node
				slot14 = full_name

				assert(system.graph_node(slot14, system)).remove_output(slot12, assert(system.graph_node(slot14, system)))
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 75-84, warpins: 1 ---
				slot15 = system
				slot17 = full_name

				assert(system.desc(slot14).property_remove(slot14, system.desc(slot14), node))
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 85-100, warpins: 3 ---
		slot13 = self._owner
		slot13 = self._owner.ui(slot12)

		self._owner.ui(slot12).clean_prop_panel(slot12)

		slot13 = self._owner
		slot15 = data.node

		self._owner.ui(slot12).rebuild_prop_panel(slot12, self._owner.ui(slot12), data.desc)
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 101-101, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
function InteractionEditorGenericPanel:on_list_box_update(data, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	slot6 = true

	data.remove_btn.set_enabled(slot4, data.remove_btn)

	return 
	--- END OF BLOCK #0 ---



end

return 

--- END OF BLOCK #0 ---

FLOW; TARGET BLOCK #2



-- Decompilation error in this vicinity:
--- BLOCK #1 26-28, warpins: 1 ---
slot0 = CoreClass.class()
--- END OF BLOCK #1 ---

FLOW; TARGET BLOCK #2



-- Decompilation error in this vicinity:
--- BLOCK #2 29-66, warpins: 2 ---
--- END OF BLOCK #2 ---



