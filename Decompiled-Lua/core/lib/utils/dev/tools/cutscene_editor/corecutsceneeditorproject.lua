-- Decompilation Error: _run_step(_unwarp_expressions, node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- Decompilation Error: _glue_flows(node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.

-- Decompilation error in this vicinity:
--- BLOCK #0 1-3, warpins: 1 ---
slot0 = CoreCutsceneEditorProject or class()
CoreCutsceneEditorProject = slot0
CoreCutsceneEditorProject.VALID_EXPORT_TYPES = {
	"in_game_use",
	"footage_use"
}
CoreCutsceneEditorProject.DEFAULT_EXPORT_TYPE = "in_game_use"
function CoreCutsceneEditorProject:path()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	return self._path
	--- END OF BLOCK #0 ---



end
function CoreCutsceneEditorProject:set_path(absolute_path)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-8, warpins: 1 ---
	slot5 = "Must supply a valid path."
	self._path = assert(slot3, absolute_path)
	self._root_node = nil

	return 
	--- END OF BLOCK #0 ---



end
function CoreCutsceneEditorProject:name()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	slot3 = self

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 17-17, warpins: 2 ---
	return slot1
	--- END OF BLOCK #1 ---



end
function CoreCutsceneEditorProject:export_type()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	slot4 = "settings"

	if not self.child_node(slot2, self) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 7-9, warpins: 1 ---
		function slot3()

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-1, warpins: 1 ---
			return 
			--- END OF BLOCK #0 ---



		end

		local settings_node = responder(slot2)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 10-16, warpins: 2 ---
	slot6 = settings_node

	if not self.child_node(slot3, self, "export_type") then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 17-19, warpins: 1 ---
		slot4 = nil
		local export_type_node = responder(slot3)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 20-25, warpins: 2 ---
	slot6 = "value"

	if not export_type_node.parameter(slot4, export_type_node) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 26-26, warpins: 1 ---
		slot3 = self.DEFAULT_EXPORT_TYPE
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 27-28, warpins: 2 ---
	return slot3
	--- END OF BLOCK #3 ---



end
function CoreCutsceneEditorProject:save(audio_clips, film_clips, cutscene_keys, settings)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-25, warpins: 1 ---
	slot9 = self
	slot8 = "A valid path has not been assigned. Call the set_path() method prior to saving."

	assert(slot6, self.path("A valid path has not been assigned. Call the set_path() method prior to saving."))

	self._root_node = nil

	local function is_valid(member)

		-- Decompilation error in this vicinity:
		--- BLOCK #0 1-2, warpins: 1 ---
		if member == nil or member == "" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 5-6, warpins: 2 ---
			slot1 = false
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 7-7, warpins: 1 ---
			slot1 = true
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 8-8, warpins: 2 ---
		return slot1
		--- END OF BLOCK #1 ---



	end

	local project_node = Node(self.path("A valid path has not been assigned. Call the set_path() method prior to saving."))
	slot10 = "settings"
	local settings_node = project_node.make_child("cutscene_project", project_node)
	slot11 = "export_type"
	local export_type_node = settings_node.make_child(project_node, settings_node)
	slot11 = settings.export_type

	if type(settings_node) == "string" then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 26-32, warpins: 1 ---
		slot14 = settings.export_type

		assert(table.contains(slot12, self.VALID_EXPORT_TYPES))
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 33-38, warpins: 2 ---
	slot11 = export_type_node
	slot9 = export_type_node.set_parameter
	slot12 = "value"

	if not settings.export_type then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 39-39, warpins: 1 ---
		slot13 = self.DEFAULT_EXPORT_TYPE
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 40-48, warpins: 2 ---
	slot9(slot10, slot11, slot12)

	slot12 = "animation_patches"
	local animation_patches_node = settings_node.make_child(slot10, settings_node)
	slot10 = pairs

	if not settings.animation_patches then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 49-49, warpins: 1 ---
		slot12 = {}
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 50-51, warpins: 2 ---
	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 52-110, warpins: 0 ---
	for actor_name, patches in slot10(slot11) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 52-55, warpins: 1 ---
		slot17 = patches

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 56-108, warpins: 0 ---
		for blend_set, animation in pairs(slot16) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 56-60, warpins: 1 ---
			slot22 = blend_set

			if is_valid(slot21) then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 61-65, warpins: 1 ---
				slot22 = animation

				if is_valid(slot21) then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 66-77, warpins: 1 ---
					slot25 = {
						name = tostring(slot27)
					}
					slot28 = actor_name

					if not self.child_node(slot21, self, "actor", animation_patches_node) then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 78-81, warpins: 1 ---
						slot23 = "actor"
						local actor_node = animation_patches_node.make_child(slot21, animation_patches_node)
						--- END OF BLOCK #0 ---



					end

					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 82-106, warpins: 2 ---
					slot24 = "name"

					actor_node.set_parameter(slot22, actor_node, tostring(slot26))

					slot24 = "override"
					local override_node = actor_node.make_child(slot22, actor_node)
					slot25 = "blend_set"
					slot28 = blend_set

					override_node.set_parameter(actor_node, override_node, tostring(actor_name))

					slot25 = "animation"
					slot28 = animation

					override_node.set_parameter(actor_node, override_node, tostring(actor_name))
					--- END OF BLOCK #1 ---



				end
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 107-108, warpins: 4 ---
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 109-110, warpins: 2 ---
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 111-118, warpins: 1 ---
	slot13 = "audio_track"
	local audio_track_node = project_node.make_child(slot11, project_node)
	slot13 = audio_clips

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 119-146, warpins: 0 ---
	for _, clip in ipairs(project_node) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 119-123, warpins: 1 ---
		slot18 = clip.sound

		if is_valid(slot17) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 124-134, warpins: 1 ---
			slot19 = "clip"
			local clip_node = audio_track_node.make_child(slot17, audio_track_node)
			slot19 = clip_node
			slot17 = clip_node.set_parameter
			slot20 = "offset"
			slot21 = tostring

			if not clip.offset then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 135-135, warpins: 1 ---
				slot23 = 0
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 136-144, warpins: 2 ---
			slot17(slot18, slot19, slot21(slot22))

			slot20 = "sound"
			slot23 = clip.sound

			clip_node.set_parameter(slot18, clip_node, tostring(slot22))
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 145-146, warpins: 3 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #6 ---

	FLOW; TARGET BLOCK #7



	-- Decompilation error in this vicinity:
	--- BLOCK #7 147-154, warpins: 1 ---
	slot14 = "key_track"
	local key_track_node = project_node.make_child(slot12, project_node)
	slot14 = cutscene_keys

	--- END OF BLOCK #7 ---

	FLOW; TARGET BLOCK #8



	-- Decompilation error in this vicinity:
	--- BLOCK #8 155-160, warpins: 0 ---
	for _, cutscene_key in ipairs(project_node) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 155-158, warpins: 1 ---
		slot20 = key_track_node

		cutscene_key._save_under(slot18, cutscene_key)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 159-160, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #8 ---

	FLOW; TARGET BLOCK #9



	-- Decompilation error in this vicinity:
	--- BLOCK #9 161-174, warpins: 1 ---
	slot15 = "film_tracks"
	local film_tracks_node = project_node.make_child(slot13, project_node)

	function slot17(highest, clip)

		-- Decompilation error in this vicinity:
		--- BLOCK #0 1-6, warpins: 1 ---
		slot2 = math.max
		slot4 = highest

		if not clip.track_index then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 7-7, warpins: 1 ---
			slot5 = 0
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 8-8, warpins: 2 ---
		return slot2(slot3, slot4)
		--- END OF BLOCK #1 ---



	end

	local highest_film_track_index = table.inject(project_node, film_clips, 0)

	--- END OF BLOCK #9 ---

	FLOW; TARGET BLOCK #10



	-- Decompilation error in this vicinity:
	--- BLOCK #10 175-254, warpins: 0 ---
	for track_index = 1, highest_film_track_index, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 175-186, warpins: 2 ---
		slot21 = "track"
		local track_node = film_tracks_node.make_child(slot19, film_tracks_node)

		function slot24(clip)

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-4, warpins: 1 ---
			if clip.track_index ~= track_index then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 5-6, warpins: 1 ---
				slot1 = false
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 7-7, warpins: 1 ---
				slot1 = true
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 8-8, warpins: 2 ---
			return slot1
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 187-252, warpins: 0 ---
		for _, clip in ipairs(table.find_all_values(slot22, film_clips)) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 187-191, warpins: 1 ---
			slot26 = clip.cutscene

			if is_valid(slot25) then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 192-196, warpins: 1 ---
				slot26 = clip.camera

				if is_valid(slot25) and 0 < clip.to - clip.from then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 203-213, warpins: 1 ---
					slot27 = "clip"
					local clip_node = track_node.make_child(slot25, track_node)
					slot27 = clip_node
					slot25 = clip_node.set_parameter
					slot28 = "offset"
					slot29 = tostring

					if not clip.offset then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 214-214, warpins: 1 ---
						slot31 = 0
						--- END OF BLOCK #0 ---



					end

					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 215-230, warpins: 2 ---
					slot25(slot26, slot27, slot29(slot30))

					slot28 = "cutscene"
					slot31 = clip.cutscene

					clip_node.set_parameter(slot26, clip_node, tostring(slot30))

					slot27 = clip_node
					slot25 = clip_node.set_parameter
					slot28 = "from"
					slot29 = tostring

					if not clip.from then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 231-231, warpins: 1 ---
						slot31 = 0
						--- END OF BLOCK #0 ---



					end

					--- END OF BLOCK #1 ---

					FLOW; TARGET BLOCK #2



					-- Decompilation error in this vicinity:
					--- BLOCK #2 232-240, warpins: 2 ---
					slot25(slot26, slot27, slot29(slot30))

					slot27 = clip_node
					slot25 = clip_node.set_parameter
					slot28 = "to"
					slot29 = tostring

					if not clip.to then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 241-241, warpins: 1 ---
						slot31 = 0
						--- END OF BLOCK #0 ---



					end

					--- END OF BLOCK #2 ---

					FLOW; TARGET BLOCK #3



					-- Decompilation error in this vicinity:
					--- BLOCK #3 242-250, warpins: 2 ---
					slot25(slot26, slot27, slot29(slot30))

					slot28 = "camera"
					slot31 = clip.camera

					clip_node.set_parameter(slot26, clip_node, tostring(slot30))
					--- END OF BLOCK #3 ---



				end
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 251-252, warpins: 5 ---
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 253-254, warpins: 1 ---
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #10 ---

	FLOW; TARGET BLOCK #11



	-- Decompilation error in this vicinity:
	--- BLOCK #11 255-269, warpins: 1 ---
	slot17 = project_node
	slot20 = self

	managers.database.save_node(slot15, managers.database, self.path(slot19))

	slot16 = managers.database

	managers.database.recompile(slot15)

	return 
	--- END OF BLOCK #11 ---



end
function CoreCutsceneEditorProject:audio_clips()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	local clips = {}
	slot5 = "audio_track"

	if not self.child_node(slot3, self) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-10, warpins: 1 ---
		function slot4()

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-1, warpins: 1 ---
			return 
			--- END OF BLOCK #0 ---



		end

		local audio_track_node = responder(slot3)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 11-14, warpins: 2 ---
	slot5 = audio_track_node

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 15-36, warpins: 0 ---
	for clip_node in audio_track_node.children(slot4) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 15-25, warpins: 1 ---
		slot7 = table.insert
		slot9 = clips
		slot10 = {}
		slot11 = tonumber
		slot16 = "offset"

		if not clip_node.parameter(slot14, clip_node) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 26-26, warpins: 1 ---
			slot13 = "0"
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 27-34, warpins: 2 ---
		slot10.offset = slot11(slot12)
		slot14 = "sound"
		slot10.sound = clip_node.parameter(slot12, clip_node)

		slot7(slot8, slot9)
		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 35-36, warpins: 2 ---
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 37-38, warpins: 1 ---
	return clips
	--- END OF BLOCK #3 ---



end
function CoreCutsceneEditorProject:film_clips()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	local clips = {}
	slot5 = "film_tracks"

	if not self.child_node(slot3, self) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-10, warpins: 1 ---
		slot4 = 0
		local film_tracks_node = responder(slot3)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 11-14, warpins: 2 ---
	local index = 0
	slot6 = film_tracks_node
	local track_count = film_tracks_node.num_children(slot5)

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 15-16, warpins: 2 ---
	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 17-77, warpins: 0 ---
	while index < track_count do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 17-17, warpins: 1 ---
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 18-25, warpins: 1 ---
		slot8 = index
		local track_node = film_tracks_node.child(slot6, film_tracks_node)
		slot8 = track_node

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 26-74, warpins: 0 ---
		for clip_node in track_node.children(film_tracks_node) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 26-38, warpins: 1 ---
			slot10 = table.insert
			slot12 = clips
			slot13 = {
				track_index = index + 1
			}
			slot14 = tonumber
			slot19 = "offset"

			if not clip_node.parameter(slot17, clip_node) then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 39-39, warpins: 1 ---
				slot16 = "0"
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 40-53, warpins: 2 ---
			slot13.offset = slot14(slot15)
			slot13.cutscene = clip_node.parameter(slot15, clip_node)
			slot14 = tonumber
			slot19 = "from"

			if not clip_node.parameter("cutscene", clip_node) then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 54-54, warpins: 1 ---
				slot16 = "0"
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 55-63, warpins: 2 ---
			slot13.from = slot14(slot15)
			slot14 = tonumber
			slot19 = "to"

			if not clip_node.parameter(slot17, clip_node) then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 64-64, warpins: 1 ---
				slot16 = "0"
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #2 ---

			FLOW; TARGET BLOCK #3



			-- Decompilation error in this vicinity:
			--- BLOCK #3 65-72, warpins: 2 ---
			slot13.to = slot14(slot15)
			slot17 = "camera"
			slot13.camera = clip_node.parameter(slot15, clip_node)

			slot10(slot11, slot12)
			--- END OF BLOCK #3 ---

			FLOW; TARGET BLOCK #4



			-- Decompilation error in this vicinity:
			--- BLOCK #4 73-74, warpins: 2 ---
			--- END OF BLOCK #4 ---



		end

		--- END OF BLOCK #2 ---

		FLOW; TARGET BLOCK #3



		-- Decompilation error in this vicinity:
		--- BLOCK #3 75-76, warpins: 1 ---
		index = index + 1
		--- END OF BLOCK #3 ---

		FLOW; TARGET BLOCK #4



		-- Decompilation error in this vicinity:
		--- BLOCK #4 77-77, warpins: 1 ---
		--- END OF BLOCK #4 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 77-77, warpins: 1 ---
	return clips
	--- END OF BLOCK #4 ---



end
function CoreCutsceneEditorProject:cutscene_keys(key_collection)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	local cutscene_keys = {}
	slot6 = "key_track"

	if not self.child_node(slot4, self) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-10, warpins: 1 ---
		function slot5()

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-1, warpins: 1 ---
			return 
			--- END OF BLOCK #0 ---



		end

		local key_track_node = responder(slot4)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 11-14, warpins: 2 ---
	slot6 = key_track_node

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 15-33, warpins: 0 ---
	for key_node in key_track_node.children(slot5) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 15-31, warpins: 1 ---
		slot13 = key_node
		slot12 = key_collection
		local cutscene_key = CoreCutsceneKey.create(slot9, CoreCutsceneKey, key_node.name(slot12))
		slot12 = key_node

		cutscene_key.load(CoreCutsceneKey, cutscene_key)

		slot12 = cutscene_key

		table.insert(CoreCutsceneKey, cutscene_keys)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 32-33, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 34-35, warpins: 1 ---
	return cutscene_keys
	--- END OF BLOCK #3 ---



end
function CoreCutsceneEditorProject:animation_patches()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	local patches = {}
	slot5 = "settings"

	if not self.child_node(slot3, self) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-10, warpins: 1 ---
		function slot4()

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-1, warpins: 1 ---
			return 
			--- END OF BLOCK #0 ---



		end

		local settings_node = responder(slot3)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 11-17, warpins: 2 ---
	slot7 = settings_node

	if not self.child_node(slot4, self, "animation_patches") then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 18-20, warpins: 1 ---
		function slot5()

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-1, warpins: 1 ---
			return 
			--- END OF BLOCK #0 ---



		end

		local animation_patches_node = responder(slot4)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 21-24, warpins: 2 ---
	slot6 = animation_patches_node

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 25-51, warpins: 0 ---
	for actor_node in animation_patches_node.children(slot5) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 25-32, warpins: 1 ---
		slot11 = "name"
		local unit_name = actor_node.parameter(slot9, actor_node)
		slot11 = actor_node

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 33-49, warpins: 0 ---
		for override_node in actor_node.children(actor_node) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 33-43, warpins: 1 ---
			slot16 = "blend_set"
			local blend_set = override_node.parameter(slot14, override_node)
			slot17 = "animation"
			local animation = override_node.parameter(override_node, override_node)

			if not patches[unit_name] then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 44-44, warpins: 1 ---
				slot15 = {}
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 45-47, warpins: 2 ---
			patches[unit_name] = slot15
			patches[unit_name][blend_set] = animation
			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 48-49, warpins: 2 ---
			--- END OF BLOCK #2 ---



		end
		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 50-51, warpins: 2 ---
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 52-53, warpins: 1 ---
	return patches
	--- END OF BLOCK #4 ---



end
function CoreCutsceneEditorProject:root_node()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._root_node == nil then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-12, warpins: 1 ---
		slot3 = managers.database
		slot6 = self
		self._root_node = managers.database.load_node(slot2, self.path(slot5))
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 13-14, warpins: 2 ---
	return self._root_node
	--- END OF BLOCK #1 ---



end
function CoreCutsceneEditorProject:child_node(child_name, parent_node, child_properties)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	if not parent_node then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 3-6, warpins: 1 ---
		slot6 = self
		parent_node = self.root_node(slot5)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 7-10, warpins: 2 ---
	slot6 = parent_node

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 11-29, warpins: 0 ---
	for child_node in parent_node.children(slot5) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 11-15, warpins: 1 ---
		slot10 = child_node

		if child_node.name(slot9) == child_name then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 16-17, warpins: 1 ---
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 27-27, warpins: 3 ---
		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 28-29, warpins: 2 ---
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 30-30, warpins: 1 ---
	return 
	--- END OF BLOCK #3 ---



end

return 

--- END OF BLOCK #0 ---

FLOW; TARGET BLOCK #2



-- Decompilation error in this vicinity:
--- BLOCK #1 4-5, warpins: 1 ---
slot0 = class()
--- END OF BLOCK #1 ---

FLOW; TARGET BLOCK #2



-- Decompilation error in this vicinity:
--- BLOCK #2 6-46, warpins: 2 ---
--- END OF BLOCK #2 ---



