-- Decompilation Error: _run_step(_unwarp_expressions, node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- Decompilation Error: _glue_flows(node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
slot2 = "core/lib/utils/dev/ews/sequencer/CoreCutsceneSequencerTrackBehaviour"

require(slot1)

slot2 = "core/lib/utils/dev/tools/cutscene_editor/CoreCutsceneFootage"

require(slot1)

if not CoreCutsceneSequencerPanel then
	slot3 = BasicEventHandling
	slot0 = mixin(slot1, class())
end

CoreCutsceneSequencerPanel = slot0
CoreCutsceneSequencerPanel.init = function (self, parent_frame)
	slot5 = parent_frame

	self._create_panel(slot3, self)

	self._tree_refresh_timeout = 0
	slot4 = EditableTrackBehaviour
	self._track_behaviour = EditableTrackBehaviour.new(slot3)
	slot5 = self

	self._track_behaviour.set_delegate(slot3, self._track_behaviour)

	return 
end
CoreCutsceneSequencerPanel.update = function (self, time, delta_time)
	slot6 = "EVT_MOTION"
	local current_mouse_event = EWS.MouseEvent(slot4, EWS)
	self._previous_mouse_event = self._previous_mouse_event or current_mouse_event
	slot7 = self._previous_mouse_event

	if current_mouse_event.get_position(slot5) ~= self._previous_mouse_event.get_position(current_mouse_event) then
		slot8 = current_mouse_event

		self._send_event(slot5, self, "EVT_SYSTEM_WIDE_MOTION")
	end

	slot6 = current_mouse_event

	if current_mouse_event.left_is_down(slot5) == false then
		slot6 = self._previous_mouse_event

		if self._previous_mouse_event.left_is_down(slot5) == true then
			slot8 = current_mouse_event

			self._send_event(slot5, self, "EVT_SYSTEM_WIDE_LEFT_UP")
		end
	end

	self._previous_mouse_event = current_mouse_event

	return 
end
CoreCutsceneSequencerPanel.panel = function (self)
	return self._panel
end
CoreCutsceneSequencerPanel.freeze = function (self)
	slot3 = self._ruler

	self._ruler.freeze(slot2)

	slot3 = self
	slot3 = self.audio_track(slot2)

	self.audio_track(slot2).freeze(slot2)

	slot3 = self
	slot3 = self.key_track(slot2)

	self.key_track(slot2).freeze(slot2)

	slot5 = self

	for _, track in ipairs(self.film_tracks(slot4)) do
		slot8 = track

		track.freeze(slot7)
	end

	return 
end
CoreCutsceneSequencerPanel.thaw = function (self)
	slot3 = self._ruler

	self._ruler.thaw(slot2)

	slot3 = self
	slot3 = self.audio_track(slot2)

	self.audio_track(slot2).thaw(slot2)

	slot3 = self
	slot3 = self.key_track(slot2)

	self.key_track(slot2).thaw(slot2)

	slot5 = self

	for _, track in ipairs(self.film_tracks(slot4)) do
		slot8 = track

		track.thaw(slot7)
	end

	return 
end
CoreCutsceneSequencerPanel.ruler = function (self)
	return self._ruler
end
CoreCutsceneSequencerPanel.audio_track = function (self)
	return self._audio_track
end
CoreCutsceneSequencerPanel.key_track = function (self)
	return self._key_track
end
CoreCutsceneSequencerPanel.film_tracks = function (self)
	return self._film_tracks
end
CoreCutsceneSequencerPanel.tracks = function (self)
	if self._tracks == nil then
		self._tracks = {}
		slot3 = self._tracks
		slot6 = self

		table.insert(slot2, self.key_track(slot5))

		slot5 = self

		for _, track in ipairs(self.film_tracks(self.key_track)) do
			slot9 = track

			table.insert(slot7, self._tracks)
		end
	end

	return self._tracks
end
CoreCutsceneSequencerPanel.track_at_screen_position = function (self, screen_position)
	slot6 = self

	function slot5(track)
		slot4 = screen_position

		return track.point_is_inside(slot2, track)
	end

	return table.find_value(slot3, self.tracks(slot5))
end
CoreCutsceneSequencerPanel.pixels_per_division = function (self)
	slot3 = self._ruler

	return self._ruler.pixels_per_major_division(slot2)
end
CoreCutsceneSequencerPanel.units_per_division = function (self)
	slot3 = self._ruler

	return self._ruler.units_per_major_division(slot2)
end
CoreCutsceneSequencerPanel.set_units = function (self, pixels_per_division, units_per_division)
	slot7 = units_per_division

	self._ruler.set_major_divisions(slot4, self._ruler, pixels_per_division)

	slot5 = self
	slot6 = self._ruler

	self.audio_track(slot4).set_units_from_ruler(slot4, self.audio_track(slot4))

	slot5 = self

	self.key_track(slot4).set_units_from_ruler(slot4, self.key_track(slot4))

	slot7 = self

	for _, track in ipairs(self.film_tracks(self._ruler)) do
		slot11 = self._ruler

		track.set_units_from_ruler(slot9, track)
	end

	return 
end
CoreCutsceneSequencerPanel.active_film_track = function (self)
	return self._active_film_track
end
CoreCutsceneSequencerPanel.set_active_film_track = function (self, active_track)
	self._active_film_track = active_track
	slot6 = self

	for _, track in ipairs(self.film_tracks(slot5)) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-14, warpins: 1 ---
		slot9 = track
		slot7 = track.set_background_colour
		slot12 = self
		slot10 = self._track_background_colour
		slot13 = track == self._active_film_track
		slot12 = self._track_background_colour(slot11, self)

		track.set_background_colour(slot8, self._track_background_colour(slot11, self).unpack(slot11))

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #1 15-16, warpins: 1 ---
		slot13 = false

		if false then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 17-17, warpins: 1 ---
			slot13 = true
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 18-22, warpins: 2 ---
		--- END OF BLOCK #2 ---

		FLOW; TARGET BLOCK #3



		-- Decompilation error in this vicinity:
		--- BLOCK #3 23-24, warpins: 2 ---
		--- END OF BLOCK #3 ---



	end

	slot6 = {
		position = function ()

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-2, warpins: 1 ---
			return position
			--- END OF BLOCK #0 ---



		end
	}

	self._send_event(slot3, self, "EVT_EVALUATE_FRAME_AT_PLAYHEAD")

	return 
end
CoreCutsceneSequencerPanel.film_clips = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-9, warpins: 1 ---
	slot5 = self

	function slot5(accumulated, track)

		-- Decompilation error in this vicinity:
		--- BLOCK #0 1-7, warpins: 1 ---
		slot4 = accumulated
		slot7 = track

		return table.list_union(slot3, track.clips(slot6))
		--- END OF BLOCK #0 ---



	end

	return table.inject(slot2, self.film_tracks(slot4), {})
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.selected_items = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-12, warpins: 1 ---
	slot4 = self.selected_audio_clips(self)
	slot7 = self

	return table.list_union(slot2, self.selected_film_clips(slot4), self.selected_keys(self))
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.selected_film_clips = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-9, warpins: 1 ---
	slot5 = self

	function slot5(accumulated, track)

		-- Decompilation error in this vicinity:
		--- BLOCK #0 1-7, warpins: 1 ---
		slot4 = accumulated
		slot7 = track

		return table.list_union(slot3, track.selected_clips(slot6))
		--- END OF BLOCK #0 ---



	end

	return table.inject(slot2, self.film_tracks(slot4), {})
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.selected_audio_clips = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	slot3 = self
	slot3 = self.audio_track(slot2)

	return self.audio_track(slot2).selected_clips(slot2)
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.selected_keys = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	slot3 = self
	slot3 = self.key_track(slot2)

	return self.key_track(slot2).selected_clips(slot2)
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.add_film_clip = function (self, track_index, offset, cutscene_id, from, to, camera)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-33, warpins: 1 ---
	slot10 = "Film track index out of bounds."
	local track = assert(slot8, self.film_tracks(slot10)[track_index])
	slot12 = "CutsceneFootage"
	slot16 = cutscene_id
	slot11 = "Cutscene \"" .. cutscene_id .. "\" does not exist."
	local footage = assert(self.film_tracks(slot10)[track_index], core_or_local(self, managers.cutscene.get_cutscene(slot14, managers.cutscene)))
	slot14 = camera
	local clip = footage.create_clip(core_or_local(self, managers.cutscene.get_cutscene(slot14, managers.cutscene)), footage, from, to)
	slot14 = offset - from

	return track.add_clip(footage, track, clip)
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.add_audio_clip = function (self, offset, sound)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-1, warpins: 1 ---
	return 
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.add_cutscene_key = function (self, cutscene_key)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-28, warpins: 1 ---
	local sequencer_key = EWS.SequencerKey(slot3)
	slot5 = sequencer_key
	slot8 = cutscene_key.COLOUR

	sequencer_key.set_colour(EWS, cutscene_key.COLOUR.unpack(slot7))

	slot5 = sequencer_key
	slot8 = cutscene_key

	sequencer_key.offset_by(EWS, cutscene_key.frame(slot7))

	slot6 = cutscene_key

	sequencer_key.set_metadata(EWS, sequencer_key)

	slot5 = self
	slot6 = sequencer_key

	return self.key_track(EWS).add_clip(EWS, self.key_track(EWS))
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.remove_items = function (self, clip_list)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-8, warpins: 1 ---
	self.freeze(slot3)

	local removed_count = 0
	slot5 = clip_list

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 9-51, warpins: 0 ---
	for _, clip in ipairs(self) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 9-22, warpins: 1 ---
		slot12 = clip

		self._send_event(slot9, self, "EVT_REMOVE_ITEM")

		slot10 = self
		slot11 = clip
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 50-51, warpins: 4 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 52-63, warpins: 1 ---
	slot5 = self

	self.thaw(slot4)

	slot7 = {
		position = function ()

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-2, warpins: 1 ---
			return position
			--- END OF BLOCK #0 ---



		end
	}

	self._send_event(slot4, self, "EVT_EVALUATE_FRAME_AT_PLAYHEAD")

	return removed_count
	--- END OF BLOCK #2 ---



end
CoreCutsceneSequencerPanel.remove_all_items = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-12, warpins: 1 ---
	slot3 = self

	self.freeze(slot2)

	slot5 = self
	slot5 = self.audio_track(slot4)

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 13-19, warpins: 0 ---
	for _, clip in ipairs(self.audio_track(slot4).clips(slot4)) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 13-17, warpins: 1 ---
		slot10 = clip

		self._send_event(slot7, self, "EVT_REMOVE_ITEM")
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 18-19, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 20-34, warpins: 1 ---
	slot3 = self
	slot3 = self.audio_track(slot2)

	self.audio_track(slot2).remove_all_clips(slot2)

	slot5 = self
	slot5 = self.key_track(slot4)

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 35-41, warpins: 0 ---
	for _, clip in ipairs(self.key_track(slot4).clips(slot4)) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 35-39, warpins: 1 ---
		slot10 = clip

		self._send_event(slot7, self, "EVT_REMOVE_ITEM")
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 40-41, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 42-53, warpins: 1 ---
	slot3 = self
	slot3 = self.key_track(slot2)

	self.key_track(slot2).remove_all_clips(slot2)

	slot5 = self

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 54-71, warpins: 0 ---
	for _, track in ipairs(self.film_tracks(slot4)) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 54-59, warpins: 1 ---
		slot10 = track

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 60-66, warpins: 0 ---
		for _, clip in ipairs(track.clips(slot9)) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 60-64, warpins: 1 ---
			slot15 = clip

			self._send_event(slot12, self, "EVT_REMOVE_ITEM")
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 65-66, warpins: 2 ---
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 67-69, warpins: 1 ---
		slot8 = track

		track.remove_all_clips(slot7)
		--- END OF BLOCK #2 ---

		FLOW; TARGET BLOCK #3



		-- Decompilation error in this vicinity:
		--- BLOCK #3 70-71, warpins: 2 ---
		--- END OF BLOCK #3 ---



	end

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 72-82, warpins: 1 ---
	slot5 = {
		position = function ()

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-2, warpins: 1 ---
			return position
			--- END OF BLOCK #0 ---



		end
	}

	self._send_event(slot2, self, "EVT_EVALUATE_FRAME_AT_PLAYHEAD")

	slot3 = self

	self.thaw(slot2)

	return 
	--- END OF BLOCK #6 ---



end
CoreCutsceneSequencerPanel.set_item_selected = function (self, item, selected)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-9, warpins: 1 ---
	slot6 = selected

	item.set_selected(slot4, item)

	slot6 = "EVT_SELECTION_CHANGED"

	self._send_event(slot4, self)

	return 
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.select_all_clips = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-18, warpins: 1 ---
	slot3 = self
	slot3 = self.audio_track(slot2)

	self.audio_track(slot2).select_all_clips(slot2)

	slot3 = self
	slot3 = self.key_track(slot2)

	self.key_track(slot2).select_all_clips(slot2)

	slot5 = self

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 19-23, warpins: 0 ---
	for _, track in ipairs(self.film_tracks(slot4)) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 19-21, warpins: 1 ---
		slot8 = track

		track.select_all_clips(slot7)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 22-23, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 24-28, warpins: 1 ---
	slot4 = "EVT_SELECTION_CHANGED"

	self._send_event(slot2, self)

	return 
	--- END OF BLOCK #2 ---



end
CoreCutsceneSequencerPanel.deselect_all_items = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-18, warpins: 1 ---
	slot3 = self
	slot3 = self.audio_track(slot2)

	self.audio_track(slot2).deselect_all_clips(slot2)

	slot3 = self
	slot3 = self.key_track(slot2)

	self.key_track(slot2).deselect_all_clips(slot2)

	slot5 = self

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 19-23, warpins: 0 ---
	for _, track in ipairs(self.film_tracks(slot4)) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 19-21, warpins: 1 ---
		slot8 = track

		track.deselect_all_clips(slot7)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 22-23, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 24-28, warpins: 1 ---
	slot4 = "EVT_SELECTION_CHANGED"

	self._send_event(slot2, self)

	return 
	--- END OF BLOCK #2 ---



end
CoreCutsceneSequencerPanel.playhead_position = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot3 = self._ruler

	return self._ruler.playhead_position(slot2)
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.set_playhead_position = function (self, position)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-11, warpins: 1 ---
	local current_position = self.playhead_position(slot3)
	slot6 = 0
	position = math.max(self, position)

	if position ~= current_position then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-20, warpins: 1 ---
		slot6 = position

		self._ruler.set_playhead_position(slot4, self._ruler)

		slot5 = self._playhead_ornaments

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 21-26, warpins: 0 ---
		for _, ornament in ipairs(slot4) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 21-24, warpins: 1 ---
			slot11 = position

			ornament.set_time(slot9, ornament)
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 25-26, warpins: 2 ---
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 27-29, warpins: 1 ---
		slot5 = self

		self._evaluate_frame_at_playhead(slot4)
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 30-30, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
CoreCutsceneSequencerPanel._evaluate_frame_at_playhead = function (self)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-9, warpins: 1 ---
	slot5 = {
		position = function ()

			-- Decompilation error in this vicinity:
			--- BLOCK #0 1-4, warpins: 1 ---
			slot2 = self

			return self.playhead_position(slot1)
			--- END OF BLOCK #0 ---



		end
	}

	self._send_event(slot2, self, "EVT_EVALUATE_FRAME_AT_PLAYHEAD")

	return 
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel._signal_drag = function (self, dragged_clip, drag_mode)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot8 = drag_mode

	self._send_event(slot4, self, "EVT_DRAG_ITEM", dragged_clip)

	return 
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.zoom_around = function (self, time, offset_in_window, delta)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-42, warpins: 1 ---
	slot6 = self._scrolled_area

	self._scrolled_area.freeze(slot5)

	local new_pixels_per_division = self.pixels_per_division(slot5) + delta
	slot8 = new_pixels_per_division
	slot11 = self

	self.set_units(self, self, self.units_per_division(slot10))

	slot7 = self
	slot8 = time
	local scroll_offset = self.key_track(self).units_to_pixels(self, self.key_track(self)) - offset_in_window
	slot8 = self._scrolled_area
	slot13 = self._scrolled_area
	slot13 = 0

	self._scrolled_area.scroll(self.key_track(self), Vector3(slot10, scroll_offset / self._scrolled_area.scroll_pixels_per_unit(slot12).x, -1))

	slot8 = self._scrolled_area

	self._scrolled_area.thaw(self.key_track(self))

	return 
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel._create_panel = function (self, parent_frame)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-186, warpins: 1 ---
	slot5 = parent_frame
	self._panel = EWS.Panel(slot3, EWS)
	slot5 = "VERTICAL"
	local panel_sizer = EWS.BoxSizer(slot3, EWS)
	slot6 = panel_sizer

	self._panel.set_sizer(EWS, self._panel)

	slot6 = self._panel
	self._ruler = EWS.SequencerRuler(EWS, EWS)
	slot5 = self._ruler
	slot8 = "sequencer\\playhead.png"

	self._ruler.set_playhead_bitmap(EWS, CoreEWS.image_path(slot7))

	slot7 = 500

	self._ruler.set_major_divisions(EWS, self._ruler, 100)

	slot6 = self._ruler

	self._connect_mouse_events(EWS, self)

	slot7 = true

	self._connect_mouse_events(EWS, self, self._ruler)

	slot9 = "EXPAND"

	panel_sizer.add(EWS, panel_sizer, self._ruler, 0, 0)

	slot6 = self._panel
	self._scrolled_area = EWS.ScrolledWindow(EWS, EWS)
	slot9 = "EXPAND"

	panel_sizer.add(EWS, panel_sizer, self._scrolled_area, 1, 0)

	slot10 = 1
	slot11 = 1
	slot12 = 0

	self._scrolled_area.set_scrollbars(EWS, self._scrolled_area, Vector3(1, 1, 1), Vector3(1, 1, 1), Vector3(1, 0, 0))

	slot6 = "VERTICAL"
	local scrolled_area_sizer = EWS.BoxSizer(EWS, EWS)
	slot7 = scrolled_area_sizer

	self._scrolled_area.set_sizer(EWS, self._scrolled_area)

	slot7 = "EVT_PAINT"
	slot12 = "_on_scrolled_area_paint"

	self._scrolled_area.connect(EWS, self._scrolled_area, callback(false, self, self))

	self._playhead_ornaments = {}
	self._box_selection_ornaments = {}
	slot6 = {
		remove_clip = false,
		default = {}
	}
	self._audio_track = responder_map(EWS)
	slot7 = self._scrolled_area
	self._key_track = EWS.SequencerTrack(EWS, EWS)
	slot6 = self._key_track
	slot12 = self._key_track
	slot11 = 0

	self._key_track.set_min_size(EWS, Vector3(callback, self._key_track.get_min_size(self).x, self._key_track.get_min_size(self._key_track).y * 3))
	self._key_track.set_units(EWS, self._key_track, 100)

	slot9 = "sequencer\\track_icon_key.bmp"

	self._key_track.set_icon_bitmap(EWS, self._key_track, CoreEWS.image_path(500))

	slot6 = self._key_track
	slot10 = true
	slot9 = self._track_background_colour(10, self)

	self._key_track.set_background_colour(EWS, self._track_background_colour(10, self).unpack(10))

	slot7 = self._key_track

	self._connect_mouse_events(EWS, self)

	slot10 = "EXPAND"

	scrolled_area_sizer.add(EWS, scrolled_area_sizer, self._key_track, 0, 0)

	slot7 = self._key_track

	self._create_ornaments_for_track(EWS, self)

	self._film_tracks = {}

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 187-230, warpins: 0 ---
	for i = 1, 10, 1 do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 187-230, warpins: 2 ---
		slot11 = self._scrolled_area
		local track = EWS.SequencerTrack(slot9, EWS)
		slot14 = "sequencer\\track_icon_film.bmp"

		track.set_icon_bitmap(EWS, track, CoreEWS.image_path(slot13))

		slot11 = track
		slot15 = false
		slot14 = self._track_background_colour(7, self)

		track.set_background_colour(EWS, self._track_background_colour(7, self).unpack(7))

		slot12 = track

		self._connect_mouse_events(EWS, self)

		slot15 = "EXPAND"

		scrolled_area_sizer.add(EWS, scrolled_area_sizer, track, 0, 0)

		slot12 = track

		self._create_ornaments_for_track(EWS, self)

		slot12 = track

		table.insert(EWS, self._film_tracks)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 231-240, warpins: 1 ---
	slot7 = self._film_tracks[1]

	self.set_active_film_track(slot5, self)

	slot7 = 0

	self.set_playhead_position(slot5, self)

	return 
	--- END OF BLOCK #2 ---



end
CoreCutsceneSequencerPanel._create_ornaments_for_track = function (self, track)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-29, warpins: 1 ---
	local playhead_ornament = EWS.SequencerLineOrnament(slot3)
	slot5 = self._playhead_ornaments
	slot9 = playhead_ornament

	table.insert(EWS, track.add_ornament(slot7, track))

	local box_selection_ornament = EWS.SequencerBoxSelectionOrnament(EWS)
	slot7 = "FDIAGONAL_HATCH"

	box_selection_ornament.set_fill_style(EWS, box_selection_ornament)

	slot6 = self._box_selection_ornaments
	slot10 = box_selection_ornament

	table.insert(EWS, track.add_ornament(track, track))

	return 
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel._track_background_colour = function (self, active)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot5 = "3DFACE"
	local colour = EWS.get_system_colour(slot3, EWS)

	if not active then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-8, warpins: 1 ---
		colour = colour * 0.8
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 9-9, warpins: 2 ---
	return colour
	--- END OF BLOCK #1 ---



end
CoreCutsceneSequencerPanel._show_film_track_context_menu = function (self, track, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	slot6 = event
	local clip_below_cursor = track.clip_at_event(slot4, track)

	if clip_below_cursor then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 7-20, warpins: 1 ---
		slot7 = clip_below_cursor
		local menu = self._camera_menu(slot5, self)
		slot8 = menu
		slot13 = 0

		self._panel.popup_menu(self, self._panel, Vector3(slot10, -1, -1))
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 21-21, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
CoreCutsceneSequencerPanel._camera_menu = function (self, clip)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	slot4 = clip
	local metadata = clip.metadata(slot3)

	if metadata then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 6-10, warpins: 1 ---
		slot5 = metadata

		if metadata.footage(slot4) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 11-24, warpins: 1 ---
			slot6 = ""
			local menu = EWS.Menu(slot4, EWS)
			slot8 = metadata
			slot8 = metadata.footage(slot7)

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 25-45, warpins: 0 ---
			for _, camera_name in ipairs(metadata.footage(slot7).camera_names(slot7)) do

				-- Decompilation error in this vicinity:
				--- BLOCK #0 25-38, warpins: 1 ---
				slot14 = "Use camera \"" .. camera_name .. "\" during this clip"

				menu.append_radio_item(slot10, menu, camera_name, camera_name)

				slot11 = metadata

				if camera_name == metadata.camera(slot10) then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 39-43, warpins: 1 ---
					slot13 = true

					menu.set_checked(slot10, menu, camera_name)
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 44-45, warpins: 3 ---
				--- END OF BLOCK #1 ---



			end

			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 46-57, warpins: 1 ---
			slot13 = "_on_set_camera_for_film_clip"
			slot10 = clip

			menu.connect(slot5, menu, "", "EVT_COMMAND_MENU_SELECTED", callback(slot10, self, self))

			return menu
			--- END OF BLOCK #2 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 58-74, warpins: 3 ---
	slot6 = ""
	local menu = EWS.Menu(slot4, EWS)
	slot9 = ""

	menu.append_item(EWS, menu, "NO_CAMERAS", "No Cameras")

	slot8 = false

	menu.set_enabled(EWS, menu, "NO_CAMERAS")

	return menu
	--- END OF BLOCK #1 ---



end
CoreCutsceneSequencerPanel._on_set_camera_for_film_clip = function (self, clip, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	if clip then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 3-7, warpins: 1 ---
		slot5 = clip

		if clip.metadata(slot4) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 8-37, warpins: 1 ---
			slot5 = clip
			slot5 = clip.metadata(slot4)
			slot8 = event

			clip.metadata(slot4).set_camera(slot4, event.get_id(slot7))

			slot5 = clip
			slot8 = clip
			slot8 = clip.metadata(slot7)

			clip.set_icon_bitmap(slot4, clip.metadata(slot7).camera_icon_image(slot7))

			slot5 = clip
			slot8 = clip
			slot8 = clip.metadata(slot7)

			clip.set_watermark(slot4, clip.metadata(slot7).camera_watermark(slot7))

			slot5 = self

			self._evaluate_frame_at_playhead(slot4)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 38-38, warpins: 3 ---
	return 
	--- END OF BLOCK #1 ---



end
CoreCutsceneSequencerPanel._connect_mouse_events = function (self, component)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-51, warpins: 1 ---
	slot10 = "_on_mouse_left_down"

	component.connect(slot3, component, "EVT_LEFT_DOWN", callback(slot7, self, self))

	slot10 = "_on_mouse_right_up"

	component.connect(slot3, component, "EVT_RIGHT_UP", callback(component, self, self))

	slot10 = "_on_mousewheel"

	component.connect(slot3, component, "EVT_MOUSEWHEEL", callback(component, self, self))

	slot10 = "_on_mouse_motion"

	self.connect(slot3, self, "EVT_SYSTEM_WIDE_MOTION", callback(component, self, self))

	slot10 = "_on_mouse_left_up"
	slot7 = component

	self.connect(slot3, self, "EVT_SYSTEM_WIDE_LEFT_UP", callback(component, self, self))

	return 
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel._propagate_event_to_all_components = function (self, behaviour_func_name, sender, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	local behaviour = self._track_behaviour
	local callback_func = behaviour[behaviour_func_name]

	if callback_func then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-32, warpins: 1 ---
		callback_func(slot7, behaviour, sender, self._ruler)

		slot12 = self

		callback_func(slot7, behaviour, sender, self.audio_track(event))

		slot12 = self
		slot11 = event

		callback_func(slot7, behaviour, sender, self.key_track(event))

		slot10 = self

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 33-40, warpins: 0 ---
		for _, track in ipairs(self.film_tracks(sender)) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 33-38, warpins: 1 ---
			slot16 = event

			callback_func(slot12, behaviour, sender, track)
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 39-40, warpins: 2 ---
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 41-41, warpins: 1 ---
		--- END OF BLOCK #2 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 42-44, warpins: 1 ---
		slot8 = event

		event.skip(slot7)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 45-45, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
CoreCutsceneSequencerPanel._on_mouse_left_down = function (self, sender, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-9, warpins: 1 ---
	slot6 = "EVT_LEFT_DOWN"
	self._previous_mouse_event = EWS.MouseEvent(slot4, EWS)

	if sender ~= self._ruler then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 10-14, warpins: 1 ---
		slot5 = self

		if sender ~= self.audio_track(slot4) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 15-19, warpins: 1 ---
			slot5 = self

			if sender ~= self.key_track(slot4) then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 20-23, warpins: 1 ---
				slot6 = sender

				self.set_active_film_track(slot4, self)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 24-30, warpins: 4 ---
	slot8 = event

	self._propagate_event_to_all_components(slot4, self, "on_mouse_left_down", sender)

	return 
	--- END OF BLOCK #1 ---



end
CoreCutsceneSequencerPanel._on_mouse_left_up = function (self, sender, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-11, warpins: 1 ---
	slot5 = self
	slot3 = self._propagate_event_to_all_components
	slot6 = "on_mouse_left_up"
	slot9 = self
	slot12 = event

	if not self.track_at_screen_position(slot8, event.get_position_on_screen(slot11)) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-12, warpins: 1 ---
		slot7 = sender
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 13-15, warpins: 2 ---
	slot8 = event

	slot3(slot4, slot5, slot6, slot7)

	return 
	--- END OF BLOCK #1 ---



end
CoreCutsceneSequencerPanel._on_mouse_motion = function (self, sender, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-11, warpins: 1 ---
	slot5 = self
	slot3 = self._propagate_event_to_all_components
	slot6 = "on_mouse_motion"
	slot9 = self
	slot12 = event

	if not self.track_at_screen_position(slot8, event.get_position_on_screen(slot11)) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-12, warpins: 1 ---
		slot7 = sender
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 13-15, warpins: 2 ---
	slot8 = event

	slot3(slot4, slot5, slot6, slot7)

	return 
	--- END OF BLOCK #1 ---



end
CoreCutsceneSequencerPanel._on_mouse_right_up = function (self, sender, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if sender == self._ruler then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-5, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 6-10, warpins: 1 ---
		slot5 = self

		if sender == self.audio_track(slot4) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 11-12, warpins: 1 ---
			return 
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 13-17, warpins: 1 ---
			slot5 = self

			if sender == self.key_track(slot4) then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 18-19, warpins: 1 ---
				return 
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 20-24, warpins: 1 ---
				slot7 = event

				self._show_film_track_context_menu(slot4, self, sender)
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 25-25, warpins: 4 ---
	return 
	--- END OF BLOCK #1 ---



end
CoreCutsceneSequencerPanel._on_mousewheel = function (self, track, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot8 = track

	self._send_event(slot4, self, "EVT_TRACK_MOUSEWHEEL", event)

	return 
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel._on_start_box_selection = function (self, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot4 = self._box_selection_ornaments

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-21, warpins: 0 ---
	for _, selection_box in ipairs(slot3) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-19, warpins: 1 ---
		local cursor_position = event.get_position_on_screen(slot8)
		slot11 = cursor_position

		selection_box.set_start_point(event, selection_box)

		slot11 = cursor_position

		selection_box.set_end_point(event, selection_box)

		slot11 = true

		selection_box.set_visible(event, selection_box)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 20-21, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 22-22, warpins: 1 ---
	return 
	--- END OF BLOCK #2 ---



end
CoreCutsceneSequencerPanel._on_drag_box_selection = function (self, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	local all_clips_within_box = {}
	slot5 = self._box_selection_ornaments

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 6-21, warpins: 0 ---
	for _, selection_box in ipairs(slot4) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 6-19, warpins: 1 ---
		slot10 = selection_box
		slot13 = event

		selection_box.set_end_point(slot9, event.get_position_on_screen(slot12))

		slot10 = all_clips_within_box
		slot13 = selection_box
		all_clips_within_box = table.list_add(slot9, selection_box.clips_within_box(slot12))
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 20-21, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 22-25, warpins: 1 ---
	slot3 = ipairs

	if not self._all_clips_within_box_at_last_update then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 26-26, warpins: 1 ---
		slot5 = {}
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 27-28, warpins: 2 ---
	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 29-34, warpins: 0 ---
	for _, clip in slot3(slot4) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 29-32, warpins: 1 ---
		slot11 = false

		clip.set_selected(slot9, clip)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 33-34, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 35-38, warpins: 1 ---
	slot5 = all_clips_within_box

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 39-44, warpins: 0 ---
	for _, clip in ipairs(slot4) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 39-42, warpins: 1 ---
		slot11 = true

		clip.set_selected(slot9, clip)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 43-44, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #6 ---

	FLOW; TARGET BLOCK #7



	-- Decompilation error in this vicinity:
	--- BLOCK #7 45-46, warpins: 1 ---
	self._all_clips_within_box_at_last_update = all_clips_within_box

	return 
	--- END OF BLOCK #7 ---



end
CoreCutsceneSequencerPanel._on_commit_box_selection = function (self, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot4 = self._box_selection_ornaments

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 5-10, warpins: 0 ---
	for _, selection_box in ipairs(slot3) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-8, warpins: 1 ---
		slot10 = false

		selection_box.set_visible(slot8, selection_box)
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 9-10, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 11-17, warpins: 1 ---
	self._all_clips_within_box_at_last_update = nil
	slot5 = "EVT_SELECTION_CHANGED"

	self._send_event(slot3, self)

	return 
	--- END OF BLOCK #2 ---



end
CoreCutsceneSequencerPanel._on_scrolled_area_paint = function (self, data, event)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-19, warpins: 1 ---
	slot10 = 0
	local x_offset = self._scrolled_area.calc_scrolled_position(slot4, Vector3(slot7, 0, 0)).x
	slot7 = x_offset

	self._ruler.set_offset_pixels(self._scrolled_area, self._ruler)

	slot6 = event

	event.skip(self._scrolled_area)

	return 
	--- END OF BLOCK #0 ---



end
CoreCutsceneSequencerPanel.change_track_behaviour = function (self, new_behaviour)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	self._track_behaviour = new_behaviour

	return 
	--- END OF BLOCK #0 ---



end

return 
