slot3 = "CoreAiLayer"

core.import(slot1, core)

slot3 = "CoreHeatmapLayer"

core.import(slot1, core)

slot2 = "lib/units/editor/SpawnEnemyGroupElement"

require(slot1)

slot2 = "lib/units/editor/EnemyPreferedElement"

require(slot1)

slot2 = "lib/units/editor/AIGraphElement"

require(slot1)

slot2 = "lib/units/editor/WaypointElement"

require(slot1)

slot2 = "lib/units/editor/SpawnCivilianElement"

require(slot1)

slot2 = "lib/units/editor/SpawnCivilianGroupElement"

require(slot1)

slot2 = "lib/units/editor/LookAtTrigger"

require(slot1)

slot2 = "lib/units/editor/MissionEnd"

require(slot1)

slot2 = "lib/units/editor/ObjectiveElement"

require(slot1)

slot2 = "lib/units/editor/DialogueElement"

require(slot1)

slot2 = "lib/units/editor/HintElement"

require(slot1)

slot2 = "lib/units/editor/AiGlobalEventElement"

require(slot1)

slot2 = "lib/units/editor/EquipmentElement"

require(slot1)

slot2 = "lib/units/editor/PlayerStateUnitElement"

require(slot1)

slot2 = "lib/units/editor/KillzoneElement"

require(slot1)

slot2 = "lib/units/editor/SpecialObjectiveElement"

require(slot1)

slot2 = "lib/units/editor/SpecialObjectiveTriggerElement"

require(slot1)

slot2 = "lib/units/editor/SpecialObjectiveGroupElement"

require(slot1)

slot2 = "lib/units/editor/PlayerStateTriggerUnitElement"

require(slot1)

slot2 = "lib/units/editor/DifficultyElement"

require(slot1)

slot2 = "lib/units/editor/BlurZoneElement"

require(slot1)

slot2 = "lib/units/editor/AIRemoveElement"

require(slot1)

slot2 = "lib/units/editor/TeammateCommentElement"

require(slot1)

slot2 = "lib/units/editor/WhisperStateElement"

require(slot1)

slot2 = "lib/units/editor/AwardAchievmentElement"

require(slot1)

slot2 = "lib/units/editor/PointOfNoReturnElement"

require(slot1)

slot2 = "lib/units/editor/FadeToBlackElement"

require(slot1)

slot2 = "lib/units/editor/FeedbackElement"

require(slot1)

slot2 = "lib/units/editor/ExplosionElement"

require(slot1)

slot2 = "lib/units/editor/FilterElement"

require(slot1)

slot2 = "lib/units/editor/DisableUnitElement"

require(slot1)

slot2 = "lib/units/editor/EnableUnitElement"

require(slot1)

slot2 = "lib/units/editor/SmokeGrenadeElement"

require(slot1)

slot2 = "lib/units/editor/SetOutlineElement"

require(slot1)

slot2 = "lib/units/editor/ExplosionDamageElement"

require(slot1)

slot2 = "lib/units/editor/BlackscreenElement"

require(slot1)

slot2 = "lib/units/editor/BlackscreenVariantElement"

require(slot1)

slot2 = "lib/units/editor/AIAttentionElement"

require(slot1)

slot2 = "lib/units/editor/AIAreaElement"

require(slot1)

slot2 = "lib/units/editor/CarryElement"

require(slot1)

slot2 = "lib/units/editor/LootBagElement"

require(slot1)

slot2 = "lib/units/editor/JobValueElement"

require(slot1)

slot2 = "lib/units/editor/NavObstacleElement"

require(slot1)

slot2 = "lib/units/editor/SpawnDeployableElement"

require(slot1)

slot2 = "lib/units/editor/FleePointElement"

require(slot1)

slot2 = "lib/units/editor/InstigatorElement"

require(slot1)

slot2 = "lib/units/editor/InstigatorRuleElement"

require(slot1)

slot2 = "lib/units/editor/PickupElement"

require(slot1)

slot2 = "lib/units/editor/LaserTriggerElement"

require(slot1)

slot2 = "lib/units/editor/SpawnGrenadeElement"

require(slot1)

slot2 = "lib/units/editor/SpotterElement"

require(slot1)

slot2 = "lib/units/editor/CharacterTeamElement"

require(slot1)

slot2 = "lib/units/editor/TeamRelationElement"

require(slot1)

slot2 = "lib/units/editor/SlowMotionElement"

require(slot1)

slot2 = "lib/units/editor/InteractionElement"

require(slot1)

slot2 = "lib/units/editor/CharacterSequenceElement"

require(slot1)

slot2 = "lib/units/editor/ExperienceElement"

require(slot1)

slot2 = "lib/units/editor/ModifyPlayerElement"

require(slot1)

slot2 = "lib/units/editor/AreaMinPoliceForceUnitElement"

require(slot1)

slot2 = "lib/units/editor/TeleportPlayerElement"

require(slot1)

slot2 = "lib/units/editor/StatisticsElement"

require(slot1)

slot2 = "lib/units/editor/StatisticsJobsElement"

require(slot1)

slot2 = "lib/units/editor/GameEventElement"

require(slot1)

slot2 = "lib/units/editor/VariableElement"

require(slot1)

slot2 = "lib/units/editor/TeamAICommandsElement"

require(slot1)

slot2 = "lib/units/editor/EnableSoundEnvironmentElement"

require(slot1)

slot2 = "lib/units/editor/SoundSwitchElement"

require(slot1)

slot2 = "lib/units/editor/SpawnPlayerElement"

require(slot1)

slot2 = "lib/units/editor/EnemyDummyTrigger"

require(slot1)

slot2 = "lib/units/editor/SpawnEnemyElement"

require(slot1)

slot2 = "lib/units/editor/MotionpathMarkerElement"

require(slot1)

slot2 = "lib/units/editor/VehicleTriggerUnitElement"

require(slot1)

slot2 = "lib/units/editor/VehicleOperatorUnitElement"

require(slot1)

slot2 = "lib/units/editor/SpawnVehicleElement"

require(slot1)

slot2 = "lib/units/editor/WorldOperatorUnitElement"

require(slot1)

slot2 = "lib/units/editor/GlobalStateOperatorElement"

require(slot1)

slot2 = "lib/units/editor/GlobalStateTriggerElement"

require(slot1)

slot2 = "lib/units/editor/GlobalStateFilterElement"

require(slot1)

slot2 = "lib/units/editor/ExecLuaOperatorElement"

require(slot1)

slot2 = "lib/units/editor/NavLinkElement"

require(slot1)

slot2 = "lib/units/editor/DropPointGroupElement"

require(slot1)

slot2 = "lib/units/editor/DropPointElement"

require(slot1)

slot2 = "lib/units/editor/MapChangeFloorElement"

require(slot1)

slot2 = "lib/units/editor/MetalDetectorElement"

require(slot1)

slot2 = "lib/units/editor/DropinStateElement"

require(slot1)

slot2 = "lib/units/editor/EnvironmentOperatorElement"

require(slot1)

slot2 = "lib/units/editor/EnvironmentEffectElement"

require(slot1)

slot2 = "lib/units/editor/EnvironmentAreaOperatorElement"

require(slot1)

slot2 = "lib/units/editor/NavigationStitcherUnitElement"

require(slot1)

slot2 = "lib/units/editor/NavigationStitcherOperatorUnitElement"

require(slot1)

slot2 = "lib/units/editor/BarrageElement"

require(slot1)

slot2 = "lib/units/editor/InvulnerableElement"

require(slot1)

slot2 = "lib/units/editor/CharacterDamageTriggerElement"

require(slot1)

slot2 = "lib/units/editor/EscortElement"

require(slot1)

slot2 = "lib/utils/dev/tools/InventoryIconCreator"

require(slot1)

if not WorldEditor then
	slot2 = CoreEditor
	slot0 = class(slot1)
end

WorldEditor = slot0
function WorldEditor:init(game_state_machine)
	slot5 = game_state_machine

	WorldEditor.super.init(slot3, self)

	slot5 = true

	Network.set_multiplayer(slot3, Network)

	slot4 = managers.network

	managers.network.host_game(slot3)

	self._tool_updators = {}

	return 
end
function WorldEditor:update(...)
	slot3 = self

	WorldEditor.super.update(slot2, ...)

	slot3 = self._tool_updators

	for name, updator in pairs(slot2) do
		updator(...)
	end

	return 
end
function WorldEditor:add_tool_updator(name, updator)
	self._tool_updators[name] = updator

	return 
end
function WorldEditor:remove_tool_updator(name)
	self._tool_updators[name] = nil

	return 
end
function WorldEditor:_init_mission_difficulties()
	self._mission_difficulties = {
		{
			"difficulty_1",
			"Normal"
		},
		{
			"difficulty_2",
			"Hard"
		},
		{
			"difficulty_3",
			"Very Hard"
		},
		{
			"difficulty_4",
			"Overkill"
		}
	}
	self._mission_difficulty = Global.DEFAULT_DIFFICULTY

	return 
end
function WorldEditor:_init_mission_players()
	self._mission_players = {
		1,
		2,
		3,
		4
	}
	self._mission_player = 1

	return 
end
function WorldEditor:_project_init_layer_classes()
	slot5 = CoreAiLayer.AiLayer

	self.add_layer(slot2, self, "Ai")

	slot5 = CoreHeatmapLayer.HeatmapLayer

	self.add_layer(slot2, self, "Heatmap")

	return 
end
function WorldEditor:_project_init_slot_masks()
	self._go_through_units_before_simulaton_mask = self._go_through_units_before_simulaton_mask + 15

	return 
end
function WorldEditor:project_prestart_up(with_mission)
	slot4 = managers.navigation

	managers.navigation.on_simulation_started(slot3)

	slot4 = managers.groupai

	managers.groupai.on_simulation_started(slot3)

	slot4 = managers.enemy

	managers.enemy.on_simulation_started(slot3)

	return 
end
function WorldEditor:project_run_simulation(with_mission)
	slot5 = self._mission_difficulty or Global.DEFAULT_DIFFICULTY

	tweak_data.set_difficulty(slot3, tweak_data)

	slot4 = managers.network

	managers.network.host_game(slot3)

	slot4 = managers.player

	managers.player.on_simulation_started(slot3)

	slot4 = managers.vehicle

	managers.vehicle.on_simulation_started(slot3)

	slot4 = managers.motion_path

	managers.motion_path.on_simulation_started(slot3)

	slot5 = tweak_data.music.default.start

	managers.music.post_event(slot3, managers.music)

	slot4 = managers.mission

	managers.mission.on_simulation_started(slot3)

	if not with_mission then
		slot5 = "standard"

		managers.player.set_player_state(slot3, managers.player)

		slot4 = managers.groupai
		slot5 = false

		managers.groupai.state(slot3).set_AI_enabled(slot3, managers.groupai.state(slot3))

		slot6 = {
			position = self._vp.camera(slot8).position(slot8),
			rotation = Rotation.yaw_pitch_roll(slot8, Rotation, self._vp.camera(slot11).rotation(slot11).yaw(slot11), 0)
		}
		slot9 = self._vp
		slot9 = self._vp.camera(slot8)
		slot12 = self._vp
		slot12 = self._vp.camera(slot11)
		slot12 = self._vp.camera(slot11).rotation(slot11)
		slot12 = 0

		managers.network.register_spawn_point(slot3, managers.network, -1)
	end

	slot4 = managers.network
	slot5 = true

	managers.network.session(slot3).on_load_complete(slot3, managers.network.session(slot3))

	slot4 = managers.network
	slot4 = managers.network.session(slot3)

	managers.network.session(slot3).spawn_players(slot3)

	slot4 = managers.mission
	slot8 = "Level Settings"
	slot7 = self.layer(slot6, self)

	managers.mission.set_mission_filter(slot3, self.layer(slot6, self).get_mission_filter(slot6))

	slot5 = "Level Settings"
	slot5 = "simulation_level_id"
	local level_id = self.layer(slot3, self).get_setting(slot3, self.layer(slot3, self))
	slot6 = level_id

	managers.game_play_central.setup_effects(self.layer(slot3, self), managers.game_play_central)

	slot5 = managers.game_play_central

	managers.game_play_central.start_heist_timer(self.layer(slot3, self))

	return 
end
function WorldEditor:_project_check_unit(unit)
	return 
end
function WorldEditor:project_stop_simulation()
	slot3 = managers.hud

	managers.hud.on_simulation_ended(slot2)

	slot3 = managers.hud

	managers.hud.clear_waypoints(slot2)

	slot3 = managers.network

	managers.network.unregister_all_spawn_points(slot2)

	slot4 = "menu_pause"

	managers.menu.close_menu(slot2, managers.menu)

	slot3 = managers.objectives

	managers.objectives.reset(slot2)

	slot3 = setup
	slot3 = setup.freeflight(slot2)

	setup.freeflight(slot2).disable(slot2)

	slot3 = managers.groupai

	managers.groupai.on_simulation_ended(slot2)

	slot3 = managers.enemy

	managers.enemy.on_simulation_ended(slot2)

	slot3 = managers.navigation

	managers.navigation.on_simulation_ended(slot2)

	slot3 = managers.dialog

	managers.dialog.on_simulation_ended(slot2)

	slot3 = managers.player

	managers.player.soft_reset(slot2)

	slot3 = managers.vehicle

	managers.vehicle.on_simulation_ended(slot2)

	slot3 = managers.statistics

	managers.statistics.stop_session(slot2)

	slot4 = 0

	managers.environment_controller.set_all_blurzones(slot2, managers.environment_controller)

	slot3 = managers.music

	managers.music.stop(slot2)

	slot3 = managers.game_play_central

	managers.game_play_central.on_simulation_ended(slot2)

	slot3 = managers.criminals

	managers.criminals.on_simulation_ended(slot2)

	slot3 = managers.loot

	managers.loot.on_simulation_ended(slot2)

	slot3 = managers.motion_path

	managers.motion_path.on_simulation_ended(slot2)

	slot3 = managers.fire

	managers.fire.on_simulation_ended(slot2)

	slot3 = managers.dot

	managers.dot.on_simulation_ended(slot2)

	slot3 = managers.global_state

	managers.global_state.on_simulation_ended(slot2)

	slot3 = managers.voice_over

	managers.voice_over.on_simulation_ended(slot2)

	slot3 = managers.barrage

	managers.barrage.on_simulation_ended(slot2)

	slot3 = managers.queued_tasks

	managers.queued_tasks.on_simulation_ended(slot2)

	slot3 = managers.drop_loot

	managers.drop_loot.on_simulation_ended(slot2)

	slot3 = managers.raid_job

	managers.raid_job.on_simulation_ended(slot2)

	slot3 = managers.notification

	managers.notification.on_simulation_ended(slot2)

	slot3 = managers.lootdrop

	managers.lootdrop.on_simulation_ended(slot2)

	return 
end
function WorldEditor:project_clear_units()
	slot3 = managers.groupai
	slot4 = false

	managers.groupai.state(slot2).set_AI_enabled(slot2, managers.groupai.state(slot2))

	slot4 = "all"
	slot28 = 25
	local units = World.find_units_quick(slot2, World, World.make_slot_mask(slot6, World, 0, 2, 4, 5, 6, 8, 9, 11, 12, 13, 14, 15, 16, 17, 18, 20, 21, 22, 23, 24))
	slot4 = units

	for _, unit in ipairs(World) do
		slot10 = unit
		local layer = self.unit_in_layer(slot8, self)

		if layer then
			slot11 = unit

			layer.delete_unit(slot9, layer)
		else
			slot11 = unit

			World.delete_unit(slot9, World)
		end
	end

	return 
end
function WorldEditor:project_clear_layers()
	return 
end
function WorldEditor:project_recreate_layers()
	return 
end
function WorldEditor:_project_add_left_upper_toolbar_tool()
	slot8 = "world_editor/icon_creator_16x16.png"

	self._left_upper_toolbar.add_tool(slot2, self._left_upper_toolbar, "TB_INVENTORY_ICON_CREATOR", "Icon Creator", CoreEWS.image_path(slot7))

	slot10 = "_open_inventory_icon_creator"
	slot7 = nil

	self._left_upper_toolbar.connect(slot2, self._left_upper_toolbar, "TB_INVENTORY_ICON_CREATOR", "EVT_COMMAND_MENU_SELECTED", callback("Material Editor", self, self))

	return 
end
function WorldEditor:_open_inventory_icon_creator()
	if not self._inventory_icon_creator then
		slot3 = InventoryIconCreator
		slot1 = InventoryIconCreator.new(slot2)
	end

	self._inventory_icon_creator = slot1
	slot3 = self._inventory_icon_creator

	self._inventory_icon_creator.show_ews(slot2)

	return 
end

return 
