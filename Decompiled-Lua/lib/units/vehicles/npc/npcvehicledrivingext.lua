-- Decompilation Error: _run_step(_unwarp_expressions, node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- Decompilation Error: _glue_flows(node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.

-- Decompilation error in this vicinity:
--- BLOCK #0 1-30, warpins: 1 ---
slot2 = "lib/units/vehicles/npc/NpcBaseVehicleState"

require(slot1)

slot2 = "lib/units/vehicles/npc/NpcVehicleStatePursuit"

require(slot1)

slot2 = "lib/units/vehicles/npc/NpcVehicleStateInactive"

require(slot1)

slot2 = "lib/units/vehicles/npc/NpcVehicleStatePlayerProximity"

require(slot1)

slot2 = "lib/units/vehicles/npc/NpcVehicleStateBroken"

require(slot1)

slot2 = "lib/units/vehicles/npc/NpcVehicleStateManeuver"

require(slot1)

slot2 = "lib/units/vehicles/npc/NpcVehicleStateManeuverBackLeft"

require(slot1)

slot2 = "lib/units/vehicles/npc/NpcVehicleStateManeuverBackRight"

require(slot1)

slot2 = "lib/units/vehicles/npc/NpcVehicleStateManeuverUTurn"

require(slot1)

slot0 = NpcVehicleDrivingExt or class()
NpcVehicleDrivingExt = slot0
NpcVehicleDrivingExt.STATE_INACTIVE = "inactive"
NpcVehicleDrivingExt.STATE_PURSUIT = "pursuit"
NpcVehicleDrivingExt.STATE_PLAYER_PROXIMITY = "player_proximity"
NpcVehicleDrivingExt.STATE_BROKEN = "broken"
NpcVehicleDrivingExt.STATE_MANEUVER = "maneuver"
NpcVehicleDrivingExt.STATE_MANEUVER_BACK_LEFT = "maneuver_back_left"
NpcVehicleDrivingExt.STATE_MANEUVER_BACK_RIGHT = "maneuver_back_right"
NpcVehicleDrivingExt.STATE_MANEUVER_U_TURN = "maneuver_u_turn"
NpcVehicleDrivingExt.DRIVE_CONTROLS_GEAR_REVERSE = 0
NpcVehicleDrivingExt.DRIVE_CONTROLS_GEAR_NEUTRAL = 1
NpcVehicleDrivingExt.DRIVE_CONTROLS_GEAR_FIRST = 2
NpcVehicleDrivingExt.DRIVE_CONTROLS_STEER_STRAIGHT = 0
NpcVehicleDrivingExt.DRIVE_CONTROLS_STEER_FULL_LEFT = 1
NpcVehicleDrivingExt.DRIVE_CONTROLS_STEER_FULL_RIGHT = -1
function NpcVehicleDrivingExt:init(unit)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-40, warpins: 1 ---
	self._unit = unit
	slot7 = "npc_vehicle_driving"
	slot6 = true

	self._unit.set_extension_update_enabled(slot3, self._unit, Idstring(true))

	slot4 = self._unit
	self._vehicle = self._unit.vehicle(slot3)
	self._last_checkpoint_reached = false
	self._drive_controls = {}
	self._drive_controls.accelerate = {
		acceleration = 1,
		brake = 0,
		handbrake = 0
	}
	self._drive_controls.brake = {
		acceleration = 0,
		brake = 1,
		handbrake = 0
	}
	self._drive_controls.handbrake = {
		acceleration = 0,
		brake = 1,
		handbrake = 1
	}
	self._current_drive_controls = "accelerate"
	self._is_chasing = false
	slot4 = self

	self._init_states()

	slot4 = self

	self._debug_show()

	if self._vehicle == nil then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 41-45, warpins: 1 ---
		slot5 = "[DRIVING] unit doesn't contain a vehicle"

		Application.debug(slot3, Application)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 46-56, warpins: 2 ---
	slot5 = "NpcVehicleDrivingExt:init( unit )"

	Application.debug(slot3, Application)

	slot4 = self._unit

	if not self._unit.vehicle_driving(slot3) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 57-62, warpins: 1 ---
		slot5 = "NpcVehicleDrivingExt must be specified after the VehicleDrivingExt in the unit file"

		Application.error(slot3, Application)

		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 63-73, warpins: 2 ---
	self._target_unit = nil
	slot4 = self._unit
	slot5 = false

	self._unit.vehicle_driving(slot3).set_interaction_allowed(slot3, self._unit.vehicle_driving(slot3))

	return 
	--- END OF BLOCK #2 ---



end
function NpcVehicleDrivingExt:activate()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-8, warpins: 1 ---
	slot3 = self._current_state

	if self._current_state.name(slot2) ~= NpcVehicleDrivingExt.STATE_BROKEN then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 9-16, warpins: 1 ---
		slot4 = NpcVehicleDrivingExt.STATE_PURSUIT

		self.set_state(slot2, self)

		slot3 = self

		self.start(slot2)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 17-17, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:deactivate()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-11, warpins: 1 ---
	slot4 = NpcVehicleDrivingExt.STATE_INACTIVE

	self.set_state(slot2, self)

	self._current_drive_controls = "handbrake"
	slot3 = self

	self.stop(slot2)

	return 
	--- END OF BLOCK #0 ---



end
function NpcVehicleDrivingExt:is_active()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot3 = self._vehicle

	return self._vehicle.is_active(slot2)
	--- END OF BLOCK #0 ---



end
function NpcVehicleDrivingExt:is_chasing()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	return self._is_chasing
	--- END OF BLOCK #0 ---



end
function NpcVehicleDrivingExt:on_vehicle_death()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-8, warpins: 1 ---
	slot3 = self._current_state

	if self._current_state.name(slot2) == NpcVehicleDrivingExt.STATE_BROKEN then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 9-9, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 10-29, warpins: 2 ---
	slot4 = NpcVehicleDrivingExt.STATE_BROKEN

	self.set_state(slot2, self)

	self._current_drive_controls = "handbrake"
	slot3 = self

	self.stop(slot2)

	slot3 = self._unit
	slot4 = "turret_switch_off"

	if self._unit.damage(slot2).has_sequence(slot2, self._unit.damage(slot2)) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 30-37, warpins: 1 ---
		slot3 = self._unit
		slot4 = "turret_switch_off"

		self._unit.damage(slot2).run_sequence_simple(slot2, self._unit.damage(slot2))
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 38-38, warpins: 2 ---
	return 
	--- END OF BLOCK #2 ---



end
function NpcVehicleDrivingExt:start()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-10, warpins: 1 ---
	slot3 = self

	self._start(slot2)

	slot3 = managers.network

	if managers.network.session(slot2) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 11-16, warpins: 1 ---
		slot3 = Network

		if Network.is_server(slot2) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 17-28, warpins: 1 ---
			slot3 = managers.network
			slot7 = nil

			managers.network.session(slot2).send_to_peers_synched(slot2, managers.network.session(slot2), "sync_vehicle_driving", "start", self._unit)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 29-29, warpins: 3 ---
	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:sync_start()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot3 = self

	self._start(slot2)

	return 
	--- END OF BLOCK #0 ---



end
function NpcVehicleDrivingExt:_start()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._vehicle then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-8, warpins: 1 ---
		slot3 = self

		if not self.is_active(slot2) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 9-55, warpins: 1 ---
			slot3 = self._unit
			slot4 = "driving"

			self._unit.damage(slot2).run_sequence_simple(slot2, self._unit.damage(slot2))

			slot4 = true

			self._vehicle.set_active(slot2, self._vehicle)

			slot10 = 2

			self.set_input(slot2, self, 0, 0, 0, 0, false, true)

			self._drive_controls = {}
			self._drive_controls.accelerate = {
				acceleration = 1,
				brake = 0,
				handbrake = 0
			}
			self._drive_controls.brake = {
				acceleration = 0,
				brake = 1,
				handbrake = 0
			}
			self._drive_controls.handbrake = {
				acceleration = 0,
				brake = 1,
				handbrake = 1
			}
			self._current_drive_controls = "accelerate"
			self._next_checkpoint_distance = {
				{
					v_min = 30,
					distance = 1200,
					relative_angle_min = 30,
					relative_angle_max = 60,
					v_max = 40
				},
				{
					v_min = 40,
					distance = 1500,
					relative_angle_min = 30,
					relative_angle_max = 90,
					v_max = 60
				}
			}
			self._last_checkpoint_reached = false
			slot3 = self

			self._debug_show()
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 56-57, warpins: 2 ---
		self._is_chasing = true
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 58-58, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:stop()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-10, warpins: 1 ---
	slot3 = self

	self._stop(slot2)

	slot3 = managers.network

	if managers.network.session(slot2) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 11-16, warpins: 1 ---
		slot3 = Network

		if Network.is_server(slot2) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 17-28, warpins: 1 ---
			slot3 = managers.network
			slot7 = nil

			managers.network.session(slot2).send_to_peers_synched(slot2, managers.network.session(slot2), "sync_vehicle_driving", "stop", self._unit)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 29-29, warpins: 3 ---
	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:sync_stop()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	slot3 = self

	self._stop(slot2)

	return 
	--- END OF BLOCK #0 ---



end
function NpcVehicleDrivingExt:_stop()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._vehicle then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-8, warpins: 1 ---
		slot3 = self

		if self.is_active(slot2) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 9-20, warpins: 1 ---
			self._is_chasing = false
			slot10 = 2

			self.set_input(slot2, self, 0, 0, 0, 0, false, false)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 21-21, warpins: 3 ---
	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:update(unit, t, dt)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-7, warpins: 1 ---
	slot6 = managers.motion_path

	if managers.motion_path.npc_vehicle_debug_output_enabled(slot5) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-11, warpins: 1 ---
		slot6 = self

		self._display_debug_info(slot5)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-14, warpins: 1 ---
		if self._debug and self._debug.ws then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 19-24, warpins: 1 ---
			slot7 = ""

			self._debug.info.set_text(slot5, self._debug.info)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 25-27, warpins: 4 ---
	if self._current_state then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 28-35, warpins: 1 ---
		slot6 = self._current_state

		if self._current_state.name(slot5) ~= NpcBaseVehicleState.STATE_BROKEN then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 36-54, warpins: 1 ---
			slot7 = self

			self._current_state.change_state(slot5, self._current_state)

			slot9 = dt

			self._current_state.handle_stuck_vehicle(slot5, self._current_state, self, t)

			slot9 = dt

			self._current_state.update(slot5, self._current_state, self, t)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 55-55, warpins: 3 ---
	return 
	--- END OF BLOCK #2 ---



end
function NpcVehicleDrivingExt:_display_debug_info()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._debug and self._debug.ws and self._debug.info then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-30, warpins: 1 ---
		local nav_paths = {}
		nav_paths.unit_id = ""
		nav_paths.unit_name = ""
		nav_paths.current_state = ""
		nav_paths.cop_path = ""
		nav_paths.cop_target_path = ""
		nav_paths.distance_to_player = 0
		nav_paths.ai_cost = {
			cost = 0,
			fps = 0
		}

		if self._debug.nav_paths then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 31-35, warpins: 1 ---
			if not self._debug.nav_paths.unit_id then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 36-36, warpins: 1 ---
				slot2 = ""
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 37-42, warpins: 2 ---
			nav_paths.unit_id = slot2

			if not self._debug.nav_paths.unit_name then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 43-43, warpins: 1 ---
				slot2 = ""
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #1 ---

			FLOW; TARGET BLOCK #2



			-- Decompilation error in this vicinity:
			--- BLOCK #2 44-49, warpins: 2 ---
			nav_paths.unit_name = slot2

			if not self._debug.nav_paths.cop_path then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 50-50, warpins: 1 ---
				slot2 = ""
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #2 ---

			FLOW; TARGET BLOCK #3



			-- Decompilation error in this vicinity:
			--- BLOCK #3 51-56, warpins: 2 ---
			nav_paths.cop_path = slot2

			if not self._debug.nav_paths.cop_target_path then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 57-57, warpins: 1 ---
				slot2 = ""
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #3 ---

			FLOW; TARGET BLOCK #4



			-- Decompilation error in this vicinity:
			--- BLOCK #4 58-63, warpins: 2 ---
			nav_paths.cop_target_path = slot2

			if not self._debug.nav_paths.distance_to_player then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 64-64, warpins: 1 ---
				slot2 = 0
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #4 ---

			FLOW; TARGET BLOCK #5



			-- Decompilation error in this vicinity:
			--- BLOCK #5 65-70, warpins: 2 ---
			nav_paths.distance_to_player = slot2

			if not self._debug.nav_paths.ai_cost then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 71-71, warpins: 1 ---
				slot2 = {
					cost = 0,
					fps = 0
				}
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #5 ---

			FLOW; TARGET BLOCK #6



			-- Decompilation error in this vicinity:
			--- BLOCK #6 72-72, warpins: 2 ---
			nav_paths.ai_cost = slot2
			--- END OF BLOCK #6 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 73-75, warpins: 2 ---
		if self._current_state then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 76-81, warpins: 1 ---
			slot4 = self._current_state

			if not self._current_state.name(slot3) then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 82-82, warpins: 1 ---
				slot2 = "n/a"
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 83-83, warpins: 2 ---
			nav_paths.current_state = slot2
			--- END OF BLOCK #1 ---



		end

		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 84-96, warpins: 2 ---
		local vehicle_state = self._vehicle.get_state(slot3)
		local cop_vehicle_speed = vehicle_state.get_speed(self._vehicle) * 3.6
		slot6 = self
		local player_vehicle_speed = self._get_player_speed(vehicle_state)

		if not player_vehicle_speed then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 97-97, warpins: 1 ---
			player_vehicle_speed = 0
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #2 ---

		FLOW; TARGET BLOCK #3



		-- Decompilation error in this vicinity:
		--- BLOCK #3 98-119, warpins: 2 ---
		slot7 = self._debug.info
		slot21 = nav_paths.ai_cost.fps

		self._debug.info.set_text(slot6, string.format(slot9, [[
----------------------
Cop unit:  %s - %s
Cop state:  %s
Player_speed:  %.2f km/h
Cop speed:  %.2f km/h
Drive controls:  %s
Cop on path:  %s
Cop targeting path:  %s
Distance to player:  %.2f m
AI cost:  %.2f ms ( %.2f %% of fps)]], nav_paths.unit_id, nav_paths.unit_name, nav_paths.current_state, player_vehicle_speed, cop_vehicle_speed, self._current_drive_controls, nav_paths.cop_path, nav_paths.cop_target_path, nav_paths.distance_to_player, nav_paths.ai_cost.cost))
		--- END OF BLOCK #3 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 120-120, warpins: 4 ---
	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:set_target_unit(unit)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	self._target_unit = unit

	return 
	--- END OF BLOCK #0 ---



end
function NpcVehicleDrivingExt:_get_target_unit()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	slot3 = managers.vehicle
	local target_unit = managers.vehicle.find_npc_vehicle_target(slot2)

	return target_unit
	--- END OF BLOCK #0 ---



end
function NpcVehicleDrivingExt:_choose_target_path_direction(player_path, target_marker)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	slot5 = self
	local player_unit = self._get_target_unit(slot4)

	if not player_unit or not player_path then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-8, warpins: 2 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 9-16, warpins: 2 ---
	slot6 = player_unit
	local player_position = player_unit.position(slot5)
	local player_point_id = nil
	slot8 = player_path.marker_checkpoints

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 17-21, warpins: 0 ---
	for idx, marker_id in pairs(slot7) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 17-18, warpins: 1 ---
		if marker_id == target_marker then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 19-19, warpins: 1 ---
			player_point_id = idx
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 20-21, warpins: 3 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 22-23, warpins: 1 ---
	if not player_point_id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 24-25, warpins: 1 ---
		return "fwd"
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 26-37, warpins: 2 ---
	local player_point_bck_id = #player_path.points - player_point_id + 1
	local point_forward = player_path.points[player_point_id + 1]
	local point_backward = player_path.points_bck[player_point_bck_id + 1]

	if not point_forward then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 38-40, warpins: 1 ---
		return "bck"
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 41-42, warpins: 1 ---
		if not point_backward then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 43-45, warpins: 1 ---
			return "fwd"
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 46-47, warpins: 1 ---
			if not point_forward and not point_backward then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 50-55, warpins: 1 ---
				slot12 = "Unable to choose path direction."

				Application.error(slot10, Application)

				return 
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 56-68, warpins: 5 ---
	local distance_forward = player_position - point_forward.point.length(slot10)
	slot12 = player_position - point_backward.point
	local distance_backward = player_position - point_backward.point.length(player_position - point_forward.point)
	local retval = nil

	if distance_forward <= distance_backward then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 69-70, warpins: 1 ---
		retval = "fwd"
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 71-71, warpins: 1 ---
		retval = "bck"
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 72-72, warpins: 2 ---
	return retval
	--- END OF BLOCK #6 ---



end
function NpcVehicleDrivingExt:drive_to_point(cop_path, unit_and_pos, dt)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if not self._current_state then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-20, warpins: 1 ---
		slot11 = self._unit
		slot9 = self._unit.unit_data(self._unit).name_id

		Application.error(slot5, Application, "Npc vehicle has no state: ", self._unit.unit_data(self._unit.unit_data(self._unit).name_id).unit_id)

		return false
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 21-26, warpins: 2 ---
	slot6 = self._current_state

	if self._current_state.is_maneuvering(slot5) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 27-28, warpins: 1 ---
		return false
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 29-40, warpins: 2 ---
	local profiler_name = "NpcVehicleDrivingExt:drive_to_point" .. unit_and_pos.unit
	slot8 = profiler_name
	local profiler_id = Profiler.start(slot6, Profiler)
	local cop_points = nil

	if not unit_and_pos.direction or unit_and_pos.direction == "fwd" then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 44-45, warpins: 2 ---
		cop_points = cop_path.points
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 46-46, warpins: 1 ---
		cop_points = cop_path.points_bck
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 47-55, warpins: 2 ---
	local target_path = nil
	local player_unit = self._get_target_unit(slot9)
	slot11 = player_unit
	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 63-76, warpins: 2 ---
	slot12 = self._unit.position(slot13)
	slot15 = player_unit
	local astar_path = managers.motion_path.find_next_path(slot10, managers.motion_path, player_unit.position(self._unit))

	if astar_path then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 77-78, warpins: 1 ---
		target_path = astar_path
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 79-83, warpins: 1 ---
		slot12 = "Astar path not found."

		print(slot11)

		return false
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 84-91, warpins: 2 ---
	slot12 = self._unit
	local debug_unit_name = self._unit.unit_data(slot11).name_id

	if self._debug then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 92-95, warpins: 1 ---
		if not self._debug.nav_paths then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 96-98, warpins: 1 ---
			self._debug.nav_paths = {}
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 99-113, warpins: 2 ---
		self._debug.nav_paths.unit_name = debug_unit_name
		self._debug.nav_paths.unit_id = unit_and_pos.unit
		self._debug.nav_paths.cop_path = cop_path.id
		self._debug.nav_paths.cop_target_path = target_path.id
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 114-139, warpins: 2 ---
	slot15 = unit_and_pos
	local cop_position_info = self.calc_cop_position_info(slot12, self, cop_points)
	slot15 = cop_position_info.target_spin
	local target_steering = self._current_state.calc_steering(self, self._current_state)
	slot16 = cop_position_info.angle_to_target
	local distance_threshold = self._current_state.calc_distance_threshold(self._current_state, self._current_state)
	slot22 = distance_threshold
	local skip_checkpoint = self._choose_next_checkpoint(self._current_state, self, cop_path, cop_points, target_path, unit_and_pos, cop_position_info)

	if not skip_checkpoint then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 140-163, warpins: 1 ---
		slot19 = cop_position_info.angle_to_target

		self._current_state.handle_hard_turn(slot16, self._current_state, self)

		slot19 = unit_and_pos
		local speed_limit = self._current_state.calc_speed_limit(slot16, self._current_state, cop_path)
		slot20 = target_steering
		local controls_override = self._current_state.evasion_maneuvers(self._current_state, self._current_state, self)
		slot22 = controls_override

		self._drive(self._current_state, self, target_steering, speed_limit)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #6 ---

	FLOW; TARGET BLOCK #7



	-- Decompilation error in this vicinity:
	--- BLOCK #7 164-178, warpins: 2 ---
	slot18 = profiler_id

	Profiler.stop(slot16, Profiler)

	slot18 = profiler_name
	local profiler_time = Profiler.counter_time(slot16, Profiler)
	local percentage_of_current_fps = (100 * profiler_time) / dt

	if self._debug then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 179-185, warpins: 1 ---
		self._debug.nav_paths.ai_cost = {
			cost = profiler_time * 1000,
			fps = percentage_of_current_fps
		}
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #7 ---

	FLOW; TARGET BLOCK #8



	-- Decompilation error in this vicinity:
	--- BLOCK #8 186-186, warpins: 2 ---
	return skip_checkpoint
	--- END OF BLOCK #8 ---



end
function NpcVehicleDrivingExt:calc_cop_position_info(cop_points, unit_and_pos)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-59, warpins: 1 ---
	local target_position = cop_points[unit_and_pos.target_checkpoint].point
	slot6 = self._unit
	local unit_position = self._unit.position(slot5)
	local target_direction = target_position - unit_position
	local target_direction_nrm = target_direction.normalized(slot7)
	local target_distance = target_direction.length(target_direction)
	slot10 = self._unit
	slot10 = self._unit.rotation(target_direction)
	local vehicle_fwd_vector = self._unit.rotation(target_direction).y(target_direction).normalized(target_direction)
	slot12 = target_direction
	local angle_to_target = vehicle_fwd_vector.angle(self._unit.rotation(target_direction).y(target_direction), vehicle_fwd_vector)
	slot13 = 360
	local target_direction_360 = math.mod(vehicle_fwd_vector, 360 + target_direction.to_polar(360).spin)
	slot15 = vehicle_fwd_vector
	slot14 = 360
	local vehicle_fwd_vector_360 = math.mod(360 + target_direction.to_polar(360).spin, 360 + vehicle_fwd_vector.to_polar(target_direction).spin)
	slot15 = 360
	local target_spin_relative_to_vehicle = math.mod(360 + vehicle_fwd_vector.to_polar(target_direction).spin, 360 + target_direction_360 - vehicle_fwd_vector_360)
	slot15 = managers.motion_path

	if managers.motion_path.npc_vehicle_debug_output_enabled(360 + target_direction_360 - vehicle_fwd_vector_360) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 60-99, warpins: 1 ---
		slot20 = 10
		slot21 = 10
		slot20 = 0

		Application.draw_line(slot14, Application, unit_position + Vector3(slot17, 0, 0), target_position + Vector3(0, 0, 0), 1, 0)

		slot20 = 10
		slot21 = 10
		slot20 = 1

		Application.draw_line(slot14, Application, unit_position + Vector3(target_position + Vector3(0, 0, 0), 0, 0), unit_position + Vector3(0, 0, 0) + vehicle_fwd_vector * 1000, 0, 0)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 100-104, warpins: 2 ---
	return {
		target_spin = target_spin_relative_to_vehicle,
		angle_to_target = angle_to_target,
		checkpoint_distance = target_distance
	}
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:_choose_next_checkpoint(cop_path, cop_points, target_path, unit_and_pos, cop_position_info, distance_threshold)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-18, warpins: 1 ---
	local target_position = cop_points[unit_and_pos.target_checkpoint].point
	slot10 = self._unit
	local unit_position = self._unit.position(slot9)
	local target_direction = target_position - unit_position
	local target_direction_nrm = target_direction.normalized(slot11)
	slot13 = managers.motion_path

	if managers.motion_path.npc_vehicle_debug_output_enabled(target_direction) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 19-39, warpins: 1 ---
		slot18 = 20
		slot19 = 20
		slot18 = 0

		Application.draw_line(slot12, Application, unit_position + Vector3(slot15, 0, 0), unit_position + Vector3(0, 0, 0) + target_direction_nrm * distance_threshold, 0, 1)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 40-48, warpins: 2 ---
	slot16 = unit_and_pos
	local bridge_to_marker = self._find_bridge(slot12, self, cop_path, target_path)

	if cop_position_info.checkpoint_distance < distance_threshold then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 49-50, warpins: 1 ---
		if bridge_to_marker and bridge_to_marker.marker_to then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 54-67, warpins: 1 ---
			unit_and_pos.direction = bridge_to_marker.direction
			slot18 = unit_and_pos

			managers.motion_path.change_unit_path(slot13, managers.motion_path, cop_path, target_path, bridge_to_marker.marker_to)

			return false
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 68-71, warpins: 2 ---
			if unit_and_pos.target_checkpoint == #cop_points then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 72-76, warpins: 1 ---
				unit_and_pos.target_checkpoint = 1

				if not unit_and_pos.direction or unit_and_pos.direction == "fwd" then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 80-82, warpins: 2 ---
					unit_and_pos.direction = "bck"
					--- END OF BLOCK #0 ---



				else

					-- Decompilation error in this vicinity:
					--- BLOCK #0 83-84, warpins: 1 ---
					unit_and_pos.direction = "fwd"
					--- END OF BLOCK #0 ---



				end

				--- END OF BLOCK #0 ---

				FLOW; TARGET BLOCK #1



				-- Decompilation error in this vicinity:
				--- BLOCK #1 85-90, warpins: 2 ---
				slot15 = NpcVehicleDrivingExt.STATE_MANEUVER_U_TURN

				self.set_state(slot13, self)
				--- END OF BLOCK #1 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 91-102, warpins: 1 ---
				slot16 = #cop_points
				unit_and_pos.target_checkpoint = math.clamp(slot13, unit_and_pos.target_checkpoint + 1, 0)

				if unit_and_pos.target_checkpoint == #cop_points then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 103-105, warpins: 1 ---
					return false
					--- END OF BLOCK #0 ---



				else

					-- Decompilation error in this vicinity:
					--- BLOCK #0 106-107, warpins: 1 ---
					return true
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 108-109, warpins: 5 ---
	return false
	--- END OF BLOCK #2 ---



end
function NpcVehicleDrivingExt:_find_bridge(cop_path, target_path, unit_and_pos)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-2, warpins: 1 ---
	if not cop_path or not cop_path.bridges or not target_path then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-9, warpins: 3 ---
		return nil
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 10-13, warpins: 2 ---
	if cop_path.id == target_path.id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 14-15, warpins: 1 ---
		return nil
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 16-20, warpins: 2 ---
	slot6 = self
	local player_unit = self._get_target_unit(slot5)

	if not player_unit then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 21-22, warpins: 1 ---
		return nil
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 23-27, warpins: 2 ---
	local bridges_to_target = {}
	slot8 = cop_path.bridges

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 28-46, warpins: 0 ---
	for idx, bridge in ipairs(slot7) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 28-31, warpins: 1 ---
		if bridge.path_id == target_path.id then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 32-35, warpins: 1 ---
			if not bridges_to_target[bridge.marker_from] then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 36-38, warpins: 1 ---
				bridges_to_target[bridge.marker_from] = {}
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 39-44, warpins: 2 ---
			slot14 = bridge.marker_to

			table.insert(slot12, bridges_to_target[bridge.marker_from])
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 45-46, warpins: 3 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 47-50, warpins: 1 ---
	local point_id_in_direction = nil

	if not unit_and_pos.direction or unit_and_pos.direction == "fwd" then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 54-55, warpins: 2 ---
		point_id_in_direction = unit_and_pos.target_checkpoint
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 56-60, warpins: 1 ---
		point_id_in_direction = #cop_path.points - unit_and_pos.target_checkpoint + 1
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 61-70, warpins: 2 ---
	slot9 = player_unit
	local player_position = player_unit.position(slot8)
	local cop_on_checkpoint = cop_path.marker_checkpoints[point_id_in_direction]
	local min_distance_marker = {
		distance = 2000000
	}
	slot12 = bridges_to_target

	--- END OF BLOCK #6 ---

	FLOW; TARGET BLOCK #7



	-- Decompilation error in this vicinity:
	--- BLOCK #7 71-100, warpins: 0 ---
	for marker_from, markers_to in pairs(slot11) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 71-74, warpins: 1 ---
		slot17 = markers_to

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 75-98, warpins: 0 ---
		for i, marker_to in ipairs(slot16) do

			-- Decompilation error in this vicinity:
			--- BLOCK #0 75-76, warpins: 1 ---
			if marker_from == cop_on_checkpoint then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 77-93, warpins: 1 ---
				slot24 = marker_to
				local path_direction = self._choose_target_path_direction(slot21, self, target_path)
				slot25 = marker_to
				local marker_to_position = self._get_marker_position(self, self, target_path)
				slot24 = marker_to_position - player_position
				local distance_to_player = marker_to_position - player_position.length(self)

				if distance_to_player <= min_distance_marker.distance then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 94-96, warpins: 1 ---
					min_distance_marker.marker_to = marker_to
					min_distance_marker.distance = distance_to_player
					min_distance_marker.direction = path_direction
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 97-98, warpins: 4 ---
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #1 ---

		FLOW; TARGET BLOCK #2



		-- Decompilation error in this vicinity:
		--- BLOCK #2 99-100, warpins: 2 ---
		--- END OF BLOCK #2 ---



	end

	--- END OF BLOCK #7 ---

	FLOW; TARGET BLOCK #8



	-- Decompilation error in this vicinity:
	--- BLOCK #8 101-101, warpins: 1 ---
	return min_distance_marker
	--- END OF BLOCK #8 ---



end
function NpcVehicleDrivingExt:_get_marker_position(player_path, marker_to)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	local point_id = nil
	slot6 = player_path.marker_checkpoints

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 6-11, warpins: 0 ---
	for id, marker in pairs(slot5) do

		-- Decompilation error in this vicinity:
		--- BLOCK #0 6-7, warpins: 1 ---
		if marker == marker_to then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 8-9, warpins: 1 ---
			point_id = id

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 10-10, warpins: 1 ---
			break
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 10-11, warpins: 2 ---
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 12-13, warpins: 2 ---
	if point_id then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 14-17, warpins: 1 ---
		return player_path.points[point_id].point
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 18-18, warpins: 2 ---
	return 
	--- END OF BLOCK #3 ---



end
function NpcVehicleDrivingExt:_get_player_speed()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	slot3 = self
	local player_vehicle = self._get_target_unit(slot2)

	if player_vehicle then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 6-10, warpins: 1 ---
		slot4 = player_vehicle

		if player_vehicle.vehicle_driving(slot3) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 11-22, warpins: 1 ---
			slot4 = player_vehicle
			slot4 = player_vehicle.vehicle_driving(slot3)._vehicle
			slot4 = player_vehicle.vehicle_driving(slot3)._vehicle.get_state(slot3)

			return player_vehicle.vehicle_driving(slot3)._vehicle.get_state(slot3).get_speed(slot3) * 3.6
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 23-23, warpins: 3 ---
	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:_drive(steering, speed_limit, controls_override)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	local acceleration = 0
	local brake = 0
	local handbrake = 0

	if self._drive_controls and self._drive_controls[self._current_drive_controls] then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-23, warpins: 1 ---
		acceleration = self._drive_controls[self._current_drive_controls].acceleration
		brake = self._drive_controls[self._current_drive_controls].brake
		handbrake = self._drive_controls[self._current_drive_controls].handbrake
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 24-33, warpins: 3 ---
	local vehicle_state = self._vehicle.get_state(slot8)
	slot10 = vehicle_state
	local current_speed = vehicle_state.get_speed(self._vehicle) * 3.6

	if speed_limit < current_speed and speed_limit ~= -1 then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 36-36, warpins: 1 ---
		acceleration = 0
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 37-38, warpins: 3 ---
	if controls_override then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 39-42, warpins: 1 ---
		acceleration = controls_override.acceleration
		steering = controls_override.steering
		brake = controls_override.brake
		handbrake = controls_override.handbrake
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 43-53, warpins: 2 ---
	slot18 = -1

	self.set_input(slot10, self, acceleration, steering, brake, handbrake, false, false)

	return 
	--- END OF BLOCK #3 ---



end
function NpcVehicleDrivingExt:set_input(acceleration, steering, brake, handbrake, geer_up, geer_down, force_gear)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	slot10 = Network

	if Network.is_server(slot9) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 7-20, warpins: 1 ---
		slot10 = self._unit
		slot17 = force_gear

		self._unit.vehicle_driving(slot9).set_input(slot9, self._unit.vehicle_driving(slot9), acceleration, steering, brake, handbrake, geer_up, geer_down)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 21-21, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:brake()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-11, warpins: 1 ---
	slot10 = -1

	self.set_input(slot2, self, 0, 1, 1, 1, false, false)

	return 
	--- END OF BLOCK #0 ---



end
function NpcVehicleDrivingExt:_is_last_checkpoint(path, unit_and_pos)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	if #path.points ~= unit_and_pos.target_checkpoint then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 6-7, warpins: 1 ---
		slot3 = false
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-8, warpins: 1 ---
		slot3 = true
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 9-9, warpins: 2 ---
	return slot3
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:_debug_show()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._debug and self._debug.ws then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 8-8, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 9-54, warpins: 3 ---
	local debug_output_offset = managers.motion_path._debug_output_offset
	self._debug = {}
	slot5 = Overlay
	slot5 = Overlay.newgui(slot4)
	self._debug.ws = Overlay.newgui(slot4).create_screen_workspace(slot4)
	slot5 = self._debug.ws
	self._debug.panel = self._debug.ws.panel(slot4)
	slot6 = {
		text = "",
		name = "debug_info",
		font_size = 14,
		x = 14,
		layer = 2000,
		y = 100 + debug_output_offset,
		font = tweak_data.hud.small_font,
		color = Color.yellow
	}
	self._debug.info = self._debug.panel.text(slot4, self._debug.panel)
	managers.motion_path._debug_output_offset = managers.motion_path._debug_output_offset + 170

	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:destroy()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._debug then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-15, warpins: 1 ---
		slot3 = Overlay
		slot4 = self._debug.ws

		Overlay.newgui(slot2).destroy_workspace(slot2, Overlay.newgui(slot2))

		self._debug.ws = nil
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 16-18, warpins: 2 ---
	self._debug = nil

	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:_get_unit(unit_id)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	if Global.running_simulation then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 5-11, warpins: 1 ---
		slot5 = unit_id

		return managers.editor.unit_with_id(slot3, managers.editor)
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 12-17, warpins: 1 ---
		slot5 = unit_id

		return managers.worlddefinition.get_unit(slot3, managers.worlddefinition)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 18-18, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:_init_states()

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-57, warpins: 1 ---
	local unit = self._unit
	slot6 = unit
	slot6 = unit
	slot6 = unit
	slot6 = unit
	slot6 = unit
	slot6 = unit
	slot6 = unit
	slot6 = unit
	self._states = {
		inactive = NpcVehicleStateInactive.new(slot4, NpcVehicleStateInactive),
		pursuit = NpcVehicleStatePursuit.new(slot4, NpcVehicleStatePursuit),
		player_proximity = NpcVehicleStatePlayerProximity.new(slot4, NpcVehicleStatePlayerProximity),
		broken = NpcVehicleStateBroken.new(slot4, NpcVehicleStateBroken),
		maneuver = NpcVehicleStateManeuver.new(slot4, NpcVehicleStateManeuver),
		maneuver_back_left = NpcVehicleStateManeuverBackLeft.new(slot4, NpcVehicleStateManeuverBackLeft),
		maneuver_back_right = NpcVehicleStateManeuverBackRight.new(slot4, NpcVehicleStateManeuverBackRight),
		maneuver_u_turn = NpcVehicleStateManeuverUTurn.new(slot4, NpcVehicleStateManeuverUTurn)
	}
	slot5 = NpcVehicleDrivingExt.STATE_INACTIVE

	self._set_state(NpcVehicleStateManeuverUTurn.new(slot4, NpcVehicleStateManeuverUTurn), self)

	return 
	--- END OF BLOCK #0 ---



end
function NpcVehicleDrivingExt:_set_state(new_state)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if self._current_state then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-8, warpins: 1 ---
		slot5 = self

		self._current_state.on_exit(slot3, self._current_state)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 9-18, warpins: 2 ---
	self._current_state = self._states[new_state]
	self._current_state_name = new_state
	slot5 = self

	self._current_state.on_enter(slot3, self._current_state)

	return 
	--- END OF BLOCK #1 ---



end
function NpcVehicleDrivingExt:set_state(new_state)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-10, warpins: 1 ---
	slot5 = new_state

	self._set_state(slot3, self)

	slot4 = Network

	if Network.is_server(slot3) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 11-22, warpins: 1 ---
		slot4 = managers.network
		slot8 = self._target_unit

		managers.network.session(slot3).send_to_peers_synched(slot3, managers.network.session(slot3), "sync_npc_vehicle_data", self._unit, self._current_state_name)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 23-23, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end

return 

--- END OF BLOCK #0 ---

FLOW; TARGET BLOCK #2



-- Decompilation error in this vicinity:
--- BLOCK #1 31-32, warpins: 1 ---
slot0 = class()
--- END OF BLOCK #1 ---

FLOW; TARGET BLOCK #2



-- Decompilation error in this vicinity:
--- BLOCK #2 33-175, warpins: 2 ---
--- END OF BLOCK #2 ---



