-- Decompilation Error: _run_step(_unwarp_expressions, node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- Decompilation Error: _glue_flows(node)

-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
-- WARNING: Error occurred during decompilation.
--   Code may be incomplete or incorrect.
slot2 = CopLogicAttack
TankCopLogicAttack = class(slot1)
function TankCopLogicAttack.enter(data, new_logic_name, enter_params)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-18, warpins: 1 ---
	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 27-49, warpins: 2 ---
	local my_data = {}
	my_data.unit = data.unit
	slot9 = my_data

	CopLogicBase.enter(slot5, data, new_logic_name, enter_params)

	local old_internal_data = data.internal_data
	data.internal_data = my_data
	my_data.detection = data.char_tweak.detection.combat

	if old_internal_data then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 19-26, warpins: 1 ---
		my_data.turning = old_internal_data.turning
		my_data.firing = old_internal_data.firing
		my_data.shooting = old_internal_data.shooting
		my_data.attention_unit = old_internal_data.attention_unit
		--- END OF BLOCK #0 ---



	end

	slot7 = data.key
	local key_str = tostring(slot6)
	my_data.detection_task_key = "CopLogicAttack._upd_enemy_detection" .. key_str
	slot11 = data

	CopLogicBase.queue_task(key_str, my_data, my_data.detection_task_key, CopLogicAttack._upd_enemy_detection)

	slot9 = my_data

	CopLogicBase._chk_has_old_action(key_str, data)

	slot6 = (data.objective and data.objective.attitude) or "avoid"
	my_data.attitude = slot6
	slot9 = data.unit
	slot9 = data.unit.inventory(data.unit)
	slot9 = data.unit.inventory(data.unit).equipped_unit(data.unit)
	slot9 = data.unit.inventory(data.unit).equipped_unit(data.unit).base(data.unit)
	my_data.weapon_range = data.char_tweak.weapon[data.unit.inventory(data.unit).equipped_unit(data.unit).base(data.unit).weapon_tweak_data(data.unit).usage].range
	slot8 = data.unit
	slot9 = false

	data.unit.brain(data.unit.inventory(data.unit).equipped_unit(data.unit).base(data.unit).weapon_tweak_data(data.unit).usage).set_update_enabled_state(data.unit.inventory(data.unit).equipped_unit(data.unit).base(data.unit).weapon_tweak_data(data.unit).usage, data.unit.brain(data.unit.inventory(data.unit).equipped_unit(data.unit).base(data.unit).weapon_tweak_data(data.unit).usage))

	my_data.update_queue_id = "TankCopLogicAttack.queued_update" .. key_str
	slot9 = my_data

	TankCopLogicAttack.queue_update(key_str, data)

	slot8 = data.unit
	slot9 = false

	data.unit.movement(key_str).set_cool(key_str, data.unit.movement(key_str))

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #2 50-53, warpins: 1 ---
	if not data.objective.attitude then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 54-54, warpins: 2 ---
		slot6 = "avoid"
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 55-102, warpins: 2 ---
	if my_data ~= data.internal_data then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 103-103, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 104-112, warpins: 2 ---
	slot8 = data.unit
	slot9 = {
		cbt = true
	}

	data.unit.brain(slot7).set_attention_settings(slot7, data.unit.brain(slot7))

	return 
	--- END OF BLOCK #4 ---



end
function TankCopLogicAttack.exit(data, new_logic_name, enter_params)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-37, warpins: 1 ---
	slot7 = enter_params

	CopLogicBase.exit(slot4, data, new_logic_name)

	local my_data = data.internal_data
	slot7 = my_data

	TankCopLogicAttack._cancel_chase_attempt(data, data)

	slot6 = data.unit
	slot6 = data.unit.brain(data)

	data.unit.brain(data).cancel_all_pathing_searches(data)

	slot6 = my_data

	CopLogicBase.cancel_queued_tasks(data)

	slot7 = "path"

	data.brain.rem_pos_rsrv(data, data.brain)

	slot6 = data.unit
	slot7 = true

	data.unit.brain(data).set_update_enabled_state(data, data.unit.brain(data))

	return 
	--- END OF BLOCK #0 ---



end
function TankCopLogicAttack.update(data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	local t = data.t
	local unit = data.unit
	local my_data = data.internal_data

	if my_data.has_old_action then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 7-12, warpins: 1 ---
		slot7 = my_data

		CopLogicAttack._upd_stop_old_action(slot5, data)

		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 13-18, warpins: 2 ---
	slot6 = data

	if CopLogicBase._chk_relocate(slot5) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 19-19, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #1 ---

	FLOW; TARGET BLOCK #2



	-- Decompilation error in this vicinity:
	--- BLOCK #2 20-22, warpins: 2 ---
	if not data.attention_obj or data.attention_obj.reaction < AIAttentionObject.REACT_AIM then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 29-36, warpins: 2 ---
		slot7 = true

		CopLogicAttack._upd_enemy_detection(slot5, data)

		if my_data ~= data.internal_data or not data.attention_obj or data.attention_obj.reaction < AIAttentionObject.REACT_AIM then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 46-46, warpins: 3 ---
			return 
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #2 ---

	FLOW; TARGET BLOCK #3



	-- Decompilation error in this vicinity:
	--- BLOCK #3 47-56, warpins: 3 ---
	local focus_enemy = data.attention_obj
	slot8 = my_data

	TankCopLogicAttack._process_pathing_results(slot6, data)

	local enemy_visible = focus_enemy.verified

	if my_data.attitude ~= "engage" then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 57-58, warpins: 1 ---
		slot6 = false
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 59-59, warpins: 1 ---
		local engage = true
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #3 ---

	FLOW; TARGET BLOCK #4



	-- Decompilation error in this vicinity:
	--- BLOCK #4 60-62, warpins: 2 ---
	if not my_data.turning then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 63-72, warpins: 1 ---
		slot9 = data.unit
		slot10 = "walk"

		if not data.unit.movement(slot8).chk_action_forbidden(slot8, data.unit.movement(slot8)) then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 73-73, warpins: 1 ---
			local action_taken = my_data.walking_to_chase_pos
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #4 ---

	FLOW; TARGET BLOCK #5



	-- Decompilation error in this vicinity:
	--- BLOCK #5 74-75, warpins: 3 ---
	if action_taken then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 76-76, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #5 ---

	FLOW; TARGET BLOCK #6



	-- Decompilation error in this vicinity:
	--- BLOCK #6 77-82, warpins: 2 ---
	slot10 = unit

	if unit.anim_data(slot9).crouch then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 83-87, warpins: 1 ---
		slot10 = data
		action_taken = CopLogicAttack._request_action_stand(slot9)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #6 ---

	FLOW; TARGET BLOCK #7



	-- Decompilation error in this vicinity:
	--- BLOCK #7 88-89, warpins: 2 ---
	if action_taken then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 90-90, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #7 ---

	FLOW; TARGET BLOCK #8



	-- Decompilation error in this vicinity:
	--- BLOCK #8 91-92, warpins: 2 ---
	if not enemy_visible or not focus_enemy.m_pos then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 96-96, warpins: 2 ---
		local enemy_pos = focus_enemy.verified_pos
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #8 ---

	FLOW; TARGET BLOCK #9



	-- Decompilation error in this vicinity:
	--- BLOCK #9 97-106, warpins: 2 ---
	slot14 = enemy_pos
	action_taken = CopLogicAttack._request_action_turn_to_enemy(slot10, data, my_data, data.m_pos)

	if action_taken then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 107-107, warpins: 1 ---
		return 
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #9 ---

	FLOW; TARGET BLOCK #10



	-- Decompilation error in this vicinity:
	--- BLOCK #10 108-121, warpins: 2 ---
	local chase = nil
	slot12 = data.m_pos.z - focus_enemy.m_pos.z
	local z_dist = math.abs(slot11)

	if AIAttentionObject.REACT_COMBAT <= focus_enemy.reaction then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 122-123, warpins: 1 ---
		if enemy_visible then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 124-126, warpins: 1 ---
			if z_dist < 300 or 2000 < focus_enemy.verified_dis or (engage and 500 < focus_enemy.verified_dis) then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 137-137, warpins: 3 ---
				chase = true
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 138-141, warpins: 3 ---
			if focus_enemy.verified_dis < 800 then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 142-147, warpins: 1 ---
				slot13 = unit

				if unit.anim_data(slot12).run then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 148-157, warpins: 1 ---
					local new_action = {
						body_part = 2,
						type = "idle"
					}
					slot14 = data.unit
					slot15 = new_action

					data.unit.brain(slot13).action_request(slot13, data.unit.brain(slot13))
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #1 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 158-160, warpins: 1 ---
			if z_dist < 300 or 2000 < focus_enemy.verified_dis or (engage and (not focus_enemy.verified_t or 5 < t - focus_enemy.verified_t or 700 < focus_enemy.verified_dis)) then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 179-179, warpins: 5 ---
				chase = true
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #10 ---

	FLOW; TARGET BLOCK #11



	-- Decompilation error in this vicinity:
	--- BLOCK #11 180-181, warpins: 7 ---
	if chase then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 182-184, warpins: 1 ---
		if my_data.walking_to_chase_pos then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 185-185, warpins: 1 ---
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 186-188, warpins: 1 ---
			if my_data.pathing_to_chase_pos then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 189-189, warpins: 1 ---
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 190-192, warpins: 1 ---
				if my_data.chase_path then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 193-196, warpins: 1 ---
					local dist = focus_enemy.verified_dis

					if focus_enemy.verified then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 197-198, warpins: 1 ---
						slot12 = 1500
						--- END OF BLOCK #0 ---



					else

						-- Decompilation error in this vicinity:
						--- BLOCK #0 199-199, warpins: 1 ---
						local run_dist = 800
						--- END OF BLOCK #0 ---



					end

					--- END OF BLOCK #0 ---

					FLOW; TARGET BLOCK #1



					-- Decompilation error in this vicinity:
					--- BLOCK #1 200-201, warpins: 2 ---
					if dist >= run_dist then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 202-203, warpins: 1 ---
						slot13 = false
						--- END OF BLOCK #0 ---



					else

						-- Decompilation error in this vicinity:
						--- BLOCK #0 204-204, warpins: 1 ---
						local walk = true
						--- END OF BLOCK #0 ---



					end

					--- END OF BLOCK #1 ---

					FLOW; TARGET BLOCK #2



					-- Decompilation error in this vicinity:
					--- BLOCK #2 205-210, warpins: 2 ---
					slot14 = TankCopLogicAttack._chk_request_action_walk_to_chase_pos
					slot16 = data
					slot17 = my_data

					if walk then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 211-212, warpins: 1 ---
						slot18 = "walk"
						--- END OF BLOCK #0 ---



					else

						-- Decompilation error in this vicinity:
						--- BLOCK #0 213-213, warpins: 1 ---
						slot18 = "run"
						--- END OF BLOCK #0 ---



					end

					--- END OF BLOCK #2 ---

					FLOW; TARGET BLOCK #3



					-- Decompilation error in this vicinity:
					--- BLOCK #3 214-215, warpins: 2 ---
					slot14(slot15, slot16, slot17)
					--- END OF BLOCK #3 ---



				else

					-- Decompilation error in this vicinity:
					--- BLOCK #0 216-218, warpins: 1 ---
					if my_data.chase_pos then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 219-251, warpins: 1 ---
						slot15 = unit
						my_data.chase_path_search_id = tostring(unit.key(slot14)) .. "chase"
						my_data.pathing_to_chase_pos = true
						local to_pos = my_data.chase_pos
						my_data.chase_pos = nil
						slot16 = {
							radius = 60,
							position = mvector3.copy(slot18)
						}
						slot19 = to_pos

						data.brain.add_pos_rsrv(unit.key, data.brain, "path")

						slot14 = unit
						slot16 = to_pos

						unit.brain(unit.key).search_for_path(unit.key, unit.brain(unit.key), my_data.chase_path_search_id)
						--- END OF BLOCK #0 ---



					else

						-- Decompilation error in this vicinity:
						--- BLOCK #0 252-254, warpins: 1 ---
						if focus_enemy.nav_tracker then

							-- Decompilation error in this vicinity:
							--- BLOCK #0 255-262, warpins: 1 ---
							slot15 = focus_enemy.nav_tracker
							my_data.chase_pos = CopLogicAttack._find_flank_pos(slot12, data, my_data)
							--- END OF BLOCK #0 ---



						end
						--- END OF BLOCK #0 ---



					end
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 263-267, warpins: 1 ---
		slot14 = my_data

		TankCopLogicAttack._cancel_chase_attempt(slot12, data)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #11 ---

	FLOW; TARGET BLOCK #12



	-- Decompilation error in this vicinity:
	--- BLOCK #12 268-268, warpins: 7 ---
	return 
	--- END OF BLOCK #12 ---



end
function TankCopLogicAttack.queued_update(data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-18, warpins: 1 ---
	local my_data = data.internal_data
	my_data.update_queued = false
	slot4 = TimerManager
	slot4 = TimerManager.game(slot3)
	data.t = TimerManager.game(slot3).time(slot3)
	slot4 = data

	TankCopLogicAttack.update(slot3)

	if my_data == data.internal_data then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 19-23, warpins: 1 ---
		slot5 = data.internal_data

		TankCopLogicAttack.queue_update(slot3, data)
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 24-24, warpins: 2 ---
	return 
	--- END OF BLOCK #1 ---



end
function TankCopLogicAttack._process_pathing_results(data, my_data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if data.pathing_results then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-10, warpins: 1 ---
		local pathing_results = data.pathing_results
		data.pathing_results = nil
		local path = pathing_results[my_data.chase_path_search_id]

		if path then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 11-12, warpins: 1 ---
			if path ~= "failed" then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 13-14, warpins: 1 ---
				my_data.chase_path = path
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 15-17, warpins: 1 ---
				slot6 = "[TankCopLogicAttack._process_pathing_results] chase path failed"

				print(slot5)
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 18-21, warpins: 2 ---
			my_data.pathing_to_chase_pos = nil
			my_data.chase_path_search_id = nil
			--- END OF BLOCK #1 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 22-22, warpins: 3 ---
	return 
	--- END OF BLOCK #1 ---



end
function TankCopLogicAttack._cancel_chase_attempt(data, my_data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	my_data.chase_path = nil

	if my_data.walking_to_chase_pos then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 6-15, warpins: 1 ---
		local new_action = {
			body_part = 2,
			type = "idle"
		}
		slot5 = data.unit
		slot6 = new_action

		data.unit.brain(slot4).action_request(slot4, data.unit.brain(slot4))
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 16-18, warpins: 1 ---
		if my_data.pathing_to_chase_pos then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 19-28, warpins: 1 ---
			slot5 = "path"

			data.brain.rem_pos_rsrv(slot3, data.brain)

			if data.active_searches[my_data.chase_path_search_id] then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 29-39, warpins: 1 ---
				slot5 = my_data.chase_path_search_id

				managers.navigation.cancel_pathing_search(slot3, managers.navigation)

				data.active_searches[my_data.chase_path_search_id] = nil
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 40-42, warpins: 1 ---
				if data.pathing_results then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 43-46, warpins: 1 ---
					data.pathing_results[my_data.chase_path_search_id] = nil
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---



			end

			--- END OF BLOCK #0 ---

			FLOW; TARGET BLOCK #1



			-- Decompilation error in this vicinity:
			--- BLOCK #1 47-58, warpins: 3 ---
			my_data.chase_path_search_id = nil
			my_data.pathing_to_chase_pos = nil
			slot4 = data.unit
			slot4 = data.unit.brain(slot3)

			data.unit.brain(slot3).cancel_all_pathing_searches(slot3)
			--- END OF BLOCK #1 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 59-61, warpins: 1 ---
			if my_data.chase_pos then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 62-63, warpins: 1 ---
				my_data.chase_pos = nil
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 64-64, warpins: 4 ---
	return 
	--- END OF BLOCK #1 ---



end
function TankCopLogicAttack.on_action_completed(data, action)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-6, warpins: 1 ---
	slot4 = action
	local action_type = action.type(slot3)
	local my_data = data.internal_data

	if action_type == "walk" then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 7-11, warpins: 1 ---
		my_data.advancing = nil

		if my_data.walking_to_chase_pos then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 12-14, warpins: 1 ---
			my_data.walking_to_chase_pos = nil
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 15-16, warpins: 1 ---
		if action_type == "shoot" then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 17-19, warpins: 1 ---
			my_data.shooting = nil
			--- END OF BLOCK #0 ---



		else

			-- Decompilation error in this vicinity:
			--- BLOCK #0 20-21, warpins: 1 ---
			if action_type == "turn" then

				-- Decompilation error in this vicinity:
				--- BLOCK #0 22-24, warpins: 1 ---
				my_data.turning = nil
				--- END OF BLOCK #0 ---



			else

				-- Decompilation error in this vicinity:
				--- BLOCK #0 25-26, warpins: 1 ---
				if action_type == "hurt" then

					-- Decompilation error in this vicinity:
					--- BLOCK #0 27-31, warpins: 1 ---
					slot6 = action

					if action.expired(slot5) then

						-- Decompilation error in this vicinity:
						--- BLOCK #0 32-36, warpins: 1 ---
						slot7 = my_data

						CopLogicAttack._upd_aim(slot5, data)
						--- END OF BLOCK #0 ---



					end
					--- END OF BLOCK #0 ---



				end
				--- END OF BLOCK #0 ---



			end
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 37-37, warpins: 7 ---
	return 
	--- END OF BLOCK #1 ---



end
function TankCopLogicAttack.chk_should_turn(data, my_data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-3, warpins: 1 ---
	if not my_data.turning then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 4-13, warpins: 1 ---
		slot4 = data.unit
		slot5 = "walk"
		--- END OF BLOCK #0 ---



	else

		-- Decompilation error in this vicinity:
		--- BLOCK #0 20-21, warpins: 3 ---
		slot2 = false

		if false then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 22-22, warpins: 0 ---
			slot2 = true
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 23-23, warpins: 3 ---
	return slot2
	--- END OF BLOCK #1 ---



end
function TankCopLogicAttack.queue_update(data, my_data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-14, warpins: 1 ---
	my_data.update_queued = true
	slot9 = data.important

	CopLogicBase.queue_task(slot3, my_data, my_data.update_queue_id, TankCopLogicAttack.queued_update, data, data.t + 1.5)

	return 
	--- END OF BLOCK #0 ---



end
function TankCopLogicAttack._chk_request_action_walk_to_chase_pos(data, my_data, speed, end_rot)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-10, warpins: 1 ---
	slot6 = data.unit
	slot7 = "walk"

	if not data.unit.movement(slot5).chk_action_forbidden(slot5, data.unit.movement(slot5)) then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 11-15, warpins: 1 ---
		local new_action_data = {
			type = "walk",
			body_part = 2
		}
		new_action_data.nav_path = my_data.chase_path

		if not speed then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 16-16, warpins: 1 ---
			slot5 = "run"
			--- END OF BLOCK #0 ---



		end

		--- END OF BLOCK #0 ---

		FLOW; TARGET BLOCK #1



		-- Decompilation error in this vicinity:
		--- BLOCK #1 17-32, warpins: 2 ---
		new_action_data.variant = slot5
		new_action_data.end_rot = end_rot
		my_data.chase_path = nil
		slot7 = data.unit
		slot8 = new_action_data
		my_data.walking_to_chase_pos = data.unit.brain(slot6).action_request(slot6, data.unit.brain(slot6))

		if my_data.walking_to_chase_pos then

			-- Decompilation error in this vicinity:
			--- BLOCK #0 33-37, warpins: 1 ---
			slot8 = "path"

			data.brain.rem_pos_rsrv(slot6, data.brain)
			--- END OF BLOCK #0 ---



		end
		--- END OF BLOCK #1 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 38-38, warpins: 3 ---
	return 
	--- END OF BLOCK #1 ---



end
function TankCopLogicAttack.is_advancing(data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	if data.internal_data.walking_to_chase_pos and data.pos_rsrv.move_dest then

		-- Decompilation error in this vicinity:
		--- BLOCK #0 9-12, warpins: 1 ---
		return data.pos_rsrv.move_dest.position
		--- END OF BLOCK #0 ---



	end

	--- END OF BLOCK #0 ---

	FLOW; TARGET BLOCK #1



	-- Decompilation error in this vicinity:
	--- BLOCK #1 13-13, warpins: 3 ---
	return 
	--- END OF BLOCK #1 ---



end
function TankCopLogicAttack._get_all_paths(data)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-5, warpins: 1 ---
	return {
		chase_path = data.internal_data.chase_path
	}
	--- END OF BLOCK #0 ---



end
function TankCopLogicAttack._set_verified_paths(data, verified_paths)

	-- Decompilation error in this vicinity:
	--- BLOCK #0 1-4, warpins: 1 ---
	data.internal_data.chase_path = verified_paths.chase_path

	return 
	--- END OF BLOCK #0 ---



end

return 
